"use strict";var WT=Object.create;var Zs=Object.defineProperty;var jT=Object.getOwnPropertyDescriptor;var KT=Object.getOwnPropertyNames;var JT=Object.getPrototypeOf,YT=Object.prototype.hasOwnProperty;var a=(e,t)=>()=>(e&&(t=e(e=0)),t);var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ne=(e,t)=>{for(var r in t)Zs(e,r,{get:t[r],enumerable:!0})},vp=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of KT(t))!YT.call(e,n)&&n!==r&&Zs(e,n,{get:()=>t[n],enumerable:!(o=jT(t,n))||o.enumerable});return e};var at=(e,t,r)=>(r=e!=null?WT(JT(e)):{},vp(t||!e||!e.__esModule?Zs(r,"default",{value:e,enumerable:!0}):r,e)),Tp=e=>vp(Zs({},"__esModule",{value:!0}),e);var ei=q(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.toCommandProperties=vo.toCommandValue=void 0;function XT(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}vo.toCommandValue=XT;function QT(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}vo.toCommandProperties=QT});var Op=q(De=>{"use strict";var ZT=De&&De.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),eI=De&&De.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tI=De&&De.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ZT(t,e,r);return eI(t,e),t};Object.defineProperty(De,"__esModule",{value:!0});De.issue=De.issueCommand=void 0;var rI=tI(require("os")),bp=ei();function Pp(e,t,r){let o=new cc(e,t,r);process.stdout.write(o.toString()+rI.EOL)}De.issueCommand=Pp;function oI(e,t=""){Pp(e,{},t)}De.issue=oI;var Ip="::",cc=class{constructor(t,r,o){t||(t="missing.command"),this.command=t,this.properties=r,this.message=o}toString(){let t=Ip+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let o in this.properties)if(this.properties.hasOwnProperty(o)){let n=this.properties[o];n&&(r?r=!1:t+=",",t+=`${o}=${sI(n)}`)}}return t+=`${Ip}${nI(this.message)}`,t}};function nI(e){return bp.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function sI(e){return bp.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function _n(){return ti>ri.length-16&&(Np.default.randomFillSync(ri),ti=0),ri.slice(ti,ti+=16)}var Np,ri,ti,dc=a(()=>{Np=at(require("crypto")),ri=new Uint8Array(256),ti=ri.length});var Dp,kp=a(()=>{Dp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function iI(e){return typeof e=="string"&&Dp.test(e)}var er,An=a(()=>{kp();er=iI});function aI(e,t=0){let r=(re[e[t+0]]+re[e[t+1]]+re[e[t+2]]+re[e[t+3]]+"-"+re[e[t+4]]+re[e[t+5]]+"-"+re[e[t+6]]+re[e[t+7]]+"-"+re[e[t+8]]+re[e[t+9]]+"-"+re[e[t+10]]+re[e[t+11]]+re[e[t+12]]+re[e[t+13]]+re[e[t+14]]+re[e[t+15]]).toLowerCase();if(!er(r))throw TypeError("Stringified UUID is invalid");return r}var re,tr,Rn=a(()=>{An();re=[];for(let e=0;e<256;++e)re.push((e+256).toString(16).substr(1));tr=aI});function cI(e,t,r){let o=t&&r||0,n=t||new Array(16);e=e||{};let s=e.node||$p,i=e.clockseq!==void 0?e.clockseq:lc;if(s==null||i==null){let m=e.random||(e.rng||_n)();s==null&&(s=$p=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),i==null&&(i=lc=(m[6]<<8|m[7])&16383)}let c=e.msecs!==void 0?e.msecs:Date.now(),d=e.nsecs!==void 0?e.nsecs:pc+1,l=c-uc+(d-pc)/1e4;if(l<0&&e.clockseq===void 0&&(i=i+1&16383),(l<0||c>uc)&&e.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");uc=c,pc=d,lc=i,c+=122192928e5;let u=((c&268435455)*1e4+d)%4294967296;n[o++]=u>>>24&255,n[o++]=u>>>16&255,n[o++]=u>>>8&255,n[o++]=u&255;let p=c/4294967296*1e4&268435455;n[o++]=p>>>8&255,n[o++]=p&255,n[o++]=p>>>24&15|16,n[o++]=p>>>16&255,n[o++]=i>>>8|128,n[o++]=i&255;for(let m=0;m<6;++m)n[o+m]=s[m];return t||tr(n)}var $p,lc,uc,pc,Up,Lp=a(()=>{dc();Rn();uc=0,pc=0;Up=cI});function dI(e){if(!er(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var oi,mc=a(()=>{An();oi=dI});function lI(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function ni(e,t,r){function o(n,s,i,c){if(typeof n=="string"&&(n=lI(n)),typeof s=="string"&&(s=oi(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+n.length);if(d.set(s),d.set(n,s.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,i){c=c||0;for(let l=0;l<16;++l)i[c+l]=d[l];return i}return tr(d)}try{o.name=e}catch{}return o.DNS=uI,o.URL=pI,o}var uI,pI,fc=a(()=>{Rn();mc();uI="6ba7b810-9dad-11d1-80b4-00c04fd430c8",pI="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function mI(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Fp.default.createHash("md5").update(e).digest()}var Fp,Mp,Hp=a(()=>{Fp=at(require("crypto"));Mp=mI});var fI,Vp,qp=a(()=>{fc();Hp();fI=ni("v3",48,Mp),Vp=fI});function hI(e,t,r){e=e||{};let o=e.random||(e.rng||_n)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return tr(o)}var Bp,Gp=a(()=>{dc();Rn();Bp=hI});function gI(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),zp.default.createHash("sha1").update(e).digest()}var zp,Wp,jp=a(()=>{zp=at(require("crypto"));Wp=gI});var yI,Kp,Jp=a(()=>{fc();jp();yI=ni("v5",80,Wp),Kp=yI});var Yp,Xp=a(()=>{Yp="00000000-0000-0000-0000-000000000000"});function SI(e){if(!er(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Qp,Zp=a(()=>{An();Qp=SI});var em={};Ne(em,{NIL:()=>Yp,parse:()=>oi,stringify:()=>tr,v1:()=>Up,v3:()=>Vp,v4:()=>Bp,v5:()=>Kp,validate:()=>er,version:()=>Qp});var tm=a(()=>{Lp();qp();Gp();Jp();Xp();Zp();An();Rn();mc()});var sm=q(ke=>{"use strict";var EI=ke&&ke.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),xI=ke&&ke.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),om=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&EI(t,e,r);return xI(t,e),t};Object.defineProperty(ke,"__esModule",{value:!0});ke.prepareKeyValueMessage=ke.issueFileCommand=void 0;var rm=om(require("fs")),hc=om(require("os")),CI=(tm(),Tp(em)),nm=ei();function wI(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!rm.existsSync(r))throw new Error(`Missing file at path: ${r}`);rm.appendFileSync(r,`${nm.toCommandValue(t)}${hc.EOL}`,{encoding:"utf8"})}ke.issueFileCommand=wI;function _I(e,t){let r=`ghadelimiter_${CI.v4()}`,o=nm.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(o.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${hc.EOL}${o}${hc.EOL}${r}`}ke.prepareKeyValueMessage=_I});var am=q(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.checkBypass=To.getProxyUrl=void 0;function AI(e){let t=e.protocol==="https:";if(im(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}To.getProxyUrl=AI;function im(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let o=[e.hostname.toUpperCase()];typeof r=="number"&&o.push(`${o[0]}:${r}`);for(let n of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(o.some(s=>s===n))return!0;return!1}To.checkBypass=im});var um=q(Io=>{"use strict";var m$=require("net"),RI=require("tls"),gc=require("http"),cm=require("https"),vI=require("events"),f$=require("assert"),TI=require("util");Io.httpOverHttp=II;Io.httpsOverHttp=bI;Io.httpOverHttps=PI;Io.httpsOverHttps=OI;function II(e){var t=new Ut(e);return t.request=gc.request,t}function bI(e){var t=new Ut(e);return t.request=gc.request,t.createSocket=dm,t.defaultPort=443,t}function PI(e){var t=new Ut(e);return t.request=cm.request,t}function OI(e){var t=new Ut(e);return t.request=cm.request,t.createSocket=dm,t.defaultPort=443,t}function Ut(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||gc.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(o,n,s,i){for(var c=lm(n,s,i),d=0,l=t.requests.length;d<l;++d){var u=t.requests[d];if(u.host===c.host&&u.port===c.port){t.requests.splice(d,1),u.request.onSocket(o);return}}o.destroy(),t.removeSocket(o)})}TI.inherits(Ut,vI.EventEmitter);Ut.prototype.addRequest=function(t,r,o,n){var s=this,i=yc({request:t},s.options,lm(r,o,n));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(c){c.on("free",d),c.on("close",l),c.on("agentRemove",l),t.onSocket(c);function d(){s.emit("free",c,i)}function l(u){s.removeSocket(c),c.removeListener("free",d),c.removeListener("close",l),c.removeListener("agentRemove",l)}})};Ut.prototype.createSocket=function(t,r){var o=this,n={};o.sockets.push(n);var s=yc({},o.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),rr("making CONNECT request");var i=o.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",c),i.once("upgrade",d),i.once("connect",l),i.once("error",u),i.end();function c(p){p.upgrade=!0}function d(p,m,f){process.nextTick(function(){l(p,m,f)})}function l(p,m,f){if(i.removeAllListeners(),m.removeAllListeners(),p.statusCode!==200){rr("tunneling socket could not be established, statusCode=%d",p.statusCode),m.destroy();var g=new Error("tunneling socket could not be established, statusCode="+p.statusCode);g.code="ECONNRESET",t.request.emit("error",g),o.removeSocket(n);return}if(f.length>0){rr("got illegal response body from proxy"),m.destroy();var g=new Error("got illegal response body from proxy");g.code="ECONNRESET",t.request.emit("error",g),o.removeSocket(n);return}return rr("tunneling connection has established"),o.sockets[o.sockets.indexOf(n)]=m,r(m)}function u(p){i.removeAllListeners(),rr(`tunneling socket could not be established, cause=%s
`,p.message,p.stack);var m=new Error("tunneling socket could not be established, cause="+p.message);m.code="ECONNRESET",t.request.emit("error",m),o.removeSocket(n)}};Ut.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var o=this.requests.shift();o&&this.createSocket(o,function(n){o.request.onSocket(n)})}};function dm(e,t){var r=this;Ut.prototype.createSocket.call(r,e,function(o){var n=e.request.getHeader("host"),s=yc({},r.options,{socket:o,servername:n?n.replace(/:.*$/,""):e.host}),i=RI.connect(0,s);r.sockets[r.sockets.indexOf(o)]=i,t(i)})}function lm(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function yc(e){for(var t=1,r=arguments.length;t<r;++t){var o=arguments[t];if(typeof o=="object")for(var n=Object.keys(o),s=0,i=n.length;s<i;++s){var c=n[s];o[c]!==void 0&&(e[c]=o[c])}}return e}var rr;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?rr=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:rr=function(){};Io.debug=rr});var mm=q((g$,pm)=>{pm.exports=um()});var hm=q(L=>{"use strict";var NI=L&&L.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),DI=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),li=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&NI(t,e,r);return DI(t,e),t},Q=L&&L.__awaiter||function(e,t,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(u){try{l(o.next(u))}catch(p){i(p)}}function d(u){try{l(o.throw(u))}catch(p){i(p)}}function l(u){u.done?s(u.value):n(u.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(L,"__esModule",{value:!0});L.HttpClient=L.isHttps=L.HttpClientResponse=L.HttpClientError=L.getProxyUrl=L.MediaTypes=L.Headers=L.HttpCodes=void 0;var si=li(require("http")),Sc=li(require("https")),fm=li(am()),ii=li(mm()),ct;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(ct=L.HttpCodes||(L.HttpCodes={}));var me;(function(e){e.Accept="accept",e.ContentType="content-type"})(me=L.Headers||(L.Headers={}));var or;(function(e){e.ApplicationJson="application/json"})(or=L.MediaTypes||(L.MediaTypes={}));function kI(e){let t=fm.getProxyUrl(new URL(e));return t?t.href:""}L.getProxyUrl=kI;var $I=[ct.MovedPermanently,ct.ResourceMoved,ct.SeeOther,ct.TemporaryRedirect,ct.PermanentRedirect],UI=[ct.BadGateway,ct.ServiceUnavailable,ct.GatewayTimeout],LI=["OPTIONS","GET","DELETE","HEAD"],FI=10,MI=5,ci=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};L.HttpClientError=ci;var di=class{constructor(t){this.message=t}readBody(){return Q(this,void 0,void 0,function*(){return new Promise(t=>Q(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",o=>{r=Buffer.concat([r,o])}),this.message.on("end",()=>{t(r.toString())})}))})}};L.HttpClientResponse=di;function HI(e){return new URL(e).protocol==="https:"}L.isHttps=HI;var Ec=class{constructor(t,r,o){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=o,o&&(o.ignoreSslError!=null&&(this._ignoreSslError=o.ignoreSslError),this._socketTimeout=o.socketTimeout,o.allowRedirects!=null&&(this._allowRedirects=o.allowRedirects),o.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=o.allowRedirectDowngrade),o.maxRedirects!=null&&(this._maxRedirects=Math.max(o.maxRedirects,0)),o.keepAlive!=null&&(this._keepAlive=o.keepAlive),o.allowRetries!=null&&(this._allowRetries=o.allowRetries),o.maxRetries!=null&&(this._maxRetries=o.maxRetries))}options(t,r){return Q(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return Q(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return Q(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,o){return Q(this,void 0,void 0,function*(){return this.request("POST",t,r,o||{})})}patch(t,r,o){return Q(this,void 0,void 0,function*(){return this.request("PATCH",t,r,o||{})})}put(t,r,o){return Q(this,void 0,void 0,function*(){return this.request("PUT",t,r,o||{})})}head(t,r){return Q(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,o,n){return Q(this,void 0,void 0,function*(){return this.request(t,r,o,n)})}getJson(t,r={}){return Q(this,void 0,void 0,function*(){r[me.Accept]=this._getExistingOrDefaultHeader(r,me.Accept,or.ApplicationJson);let o=yield this.get(t,r);return this._processResponse(o,this.requestOptions)})}postJson(t,r,o={}){return Q(this,void 0,void 0,function*(){let n=JSON.stringify(r,null,2);o[me.Accept]=this._getExistingOrDefaultHeader(o,me.Accept,or.ApplicationJson),o[me.ContentType]=this._getExistingOrDefaultHeader(o,me.ContentType,or.ApplicationJson);let s=yield this.post(t,n,o);return this._processResponse(s,this.requestOptions)})}putJson(t,r,o={}){return Q(this,void 0,void 0,function*(){let n=JSON.stringify(r,null,2);o[me.Accept]=this._getExistingOrDefaultHeader(o,me.Accept,or.ApplicationJson),o[me.ContentType]=this._getExistingOrDefaultHeader(o,me.ContentType,or.ApplicationJson);let s=yield this.put(t,n,o);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,o={}){return Q(this,void 0,void 0,function*(){let n=JSON.stringify(r,null,2);o[me.Accept]=this._getExistingOrDefaultHeader(o,me.Accept,or.ApplicationJson),o[me.ContentType]=this._getExistingOrDefaultHeader(o,me.ContentType,or.ApplicationJson);let s=yield this.patch(t,n,o);return this._processResponse(s,this.requestOptions)})}request(t,r,o,n){return Q(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,n),c=this._allowRetries&&LI.includes(t)?this._maxRetries+1:1,d=0,l;do{if(l=yield this.requestRaw(i,o),l&&l.message&&l.message.statusCode===ct.Unauthorized){let p;for(let m of this.handlers)if(m.canHandleAuthentication(l)){p=m;break}return p?p.handleAuthentication(this,i,o):l}let u=this._maxRedirects;for(;l.message.statusCode&&$I.includes(l.message.statusCode)&&this._allowRedirects&&u>0;){let p=l.message.headers.location;if(!p)break;let m=new URL(p);if(s.protocol==="https:"&&s.protocol!==m.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield l.readBody(),m.hostname!==s.hostname)for(let f in n)f.toLowerCase()==="authorization"&&delete n[f];i=this._prepareRequest(t,m,n),l=yield this.requestRaw(i,o),u--}if(!l.message.statusCode||!UI.includes(l.message.statusCode))return l;d+=1,d<c&&(yield l.readBody(),yield this._performExponentialBackoff(d))}while(d<c);return l})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return Q(this,void 0,void 0,function*(){return new Promise((o,n)=>{function s(i,c){i?n(i):c?o(c):n(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,o){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let n=!1;function s(d,l){n||(n=!0,o(d,l))}let i=t.httpModule.request(t.options,d=>{let l=new di(d);s(void 0,l)}),c;i.on("socket",d=>{c=d}),i.setTimeout(this._socketTimeout||3*6e4,()=>{c&&c.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(d){s(d)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,o){let n={};n.parsedUrl=r;let s=n.parsedUrl.protocol==="https:";n.httpModule=s?Sc:si;let i=s?443:80;if(n.options={},n.options.host=n.parsedUrl.hostname,n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):i,n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||""),n.options.method=t,n.options.headers=this._mergeHeaders(o),this.userAgent!=null&&(n.options.headers["user-agent"]=this.userAgent),n.options.agent=this._getAgent(n.parsedUrl),this.handlers)for(let c of this.handlers)c.prepareRequest(n.options);return n}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},ai(this.requestOptions.headers),ai(t||{})):ai(t||{})}_getExistingOrDefaultHeader(t,r,o){let n;return this.requestOptions&&this.requestOptions.headers&&(n=ai(this.requestOptions.headers)[r]),t[r]||n||o}_getAgent(t){let r,o=fm.getProxyUrl(t),n=o&&o.hostname;if(this._keepAlive&&n&&(r=this._proxyAgent),this._keepAlive&&!n&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||si.globalAgent.maxSockets),o&&o.hostname){let c={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(o.username||o.password)&&{proxyAuth:`${o.username}:${o.password}`}),{host:o.hostname,port:o.port})},d,l=o.protocol==="https:";s?d=l?ii.httpsOverHttps:ii.httpsOverHttp:d=l?ii.httpOverHttps:ii.httpOverHttp,r=d(c),this._proxyAgent=r}if(this._keepAlive&&!r){let c={keepAlive:this._keepAlive,maxSockets:i};r=s?new Sc.Agent(c):new si.Agent(c),this._agent=r}return r||(r=s?Sc.globalAgent:si.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return Q(this,void 0,void 0,function*(){t=Math.min(FI,t);let r=MI*Math.pow(2,t);return new Promise(o=>setTimeout(()=>o(),r))})}_processResponse(t,r){return Q(this,void 0,void 0,function*(){return new Promise((o,n)=>Q(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===ct.NotFound&&o(i);function c(u,p){if(typeof p=="string"){let m=new Date(p);if(!isNaN(m.valueOf()))return m}return p}let d,l;try{l=yield t.readBody(),l&&l.length>0&&(r&&r.deserializeDates?d=JSON.parse(l,c):d=JSON.parse(l),i.result=d),i.headers=t.message.headers}catch{}if(s>299){let u;d&&d.message?u=d.message:l&&l.length>0?u=l:u=`Failed request: (${s})`;let p=new ci(u,s);p.result=i.result,n(p)}else o(i)}))})}};L.HttpClient=Ec;var ai=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var gm=q(pt=>{"use strict";var _c=pt&&pt.__awaiter||function(e,t,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(u){try{l(o.next(u))}catch(p){i(p)}}function d(u){try{l(o.throw(u))}catch(p){i(p)}}function l(u){u.done?s(u.value):n(u.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(pt,"__esModule",{value:!0});pt.PersonalAccessTokenCredentialHandler=pt.BearerCredentialHandler=pt.BasicCredentialHandler=void 0;var xc=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return _c(this,void 0,void 0,function*(){throw new Error("not implemented")})}};pt.BasicCredentialHandler=xc;var Cc=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return _c(this,void 0,void 0,function*(){throw new Error("not implemented")})}};pt.BearerCredentialHandler=Cc;var wc=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return _c(this,void 0,void 0,function*(){throw new Error("not implemented")})}};pt.PersonalAccessTokenCredentialHandler=wc});var Em=q(bo=>{"use strict";var ym=bo&&bo.__awaiter||function(e,t,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(u){try{l(o.next(u))}catch(p){i(p)}}function d(u){try{l(o.throw(u))}catch(p){i(p)}}function l(u){u.done?s(u.value):n(u.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(bo,"__esModule",{value:!0});bo.OidcClient=void 0;var VI=hm(),qI=gm(),Sm=Po(),Ac=class e{static createHttpClient(t=!0,r=10){let o={allowRetries:t,maxRetries:r};return new VI.HttpClient("actions/oidc-client",[new qI.BearerCredentialHandler(e.getRequestToken())],o)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return ym(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return ym(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let n=encodeURIComponent(t);r=`${r}&audience=${n}`}Sm.debug(`ID token url is ${r}`);let o=yield e.getCall(r);return Sm.setSecret(o),o}catch(r){throw new Error(`Error message: ${r.message}`)}})}};bo.OidcClient=Ac});var Ic=q(ye=>{"use strict";var Rc=ye&&ye.__awaiter||function(e,t,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(u){try{l(o.next(u))}catch(p){i(p)}}function d(u){try{l(o.throw(u))}catch(p){i(p)}}function l(u){u.done?s(u.value):n(u.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0});ye.summary=ye.markdownSummary=ye.SUMMARY_DOCS_URL=ye.SUMMARY_ENV_VAR=void 0;var BI=require("os"),vc=require("fs"),{access:GI,appendFile:zI,writeFile:WI}=vc.promises;ye.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";ye.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Tc=class{constructor(){this._buffer=""}filePath(){return Rc(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[ye.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${ye.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield GI(t,vc.constants.R_OK|vc.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,o={}){let n=Object.entries(o).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${n}>${r}</${t}>`:`<${t}${n}>`}write(t){return Rc(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),o=yield this.filePath();return yield(r?WI:zI)(o,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Rc(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(BI.EOL)}addCodeBlock(t,r){let o=Object.assign({},r&&{lang:r}),n=this.wrap("pre",this.wrap("code",t),o);return this.addRaw(n).addEOL()}addList(t,r=!1){let o=r?"ol":"ul",n=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(o,n);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(n=>{let s=n.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:c,data:d,colspan:l,rowspan:u}=i,p=c?"th":"td",m=Object.assign(Object.assign({},l&&{colspan:l}),u&&{rowspan:u});return this.wrap(p,d,m)}).join("");return this.wrap("tr",s)}).join(""),o=this.wrap("table",r);return this.addRaw(o).addEOL()}addDetails(t,r){let o=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(o).addEOL()}addImage(t,r,o){let{width:n,height:s}=o||{},i=Object.assign(Object.assign({},n&&{width:n}),s&&{height:s}),c=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(c).addEOL()}addHeading(t,r){let o=`h${r}`,n=["h1","h2","h3","h4","h5","h6"].includes(o)?o:"h1",s=this.wrap(n,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let o=Object.assign({},r&&{cite:r}),n=this.wrap("blockquote",t,o);return this.addRaw(n).addEOL()}addLink(t,r){let o=this.wrap("a",t,{href:r});return this.addRaw(o).addEOL()}},xm=new Tc;ye.markdownSummary=xm;ye.summary=xm});var Cm=q(Se=>{"use strict";var jI=Se&&Se.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),KI=Se&&Se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),JI=Se&&Se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&jI(t,e,r);return KI(t,e),t};Object.defineProperty(Se,"__esModule",{value:!0});Se.toPlatformPath=Se.toWin32Path=Se.toPosixPath=void 0;var YI=JI(require("path"));function XI(e){return e.replace(/[\\]/g,"/")}Se.toPosixPath=XI;function QI(e){return e.replace(/[/]/g,"\\")}Se.toWin32Path=QI;function ZI(e){return e.replace(/[/\\]/g,YI.sep)}Se.toPlatformPath=ZI});var Po=q(x=>{"use strict";var eb=x&&x.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),tb=x&&x.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wm=x&&x.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&eb(t,e,r);return tb(t,e),t},_m=x&&x.__awaiter||function(e,t,r,o){function n(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function c(u){try{l(o.next(u))}catch(p){i(p)}}function d(u){try{l(o.throw(u))}catch(p){i(p)}}function l(u){u.done?s(u.value):n(u.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.getIDToken=x.getState=x.saveState=x.group=x.endGroup=x.startGroup=x.info=x.notice=x.warning=x.error=x.debug=x.isDebug=x.setFailed=x.setCommandEcho=x.setOutput=x.getBooleanInput=x.getMultilineInput=x.getInput=x.addPath=x.setSecret=x.exportVariable=x.ExitCode=void 0;var $e=Op(),io=sm(),Oo=ei(),Am=wm(require("os")),rb=wm(require("path")),ob=Em(),Rm;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Rm=x.ExitCode||(x.ExitCode={}));function nb(e,t){let r=Oo.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return io.issueFileCommand("ENV",io.prepareKeyValueMessage(e,t));$e.issueCommand("set-env",{name:e},r)}x.exportVariable=nb;function sb(e){$e.issueCommand("add-mask",{},e)}x.setSecret=sb;function ib(e){process.env.GITHUB_PATH||""?io.issueFileCommand("PATH",e):$e.issueCommand("add-path",{},e),process.env.PATH=`${e}${rb.delimiter}${process.env.PATH}`}x.addPath=ib;function bc(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}x.getInput=bc;function ab(e,t){let r=bc(e,t).split(`
`).filter(o=>o!=="");return t&&t.trimWhitespace===!1?r:r.map(o=>o.trim())}x.getMultilineInput=ab;function cb(e,t){let r=["true","True","TRUE"],o=["false","False","FALSE"],n=bc(e,t);if(r.includes(n))return!0;if(o.includes(n))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}x.getBooleanInput=cb;function db(e,t){if(process.env.GITHUB_OUTPUT||"")return io.issueFileCommand("OUTPUT",io.prepareKeyValueMessage(e,t));process.stdout.write(Am.EOL),$e.issueCommand("set-output",{name:e},Oo.toCommandValue(t))}x.setOutput=db;function lb(e){$e.issue("echo",e?"on":"off")}x.setCommandEcho=lb;function ub(e){process.exitCode=Rm.Failure,vm(e)}x.setFailed=ub;function pb(){return process.env.RUNNER_DEBUG==="1"}x.isDebug=pb;function mb(e){$e.issueCommand("debug",{},e)}x.debug=mb;function vm(e,t={}){$e.issueCommand("error",Oo.toCommandProperties(t),e instanceof Error?e.toString():e)}x.error=vm;function fb(e,t={}){$e.issueCommand("warning",Oo.toCommandProperties(t),e instanceof Error?e.toString():e)}x.warning=fb;function hb(e,t={}){$e.issueCommand("notice",Oo.toCommandProperties(t),e instanceof Error?e.toString():e)}x.notice=hb;function gb(e){process.stdout.write(e+Am.EOL)}x.info=gb;function Tm(e){$e.issue("group",e)}x.startGroup=Tm;function Im(){$e.issue("endgroup")}x.endGroup=Im;function yb(e,t){return _m(this,void 0,void 0,function*(){Tm(e);let r;try{r=yield t()}finally{Im()}return r})}x.group=yb;function Sb(e,t){if(process.env.GITHUB_STATE||"")return io.issueFileCommand("STATE",io.prepareKeyValueMessage(e,t));$e.issueCommand("save-state",{name:e},Oo.toCommandValue(t))}x.saveState=Sb;function Eb(e){return process.env[`STATE_${e}`]||""}x.getState=Eb;function xb(e){return _m(this,void 0,void 0,function*(){return yield ob.OidcClient.getIDToken(e)})}x.getIDToken=xb;var Cb=Ic();Object.defineProperty(x,"summary",{enumerable:!0,get:function(){return Cb.summary}});var wb=Ic();Object.defineProperty(x,"markdownSummary",{enumerable:!0,get:function(){return wb.markdownSummary}});var Pc=Cm();Object.defineProperty(x,"toPosixPath",{enumerable:!0,get:function(){return Pc.toPosixPath}});Object.defineProperty(x,"toWin32Path",{enumerable:!0,get:function(){return Pc.toWin32Path}});Object.defineProperty(x,"toPlatformPath",{enumerable:!0,get:function(){return Pc.toPlatformPath}})});var nr,sr,bm=a(()=>{nr=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,o){t.updateHttpClientConfig(r,o)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},sr=e=>({httpHandler:e.httpHandler()})});var Pm=a(()=>{bm()});var Om=a(()=>{});var Nm,Dm=a(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Nm||(Nm={}))});var Oc,km=a(()=>{(function(e){e.HEADER="header",e.QUERY="query"})(Oc||(Oc={}))});var $m=a(()=>{});var Um=a(()=>{});var Lm=a(()=>{});var Fm=a(()=>{});var Mm=a(()=>{Dm();km();$m();Um();Lm();Fm()});var Hm=a(()=>{});var Vm=a(()=>{});var qm=a(()=>{});var Bm=a(()=>{});var Gm=a(()=>{});var zm=a(()=>{});var Wm=a(()=>{});var jm=a(()=>{Gm();zm();Wm()});var Km=a(()=>{});var Jm=a(()=>{});var No,Ym=a(()=>{(function(e){e.HTTP="http",e.HTTPS="https"})(No||(No={}))});var Xm=a(()=>{});var Qm=a(()=>{});var Zm=a(()=>{});var ef=a(()=>{});var tf=a(()=>{});var rf=a(()=>{Xm();Qm();Zm();ef();tf()});var of=a(()=>{});var Do,Nc=a(()=>{(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Do||(Do={}))});var nf=a(()=>{Nc()});var sf=a(()=>{});var af=a(()=>{nf();sf();Nc()});var Dc,cf=a(()=>{(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Dc||(Dc={}))});var df=a(()=>{});var lf=a(()=>{});var uf=a(()=>{});var pf=a(()=>{});var mf=a(()=>{});var ff=a(()=>{lf();uf();pf();mf()});var hf=a(()=>{});var ko,gf=a(()=>{ko="__smithy_context"});var yf=a(()=>{});var Lt,Sf=a(()=>{(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Lt||(Lt={}))});var Ef=a(()=>{});var xf=a(()=>{});var Cf=a(()=>{});var wf=a(()=>{});var _f=a(()=>{});var Af=a(()=>{});var Rf=a(()=>{});var vf=a(()=>{});var Tf=a(()=>{});var If,bf=a(()=>{(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(If||(If={}))});var Pf=a(()=>{});var Of=a(()=>{});var Nf=a(()=>{});var Df=a(()=>{});var kf=a(()=>{});var $f=a(()=>{});var Ae=a(()=>{Om();Mm();Hm();Vm();qm();Bm();jm();Km();Jm();Ym();rf();of();af();cf();df();ff();hf();gf();yf();Sf();Ef();xf();Cf();wf();_f();Af();Rf();vf();Tf();bf();Pf();Of();Nf();Df();kf();$f()});var Uf=a(()=>{Ae()});var Lf=a(()=>{});var Ff=a(()=>{});function _b(e){return Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})}var H,Mf=a(()=>{H=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=_b(t.query)),t}}});var dt,Hf=a(()=>{dt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}});var Vf=a(()=>{});var qf=a(()=>{});var W=a(()=>{Pm();Uf();Lf();Ff();Mf();Hf();Vf();qf()});var Ab,Rb,ir,vn=a(()=>{W();Ab=e=>t=>async r=>{if(!H.isInstance(r.request))return t(r);let{request:o}=r,{handlerProtocol:n=""}=e.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!o.headers[":authority"])delete o.headers.host,o.headers[":authority"]=o.hostname+(o.port?":"+o.port:"");else if(!o.headers.host){let s=o.hostname;o.port!=null&&(s+=`:${o.port}`),o.headers.host=s}return t(r)},Rb={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ir=e=>({applyToStack:t=>{t.add(Ab(e),Rb)}})});var vb,Tb,ar,Bf=a(()=>{vb=()=>(e,t)=>async r=>{var o,n;try{let s=await e(r),{clientName:i,commandName:c,logger:d,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:p}=l,m=u??t.inputFilterSensitiveLog,f=p??t.outputFilterSensitiveLog,{$metadata:g,...S}=s.output;return(o=d==null?void 0:d.info)==null||o.call(d,{clientName:i,commandName:c,input:m(r.input),output:f(S),metadata:g}),s}catch(s){let{clientName:i,commandName:c,logger:d,dynamoDbDocumentClientOptions:l={}}=t,{overrideInputFilterSensitiveLog:u}=l,p=u??t.inputFilterSensitiveLog;throw(n=d==null?void 0:d.error)==null||n.call(d,{clientName:i,commandName:c,input:p(r.input),error:s,metadata:s.$metadata}),s}},Tb={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ar=e=>({applyToStack:t=>{t.add(vb(),Tb)}})});var Tn=a(()=>{Bf()});var Gf,Ib,bb,Pb,Ob,cr,In=a(()=>{W();Gf="X-Amzn-Trace-Id",Ib="AWS_LAMBDA_FUNCTION_NAME",bb="_X_AMZN_TRACE_ID",Pb=e=>t=>async r=>{let{request:o}=r;if(!H.isInstance(o)||e.runtime!=="node"||o.headers.hasOwnProperty(Gf))return t(r);let n=process.env[Ib],s=process.env[bb],i=c=>typeof c=="string"&&c.length>0;return i(n)&&i(s)&&(o.headers[Gf]=s),t({...r,request:o})},Ob={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},cr=e=>({applyToStack:t=>{t.add(Pb(e),Ob)}})});function dr(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var zf=a(()=>{});var Nb,bn,kc=a(()=>{Nb=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),bn=e=>Nb.test(e)||e.startsWith("[")&&e.endsWith("]")});var Db,Pn,$c=a(()=>{Db=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Pn=(e,t=!1)=>{if(!t)return Db.test(e);let r=e.split(".");for(let o of r)if(!Pn(o))return!1;return!0}});var Re,ui=a(()=>{Re={}});var Ft,Wf=a(()=>{Ft="endpoints"});function Ue(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Ue(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Ue).join(", ")})`:JSON.stringify(e,null,2)}var jf=a(()=>{});var On=a(()=>{Wf();jf()});var V,Kf=a(()=>{V=class extends Error{constructor(t){super(t),this.name="EndpointError"}}});var Jf=a(()=>{});var Yf=a(()=>{});var Xf=a(()=>{});var Qf=a(()=>{});var Zf=a(()=>{});var eh=a(()=>{});var Le=a(()=>{Kf();Jf();Yf();Xf();Qf();Zf();eh()});var th,rh=a(()=>{th=(e,t)=>e===t});var oh,nh=a(()=>{Le();oh=e=>{let t=e.split("."),r=[];for(let o of t){let n=o.indexOf("[");if(n!==-1){if(o.indexOf("]")!==o.length-1)throw new V(`Path: '${e}' does not end with ']'`);let s=o.slice(n+1,-1);if(Number.isNaN(parseInt(s)))throw new V(`Invalid array index: '${s}' in path: '${e}'`);n!==0&&r.push(o.slice(0,n)),r.push(s)}else r.push(o)}return r}});var pi,sh=a(()=>{Le();nh();pi=(e,t)=>oh(t).reduce((r,o)=>{if(typeof r!="object")throw new V(`Index '${o}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(o)]:r[o]},e)});var ih,ah=a(()=>{ih=e=>e!=null});var ch,dh=a(()=>{ch=e=>!e});var Uc,lh,uh=a(()=>{Ae();kc();Uc={[No.HTTP]:80,[No.HTTPS]:443},lh=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:m,port:f,protocol:g="",path:S="",query:y={}}=e,v=new URL(`${g}//${m}${f?`:${f}`:""}${S}`);return v.search=Object.entries(y).map(([_,te])=>`${_}=${te}`).join("&"),v}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:o,hostname:n,pathname:s,protocol:i,search:c}=t;if(c)return null;let d=i.slice(0,-1);if(!Object.values(No).includes(d))return null;let l=bn(n),u=r.includes(`${o}:${Uc[d]}`)||typeof e=="string"&&e.includes(`${o}:${Uc[d]}`),p=`${o}${u?`:${Uc[d]}`:""}`;return{scheme:d,authority:p,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}}});var ph,mh=a(()=>{ph=(e,t)=>e===t});var fh,hh=a(()=>{fh=(e,t,r,o)=>t>=r||e.length<r?null:o?e.substring(e.length-r,e.length-t):e.substring(t,r)});var gh,yh=a(()=>{gh=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var Lc=a(()=>{rh();sh();ah();$c();dh();uh();mh();hh();yh()});var Sh,Eh=a(()=>{Lc();Sh={booleanEquals:th,getAttr:pi,isSet:ih,isValidHostLabel:Pn,not:ch,parseURL:lh,stringEquals:ph,substring:fh,uriEncode:gh}});var mi,Fc=a(()=>{Lc();mi=(e,t)=>{let r=[],o={...t.endpointParams,...t.referenceRecord},n=0;for(;n<e.length;){let s=e.indexOf("{",n);if(s===-1){r.push(e.slice(n));break}r.push(e.slice(n,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),n=i+2);let c=e.substring(s+1,i);if(c.includes("#")){let[d,l]=c.split("#");r.push(pi(o[d],l))}else r.push(o[c]);n=i+1}return r.join("")}});var xh,Ch=a(()=>{xh=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e]});var lr,Nn=a(()=>{Le();Mc();Fc();Ch();lr=(e,t,r)=>{if(typeof e=="string")return mi(e,r);if(e.fn)return fi(e,r);if(e.ref)return xh(e,r);throw new V(`'${t}': ${String(e)} is not a string, function or reference.`)}});var fi,Mc=a(()=>{ui();Eh();Nn();fi=({fn:e,argv:t},r)=>{let o=t.map(s=>["boolean","number"].includes(typeof s)?s:lr(s,"arg",r)),n=e.split(".");return n[0]in Re&&n[1]!=null?Re[n[0]][n[1]](...o):Sh[e](...o)}});var wh,_h=a(()=>{On();Le();Mc();wh=({assign:e,...t},r)=>{var n,s;if(e&&e in r.referenceRecord)throw new V(`'${e}' is already defined in Reference Record.`);let o=fi(t,r);return(s=(n=r.logger)==null?void 0:n.debug)==null||s.call(n,`${Ft} evaluateCondition: ${Ue(t)} = ${Ue(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}}});var $o,hi=a(()=>{On();_h();$o=(e=[],t)=>{var o,n;let r={};for(let s of e){let{result:i,toAssign:c}=wh(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};c&&(r[c.name]=c.value,(n=(o=t.logger)==null?void 0:o.debug)==null||n.call(o,`${Ft} assign: ${c.name} := ${Ue(c.value)}`))}return{result:!0,referenceRecord:r}}});var Ah,Rh=a(()=>{Le();Nn();Ah=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:n.map(s=>{let i=lr(s,"Header value entry",t);if(typeof i!="string")throw new V(`Header '${o}' value '${i}' is not a string`);return i})}),{})});var Hc,vh=a(()=>{Le();Fc();Vc();Hc=(e,t)=>{if(Array.isArray(e))return e.map(r=>Hc(r,t));switch(typeof e){case"string":return mi(e,t);case"object":if(e===null)throw new V(`Unexpected endpoint property: ${e}`);return gi(e,t);case"boolean":return e;default:throw new V(`Unexpected endpoint property type: ${typeof e}`)}}});var gi,Vc=a(()=>{vh();gi=(e,t)=>Object.entries(e).reduce((r,[o,n])=>({...r,[o]:Hc(n,t)}),{})});var Th,Ih=a(()=>{Le();Nn();Th=(e,t)=>{let r=lr(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(o){throw console.error(`Failed to construct URL with ${r}`,o),o}throw new V(`Endpoint URL must be a string, got ${typeof r}`)}});var bh,Ph=a(()=>{On();hi();Rh();Vc();Ih();bh=(e,t)=>{var u,p;let{conditions:r,endpoint:o}=e,{result:n,referenceRecord:s}=$o(r,t);if(!n)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:c,properties:d,headers:l}=o;return(p=(u=t.logger)==null?void 0:u.debug)==null||p.call(u,`${Ft} Resolving endpoint from template: ${Ue(o)}`),{...l!=null&&{headers:Ah(l,i)},...d!=null&&{properties:gi(d,i)},url:Th(c,i)}}});var Oh,Nh=a(()=>{Le();hi();Nn();Oh=(e,t)=>{let{conditions:r,error:o}=e,{result:n,referenceRecord:s}=$o(r,t);if(n)throw new V(lr(o,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))}});var Dh,kh=a(()=>{hi();qc();Dh=(e,t)=>{let{conditions:r,rules:o}=e,{result:n,referenceRecord:s}=$o(r,t);if(n)return yi(o,{...t,referenceRecord:{...t.referenceRecord,...s}})}});var yi,qc=a(()=>{Le();Ph();Nh();kh();yi=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let o=bh(r,t);if(o)return o}else if(r.type==="error")Oh(r,t);else if(r.type==="tree"){let o=Dh(r,t);if(o)return o}else throw new V(`Unknown endpoint rule: ${r}`);throw new V("Rules evaluation failed")}});var $h=a(()=>{ui();qc()});var Mt,Uh=a(()=>{On();Le();$h();Mt=(e,t)=>{var l,u,p,m,f;let{endpointParams:r,logger:o}=t,{parameters:n,rules:s}=e;(u=(l=t.logger)==null?void 0:l.debug)==null||u.call(l,`${Ft} Initial EndpointParams: ${Ue(r)}`);let i=Object.entries(n).filter(([,g])=>g.default!=null).map(([g,S])=>[g,S.default]);if(i.length>0)for(let[g,S]of i)r[g]=r[g]??S;let c=Object.entries(n).filter(([,g])=>g.required).map(([g])=>g);for(let g of c)if(r[g]==null)throw new V(`Missing required parameter: '${g}'`);let d=yi(s,{endpointParams:r,logger:o,referenceRecord:{}});if((p=t.endpointParams)!=null&&p.Endpoint)try{let g=new URL(t.endpointParams.Endpoint),{protocol:S,port:y}=g;d.url.protocol=S,d.url.port=y}catch{}return(f=(m=t.logger)==null?void 0:m.debug)==null||f.call(m,`${Ft} Resolved endpoint: ${Ue(d)}`),d}});var mt=a(()=>{kc();$c();ui();Uh();Le()});var Bc=a(()=>{mt()});var Gc,Lh=a(()=>{mt();Bc();Gc=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Gc(r))return!1;return!0}return!(!Pn(e)||e.length<3||e.length>63||e!==e.toLowerCase()||bn(e))}});var Fh,Mh=a(()=>{Fh=e=>{let t=e.split(":");if(t.length<6)return null;let[r,o,n,s,i,...c]=t;return r!=="arn"||o===""||n===""||c[0]===""?null:{partition:o,service:n,region:s,accountId:i,resourceId:c[0].includes("/")?c[0].split("/"):c}}});var Vh,Hh=a(()=>{Vh={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"}});var $b,Ub,qh,Bh,zc=a(()=>{Hh();$b=Vh,Ub="",qh=e=>{let{partitions:t}=$b;for(let o of t){let{regions:n,outputs:s}=o;for(let[i,c]of Object.entries(n))if(i===e)return{...s,...c}}for(let o of t){let{regionRegex:n,outputs:s}=o;if(new RegExp(n).test(e))return{...s}}let r=t.find(o=>o.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Bh=()=>Ub});var Ht,Gh=a(()=>{mt();Lh();Mh();zc();Ht={isVirtualHostableS3Bucket:Gc,parseArn:Fh,partition:qh};Re.aws=Ht});var zh=a(()=>{mt()});var Wh=a(()=>{mt()});var jh=a(()=>{});var Kh=a(()=>{});var Jh=a(()=>{});var Yh=a(()=>{});var Xh=a(()=>{});var Qh=a(()=>{Wh();jh();Kh();Jh();Yh();Xh()});var Uo=a(()=>{Gh();zc();Bc();zh();Qh()});var Wc,Si,jc,Ei,Zh,eg,Kc,tg=a(()=>{Wc="user-agent",Si="x-amz-user-agent",jc=" ",Ei="/",Zh=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,eg=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Kc="-"});var Lb,Jc,Fb,ur,rg=a(()=>{Uo();W();tg();Lb=e=>(t,r)=>async o=>{var m,f;let{request:n}=o;if(!H.isInstance(n))return t(o);let{headers:s}=n,i=((m=r==null?void 0:r.userAgent)==null?void 0:m.map(Jc))||[],c=(await e.defaultUserAgentProvider()).map(Jc),d=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(Jc))||[],l=Bh(),u=(l?[l]:[]).concat([...c,...i,...d]).join(jc),p=[...c.filter(g=>g.startsWith("aws-sdk-")),...d].join(jc);return e.runtime!=="browser"?(p&&(s[Si]=s[Si]?`${s[Wc]} ${p}`:p),s[Wc]=u):s[Si]=u,t({...o,request:n})},Jc=e=>{var i;let t=e[0].split(Ei).map(c=>c.replace(Zh,Kc)).join(Ei),r=(i=e[1])==null?void 0:i.replace(eg,Kc),o=t.indexOf(Ei),n=t.substring(0,o),s=t.substring(o+1);return n==="api"&&(s=s.toLowerCase()),[n,s,r].filter(c=>c&&c.length>0).reduce((c,d,l)=>{switch(l){case 0:return d;case 1:return`${c}/${d}`;default:return`${c}#${d}`}},"")},Fb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},ur=e=>({applyToStack:t=>{t.add(Lb(e),Fb)}})});var Dn=a(()=>{zf();rg()});var Lo,og=a(()=>{Lo=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}}});var ng=a(()=>{});var pr,sg=a(()=>{(function(e){e.ENV="env",e.CONFIG="shared config entry"})(pr||(pr={}))});var Yc=a(()=>{og();ng();sg()});var Mb,Hb,mr,ig=a(()=>{Yc();Mb="AWS_USE_DUALSTACK_ENDPOINT",Hb="use_dualstack_endpoint",mr={environmentVariableSelector:e=>Lo(e,Mb,pr.ENV),configFileSelector:e=>Lo(e,Hb,pr.CONFIG),default:!1}});var Vb,qb,fr,ag=a(()=>{Yc();Vb="AWS_USE_FIPS_ENDPOINT",qb="use_fips_endpoint",fr={environmentVariableSelector:e=>Lo(e,Vb,pr.ENV),configFileSelector:e=>Lo(e,qb,pr.CONFIG),default:!1}});var Ee,cg=a(()=>{Ae();Ee=e=>e[ko]||(e[ko]={})});var J,dg=a(()=>{J=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});var ve=a(()=>{cg();dg()});var lg=a(()=>{ve()});var ug=a(()=>{});var pg=a(()=>{ve();ug()});var mg=a(()=>{ig();ag();lg();pg()});var Bb,Gb,ft,hr,fg=a(()=>{Bb="AWS_REGION",Gb="region",ft={environmentVariableSelector:e=>e[Bb],configFileSelector:e=>e[Gb],default:()=>{throw new Error("Region is missing")}},hr={preferredFile:"credentials"}});var xi,Xc=a(()=>{xi=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"))});var Qc,hg=a(()=>{Xc();Qc=e=>xi(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e});var gr,gg=a(()=>{hg();Xc();gr=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Qc(t);let o=await t();return Qc(o)},useFipsEndpoint:async()=>{let o=typeof t=="string"?t:await t();return xi(o)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}}});var yg=a(()=>{fg();gg()});var Sg=a(()=>{});var Eg=a(()=>{});var xg=a(()=>{});var Cg=a(()=>{});var wg=a(()=>{});var _g=a(()=>{});var Ag=a(()=>{xg();Cg();wg();_g()});var Rg=a(()=>{Sg();Eg();Ag()});var ht=a(()=>{mg();yg();Rg()});function zb(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Zc,Ci=a(()=>{Ae();ve();Zc=(e,t)=>(r,o)=>async n=>{var l;let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,o,n.input)),i=zb(e.httpAuthSchemes),c=Ee(o),d=[];for(let u of s){let p=i.get(u.schemeId);if(!p){d.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}let m=p.identityProvider(await t.identityProviderConfigProvider(e));if(!m){d.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:f={},signingProperties:g={}}=((l=u.propertiesExtractor)==null?void 0:l.call(u,e,o))||{};u.identityProperties=Object.assign(u.identityProperties||{},f),u.signingProperties=Object.assign(u.signingProperties||{},g),c.selectedHttpAuthScheme={httpAuthOption:u,identity:await m(u.identityProperties),signer:p.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(n)}});var vg,Wb,jb,Kb,Jb,Yb,Tg=a(()=>{vg=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Yb(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Jb(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Wb=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,jb=/(\d+\.){3}\d+/,Kb=/\.\./,Jb=e=>Wb.test(e)&&!jb.test(e)&&!Kb.test(e),Yb=e=>{let[t,r,o,,,n]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&o&&n);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i}});var Ig=a(()=>{Tg()});var bg,Pg=a(()=>{bg=(e,t,r)=>{let o=async()=>{let n=r[e]??r[t];return typeof n=="function"?n():n};return e==="credentialScope"||t==="CredentialScope"?async()=>{let n=typeof r.credentials=="function"?await r.credentials():r.credentials;return(n==null?void 0:n.credentialScope)??(n==null?void 0:n.CredentialScope)}:e==="endpoint"||t==="endpoint"?async()=>{let n=await o();if(n&&typeof n=="object"){if("url"in n)return n.url.href;if("hostname"in n){let{protocol:s,hostname:i,port:c,path:d}=n;return`${s}//${i}${c?":"+c:""}${d}`}}return n}:o}});var Fe,kn=a(()=>{Fe=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}});var C,Og=a(()=>{kn();C=class e extends Fe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}}});var xe,Ng=a(()=>{kn();xe=class e extends Fe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}}});var ao,Dg=a(()=>{kn();ao=(...e)=>async()=>{if(e.length===0)throw new Fe("No providers in chain");let t;for(let r of e)try{return await r()}catch(o){if(t=o,o!=null&&o.tryNextLink)continue;throw o}throw t}});var kg,$g=a(()=>{kg=e=>()=>Promise.resolve(e)});var co,Ug=a(()=>{co=(e,t,r)=>{let o,n,s,i=!1,c=async()=>{n||(n=e());try{o=await n,s=!0,i=!1}finally{n=void 0}return o};return t===void 0?async d=>((!s||d!=null&&d.forceRefresh)&&(o=await c()),o):async d=>((!s||d!=null&&d.forceRefresh)&&(o=await c()),i?o:r&&!r(o)?(i=!0,o):(t(o)&&await c(),o))}});var F=a(()=>{Og();kn();Ng();Dg();$g();Ug()});var Lg,Fg=a(()=>{F();Lg=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new C(t.message||`Cannot load config from environment variables with getter: ${e}`)}}});var Mg,Hg,ed,Xb,Fo,$n=a(()=>{Mg=require("os"),Hg=require("path"),ed={},Xb=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Fo=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:o=`C:${Hg.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${o}${r}`;let n=Xb();return ed[n]||(ed[n]=(0,Mg.homedir)()),ed[n]}});var td,Qb,Me,Vg=a(()=>{td="AWS_PROFILE",Qb="default",Me=e=>e.profile||process.env[td]||Qb});var qg,Bg,wi,rd=a(()=>{qg=require("crypto"),Bg=require("path");$n();wi=e=>{let r=(0,qg.createHash)("sha1").update(e).digest("hex");return(0,Bg.join)(Fo(),".aws","sso","cache",`${r}.json`)}});var Gg,Zb,_i,zg=a(()=>{Gg=require("fs");rd();({readFile:Zb}=Gg.promises),_i=async e=>{let t=wi(e),r=await Zb(t,"utf8");return JSON.parse(r)}});var Wg,jg=a(()=>{Ae();Mo();Wg=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(He);return r===-1?!1:Object.values(Lt).includes(t.substring(0,r))}).reduce((t,[r,o])=>{let n=r.indexOf(He),s=r.substring(0,n)===Lt.PROFILE?r.substring(n+1):r;return t[s]=o,t},{...e.default&&{default:e.default}})});var Kg,e0,Ai,od=a(()=>{Kg=require("path");$n();e0="AWS_CONFIG_FILE",Ai=()=>process.env[e0]||(0,Kg.join)(Fo(),".aws","config")});var Jg,t0,Yg,Xg=a(()=>{Jg=require("path");$n();t0="AWS_SHARED_CREDENTIALS_FILE",Yg=()=>process.env[t0]||(0,Jg.join)(Fo(),".aws","credentials")});var r0,o0,Un,nd=a(()=>{Ae();Mo();r0=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,o0=["__proto__","profile __proto__"],Un=e=>{let t={},r,o;for(let n of e.split(/\r?\n/)){let s=n.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,o=void 0;let c=s.substring(1,s.length-1),d=r0.exec(c);if(d){let[,l,,u]=d;Object.values(Lt).includes(l)&&(r=[l,u].join(He))}else r=c;if(o0.includes(c))throw new Error(`Found invalid profile name "${c}"`)}else if(r){let c=s.indexOf("=");if(![0,-1].includes(c)){let[d,l]=[s.substring(0,c).trim(),s.substring(c+1).trim()];if(l==="")o=d;else{o&&n.trimStart()===n&&(o=void 0),t[r]=t[r]||{};let u=o?[o,d].join(He):d;t[r][u]=l}}}}return t}});var Qg,n0,sd,Ln,id=a(()=>{Qg=require("fs"),{readFile:n0}=Qg.promises,sd={},Ln=(e,t)=>((!sd[e]||t!=null&&t.ignoreCache)&&(sd[e]=n0(e,"utf8")),sd[e])});var Zg,He,Ri,Mo=a(()=>{jg();od();Xg();nd();id();Zg=()=>({}),He=".",Ri=async(e={})=>{let{filepath:t=Yg(),configFilepath:r=Ai()}=e,o=await Promise.all([Ln(r,{ignoreCache:e.ignoreCache}).then(Un).then(Wg).catch(Zg),Ln(t,{ignoreCache:e.ignoreCache}).then(Un).catch(Zg)]);return{configFile:o[0],credentialsFile:o[1]}}});var ey,ty=a(()=>{Ae();Mo();ey=e=>Object.entries(e).filter(([t])=>t.startsWith(Lt.SSO_SESSION+He)).reduce((t,[r,o])=>({...t,[r.substring(r.indexOf(He)+1)]:o}),{})});var s0,vi,ry=a(()=>{od();ty();nd();id();s0=()=>({}),vi=async(e={})=>Ln(e.configFilepath??Ai()).then(Un).then(ey).catch(s0)});var oy,ny=a(()=>{oy=(...e)=>{let t={};for(let r of e)for(let[o,n]of Object.entries(r))t[o]!==void 0?Object.assign(t[o],n):t[o]=n;return t}});var yr,sy=a(()=>{Mo();ny();yr=async e=>{let t=await Ri(e);return oy(t.configFile,t.credentialsFile)}});var iy=a(()=>{});var lt=a(()=>{$n();Vg();rd();zg();Mo();ry();sy();iy()});var ay,cy=a(()=>{F();lt();ay=(e,{preferredFile:t="config",...r}={})=>async()=>{let o=Me(r),{configFile:n,credentialsFile:s}=await Ri(r),i=s[o]||{},c=n[o]||{},d=t==="config"?{...i,...c}:{...c,...i};try{let u=e(d,t==="config"?n:s);if(u===void 0)throw new Error;return u}catch(l){throw new C(l.message||`Cannot load config for profile ${o} in SDK configuration files with getter: ${e}`)}}});var i0,dy,ly=a(()=>{F();i0=e=>typeof e=="function",dy=e=>i0(e)?async()=>await e():kg(e)});var O,uy=a(()=>{F();Fg();cy();ly();O=({environmentVariableSelector:e,configFileSelector:t,default:r},o={})=>co(ao(Lg(e),ay(t,o),dy(r)))});var gt=a(()=>{uy()});var py,my,fy,hy=a(()=>{lt();py="AWS_ENDPOINT_URL",my="endpoint_url",fy=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),o=t[[py,...r].join("_")];if(o)return o;let n=t[py];if(n)return n},configFileSelector:(t,r)=>{if(r&&t.services){let n=r[["services",t.services].join(He)];if(n){let s=e.split(" ").map(c=>c.toLowerCase()),i=n[[s.join("_"),my].join(He)];if(i)return i}}let o=t[my];if(o)return o},default:void 0})});var gy,yy=a(()=>{gt();hy();gy=async e=>O(fy(e))()});function Sy(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[o,n=null]=r.split("=");o=decodeURIComponent(o),n&&(n=decodeURIComponent(n)),o in t?Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]:t[o]=n}return t}var Ey=a(()=>{});var Ce,lo=a(()=>{Ey();Ce=e=>{if(typeof e=="string")return Ce(new URL(e));let{hostname:t,pathname:r,port:o,protocol:n,search:s}=e,i;return s&&(i=Sy(s)),{hostname:t,port:o?parseInt(o):void 0,protocol:n,path:r,query:i}}});var Ti,Ii=a(()=>{lo();Ti=e=>typeof e=="object"?"url"in e?Ce(e.url):e:Ce(e)});var xy,a0,ad=a(()=>{Ig();Pg();yy();Ii();xy=async(e,t,r,o)=>{if(!r.endpoint){let i=await gy(r.serviceId||"");i&&(r.endpoint=()=>Promise.resolve(Ti(i)))}let n=await a0(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,o)},a0=async(e,t,r)=>{var s;let o={},n=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,c]of Object.entries(n))switch(c.type){case"staticContextParams":o[i]=c.value;break;case"contextParams":o[i]=e[c.name];break;case"clientContextParams":case"builtInParams":o[i]=await bg(c.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(c))}return Object.keys(n).length===0&&Object.assign(o,r),String(r.serviceId).toLowerCase()==="s3"&&await vg(o),o}});var Cy=a(()=>{ad();Ii()});var wy,cd=a(()=>{ve();ad();wy=({config:e,instructions:t})=>(r,o)=>async n=>{var c,d,l;let s=await xy(n.input,{getEndpointParameterInstructions(){return t}},{...e},o);o.endpointV2=s,o.authSchemes=(c=s.properties)==null?void 0:c.authSchemes;let i=(d=o.authSchemes)==null?void 0:d[0];if(i){o.signing_region=i.signingRegion,o.signing_service=i.signingName;let u=Ee(o),p=(l=u==null?void 0:u.selectedHttpAuthScheme)==null?void 0:l.httpAuthOption;p&&(p.signingProperties=Object.assign(p.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...n})}});var _y,dd=a(()=>{_y=(e,t)=>r=>async o=>{let{response:n}=await r(o);try{let s=await t(n,e);return{response:n,output:s}}catch(s){if(Object.defineProperty(s,"$response",{value:n}),!("$metadata"in s)){let i="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";s.message+=`
  `+i,typeof s.$responseBodyText<"u"&&s.$response&&(s.$response.body=s.$responseBodyText)}throw s}}});var Ay,ld=a(()=>{Ay=(e,t)=>(r,o)=>async n=>{var c;let s=(c=o.endpointV2)!=null&&c.url&&e.urlParser?async()=>e.urlParser(o.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(n.input,{...e,endpoint:s});return r({...n,request:i})}});function A(e,t,r){return{applyToStack:o=>{o.add(_y(e,r),c0),o.add(Ay(e,t),Fn)}}}var c0,Fn,Ry=a(()=>{dd();ld();c0={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Fn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var M=a(()=>{dd();Ry();ld()});var ud,R,vy=a(()=>{M();cd();ud={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Fn.name},R=(e,t)=>({applyToStack:r=>{r.addRelativeTo(wy({config:e,instructions:t}),ud)}})});var Sr,Ty=a(()=>{ve();Ii();Sr=e=>{let t=e.tls??!0,{endpoint:r}=e,o=r!=null?async()=>Ti(await J(r)()):void 0;return{...e,endpoint:o,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:J(e.useDualstackEndpoint??!1),useFipsEndpoint:J(e.useFipsEndpoint??!1)}}});var Iy=a(()=>{});var U=a(()=>{Cy();cd();vy();Ty();Iy()});var d0,Er,by=a(()=>{U();Ci();d0={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:ud.name},Er=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:o=>{o.addRelativeTo(Zc(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),d0)}})});var wV,Py=a(()=>{M();Ci();wV={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Fn.name}});var Oy=a(()=>{Ci();by();Py()});var l0,u0,Ny,pd=a(()=>{W();Ae();ve();l0=e=>t=>{throw t},u0=(e,t)=>{},Ny=e=>(t,r)=>async o=>{if(!H.isInstance(o.request))return t(o);let s=Ee(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:c,signer:d}=s,l=await t({...o,request:await d.sign(o.request,c,i)}).catch((d.errorHandler||l0)(i));return(d.successHandler||u0)(l.response,i),l}});var ut,uo,yt,bi=a(()=>{(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ut||(ut={}));uo=3,yt=ut.STANDARD});var Dy,ky,$y,Uy,Ly=a(()=>{Dy=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ky=["TimeoutError","RequestTimeout","RequestTimeoutException"],$y=[500,502,503,504],Uy=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"]});var p0,Ho,Pi,Fy,Mn=a(()=>{Ly();p0=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},Ho=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Dy.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Pi=e=>{var t;return p0(e)||ky.includes(e.name)||Uy.includes((e==null?void 0:e.code)||"")||$y.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Fy=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Pi(e)}return!1}});var Hn,md=a(()=>{Mn();Hn=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(o=>setTimeout(o,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Ho(t)){let n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let o=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(o)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let o=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(o*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}});var Oi,Ni,Vo=a(()=>{Oi="amz-sdk-invocation-id",Ni="amz-sdk-request"});var My,Hy=a(()=>{Vo();My=()=>{let e=100;return{computeNextBackoffDelay:o=>Math.floor(Math.min(2e4,Math.random()*2**o*e)),setDelayBase:o=>{e=o}}}});var fd,Vy=a(()=>{Vo();fd=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r})});var po,ki=a(()=>{bi();Vo();Hy();Vy();po=class{constructor(t){this.maxAttempts=t,this.mode=ut.STANDARD,this.capacity=500,this.retryBackoffStrategy=My(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return fd({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let o=await this.getMaxAttempts();if(this.shouldRetry(t,r,o)){let n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,c=this.getCapacityCost(n);return this.capacity-=c,fd({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:c})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${uo}`),uo}}shouldRetry(t,r,o){return t.getRetryCount()+1<o&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}});var $i,Wy=a(()=>{bi();md();ki();$i=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=ut.ADAPTIVE;let{rateLimiter:o}=r??{};this.rateLimiter=o??new Hn,this.standardRetryStrategy=new po(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}});var jy=a(()=>{Vo();ki()});var Ky=a(()=>{});var Ve=a(()=>{Wy();jy();md();ki();bi();Vo();Ky()});function gd(){return Ui>Li.length-16&&(Jy.default.randomFillSync(Li),Ui=0),Li.slice(Ui,Ui+=16)}var Jy,Li,Ui,Yy=a(()=>{Jy=at(require("crypto")),Li=new Uint8Array(256),Ui=Li.length});function Xy(e,t=0){return oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]}var oe,Qy=a(()=>{oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1))});var Zy,yd,eS=a(()=>{Zy=at(require("crypto")),yd={randomUUID:Zy.default.randomUUID}});function m0(e,t,r){if(yd.randomUUID&&!t&&!e)return yd.randomUUID();e=e||{};let o=e.random||(e.rng||gd)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Xy(o)}var Sd,tS=a(()=>{eS();Yy();Qy();Sd=m0});var rS=a(()=>{tS()});var oS=a(()=>{Ve()});var Ed=a(()=>{Ve()});var xd=a(()=>{Mn()});var Cd,wd=a(()=>{Cd=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`)});var _d=a(()=>{W();Mn();Ve();oS();Ed();xd();wd()});var nS=a(()=>{Ve();_d()});var sS,iS,xr,Cr,f0,h0,wr,aS=a(()=>{ve();Ve();sS="AWS_MAX_ATTEMPTS",iS="max_attempts",xr={environmentVariableSelector:e=>{let t=e[sS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${sS} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[iS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${iS} mast be a number, got "${t}"`);return r},default:uo},Cr=e=>{let{retryStrategy:t}=e,r=J(e.maxAttempts??uo);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await J(e.retryMode)()===ut.ADAPTIVE?new $i(r):new po(r))}},f0="AWS_RETRY_MODE",h0="retry_mode",wr={environmentVariableSelector:e=>e[f0],configFileSelector:e=>e[h0],default:yt}});var cS=a(()=>{W();Ve()});var qe,dS=a(()=>{qe=class{trace(){}debug(){}info(){}warn(){}error(){}}});var mo,_r,Bo,lS,uS,pS=a(()=>{mo=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let o of t)r.push(o);return r},_r=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Bo=()=>{let e=[],t=[],r=!1,o=new Set,n=p=>p.sort((m,f)=>lS[f.step]-lS[m.step]||uS[f.priority||"normal"]-uS[m.priority||"normal"]),s=p=>{let m=!1,f=g=>{let S=mo(g.name,g.aliases);if(S.includes(p)){m=!0;for(let y of S)o.delete(y);return!1}return!0};return e=e.filter(f),t=t.filter(f),m},i=p=>{let m=!1,f=g=>{if(g.middleware===p){m=!0;for(let S of mo(g.name,g.aliases))o.delete(S);return!1}return!0};return e=e.filter(f),t=t.filter(f),m},c=p=>{var m;return e.forEach(f=>{p.add(f.middleware,{...f})}),t.forEach(f=>{p.addRelativeTo(f.middleware,{...f})}),(m=p.identifyOnResolve)==null||m.call(p,u.identifyOnResolve()),p},d=p=>{let m=[];return p.before.forEach(f=>{f.before.length===0&&f.after.length===0?m.push(f):m.push(...d(f))}),m.push(p),p.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?m.push(f):m.push(...d(f))}),m},l=(p=!1)=>{let m=[],f=[],g={};return e.forEach(y=>{let v={...y,before:[],after:[]};for(let _ of mo(v.name,v.aliases))g[_]=v;m.push(v)}),t.forEach(y=>{let v={...y,before:[],after:[]};for(let _ of mo(v.name,v.aliases))g[_]=v;f.push(v)}),f.forEach(y=>{if(y.toMiddleware){let v=g[y.toMiddleware];if(v===void 0){if(p)return;throw new Error(`${y.toMiddleware} is not found when adding ${_r(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&v.after.push(y),y.relation==="before"&&v.before.push(y)}}),n(m).map(d).reduce((y,v)=>(y.push(...v),y),[])},u={add:(p,m={})=>{let{name:f,override:g,aliases:S}=m,y={step:"initialize",priority:"normal",middleware:p,...m},v=mo(f,S);if(v.length>0){if(v.some(_=>o.has(_))){if(!g)throw new Error(`Duplicate middleware name '${_r(f,S)}'`);for(let _ of v){let te=e.findIndex(Cn=>{var wn;return Cn.name===_||((wn=Cn.aliases)==null?void 0:wn.some(ac=>ac===_))});if(te===-1)continue;let j=e[te];if(j.step!==y.step||y.priority!==j.priority)throw new Error(`"${_r(j.name,j.aliases)}" middleware with ${j.priority} priority in ${j.step} step cannot be overridden by "${_r(f,S)}" middleware with ${y.priority} priority in ${y.step} step.`);e.splice(te,1)}}for(let _ of v)o.add(_)}e.push(y)},addRelativeTo:(p,m)=>{let{name:f,override:g,aliases:S}=m,y={middleware:p,...m},v=mo(f,S);if(v.length>0){if(v.some(_=>o.has(_))){if(!g)throw new Error(`Duplicate middleware name '${_r(f,S)}'`);for(let _ of v){let te=t.findIndex(Cn=>{var wn;return Cn.name===_||((wn=Cn.aliases)==null?void 0:wn.some(ac=>ac===_))});if(te===-1)continue;let j=t[te];if(j.toMiddleware!==y.toMiddleware||j.relation!==y.relation)throw new Error(`"${_r(j.name,j.aliases)}" middleware ${j.relation} "${j.toMiddleware}" middleware cannot be overridden by "${_r(f,S)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);t.splice(te,1)}}for(let _ of v)o.add(_)}t.push(y)},clone:()=>c(Bo()),use:p=>{p.applyToStack(u)},remove:p=>typeof p=="string"?s(p):i(p),removeByTag:p=>{let m=!1,f=g=>{let{tags:S,name:y,aliases:v}=g;if(S&&S.includes(p)){let _=mo(y,v);for(let te of _)o.delete(te);return m=!0,!1}return!0};return e=e.filter(f),t=t.filter(f),m},concat:p=>{var f;let m=c(Bo());return m.use(p),m.identifyOnResolve(r||m.identifyOnResolve()||(((f=p.identifyOnResolve)==null?void 0:f.call(p))??!1)),m},applyToStack:c,identify:()=>l(!0).map(p=>{let m=p.step??p.relation+" "+p.toMiddleware;return _r(p.name,p.aliases)+" - "+m}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,m)=>{for(let f of l().map(g=>g.middleware).reverse())p=f(p,m);return r&&console.log(u.identify()),p}};return u},lS={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},uS={high:3,normal:2,low:1}});var Ad=a(()=>{pS()});var Be,mS=a(()=>{Ad();Be=class{constructor(t){this.middlewareStack=Bo(),this.config=t}send(t,r,o){let n=typeof r!="function"?r:void 0,s=typeof r=="function"?r:o,i=t.resolveMiddleware(this.middlewareStack,this.config,n);if(s)i(t).then(c=>s(null,c.output),c=>s(c)).catch(()=>{});else return i(t).then(c=>c.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}});var Fi,Rd=a(()=>{Fi=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]"});var Mi,Vt,Go,fo=a(()=>{Rd();Mi=require("buffer"),Vt=(e,t=0,r=e.byteLength-t)=>{if(!Fi(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Mi.Buffer.from(e,t,r)},Go=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Mi.Buffer.from(e,t):Mi.Buffer.from(e)}});var g0,Ge,fS=a(()=>{fo();g0=/^[A-Za-z0-9+/]*={0,2}$/,Ge=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!g0.exec(e))throw new TypeError("Invalid base64 string.");let t=Go(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}});var ne,vd=a(()=>{fo();ne=e=>{let t=Go(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}});var St,hS=a(()=>{vd();St=e=>typeof e=="string"?ne(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)});var ze,gS=a(()=>{fo();ze=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Vt(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}});var Te=a(()=>{vd();hS();gS()});var We,yS=a(()=>{fo();Te();We=e=>{let t;if(typeof e=="string"?t=ne(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return Vt(t.buffer,t.byteOffset,t.byteLength).toString("base64")}});var Ar=a(()=>{fS();yS()});function SS(e,t="utf-8"){return t==="base64"?We(e):ze(e)}function ES(e,t){return t==="base64"?qt.mutate(Ge(e)):qt.mutate(ne(e))}var xS=a(()=>{Ar();Te();Td()});var qt,Td=a(()=>{xS();qt=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ES(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return SS(this,t)}}});var CS=a(()=>{});var je,y0,Id=a(()=>{je=e=>encodeURIComponent(e).replace(/[!'()*]/g,y0),y0=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`});var wS=a(()=>{Id()});var Hi=a(()=>{Id();wS()});function Vi(e){let t=[];for(let r of Object.keys(e).sort()){let o=e[r];if(r=je(r),Array.isArray(o))for(let n=0,s=o.length;n<s;n++)t.push(`${r}=${je(o[n])}`);else{let n=r;(o||typeof o=="string")&&(n+=`=${je(o)}`),t.push(n)}}return t.join("&")}var qi=a(()=>{Hi()});var _S,AS=a(()=>{_S=["ECONNRESET","EPIPE","ETIMEDOUT"]});var bd,Pd=a(()=>{bd=e=>{let t={};for(let r of Object.keys(e)){let o=e[r];t[r]=Array.isArray(o)?o.join(","):o}return t}});var RS,vS=a(()=>{RS=(e,t,r=0)=>{if(!r)return;let o=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",n=>{n.connecting?n.on("connect",()=>{clearTimeout(o)}):clearTimeout(o)})}});var TS,IS=a(()=>{TS=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",o=>{o.setKeepAlive(t,r||0)})}});var bS,PS=a(()=>{bS=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})}});async function Od(e,t,r=OS){let o=t.headers??{},n=o.Expect||o.expect,s=-1,i=!1;n==="100-continue"&&await Promise.race([new Promise(c=>{s=Number(setTimeout(c,Math.max(OS,r)))}),new Promise(c=>{e.on("continue",()=>{clearTimeout(s),c()}),e.on("error",()=>{i=!0,clearTimeout(s),c()})})]),i||S0(e,t.body)}function S0(e,t){if(t instanceof NS.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var NS,OS,Nd=a(()=>{NS=require("stream"),OS=1e3});var Vn,qn,Ke,DS=a(()=>{W();qi();Vn=require("http"),qn=require("https");AS();Pd();vS();IS();PS();Nd();Ke=class e{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new e(t)}static checkSocketUsage(t,r){var c,d;let{sockets:o,requests:n,maxSockets:s}=t;if(typeof s!="number"||s===1/0)return r;let i=15e3;if(Date.now()-i<r)return r;if(o&&n)for(let l in o){let u=((c=o[l])==null?void 0:c.length)??0,p=((d=n[l])==null?void 0:d.length)??0;if(u>=s&&p>=2*s)return console.warn("@smithy/node-http-handler:WARN",`socket usage at capacity=${u} and ${p} additional requests are enqueued.`,"See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html","or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config."),Date.now()}return r}constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,o)=>{typeof t=="function"?t().then(n=>{r(this.resolveDefaultConfig(n))}).catch(o):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:o,socketTimeout:n,httpAgent:s,httpsAgent:i}=t||{},c=!0,d=50;return{connectionTimeout:o,requestTimeout:r??n,httpAgent:(()=>s instanceof Vn.Agent||typeof(s==null?void 0:s.destroy)=="function"?s:new Vn.Agent({keepAlive:c,maxSockets:d,...s}))(),httpsAgent:(()=>i instanceof qn.Agent||typeof(i==null?void 0:i.destroy)=="function"?i:new qn.Agent({keepAlive:c,maxSockets:d,...i}))()}}destroy(){var t,r,o,n;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(n=(o=this.config)==null?void 0:o.httpsAgent)==null||n.destroy()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let o;return new Promise((n,s)=>{let i,c=async _=>{await i,clearTimeout(o),n(_)},d=async _=>{await i,s(_)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let _=new Error("Request aborted");_.name="AbortError",d(_);return}let l=t.protocol==="https:",u=l?this.config.httpsAgent:this.config.httpAgent;o=setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(u,this.socketWarningTimestamp)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3));let p=Vi(t.query||{}),m;if(t.username!=null||t.password!=null){let _=t.username??"",te=t.password??"";m=`${_}:${te}`}let f=t.path;p&&(f+=`?${p}`),t.fragment&&(f+=`#${t.fragment}`);let g={headers:t.headers,host:t.hostname,method:t.method,path:f,port:t.port,agent:u,auth:m},y=(l?qn.request:Vn.request)(g,_=>{let te=new dt({statusCode:_.statusCode||-1,reason:_.statusMessage,headers:bd(_.headers),body:_});c({response:te})});y.on("error",_=>{_S.includes(_.code)?d(Object.assign(_,{name:"TimeoutError"})):d(_)}),RS(y,d,this.config.connectionTimeout),bS(y,d,this.config.requestTimeout),r&&(r.onabort=()=>{y.abort();let _=new Error("Request aborted");_.name="AbortError",d(_)});let v=g.agent;typeof v=="object"&&"keepAlive"in v&&TS(y,{keepAlive:v.keepAlive,keepAliveMsecs:v.keepAliveMsecs}),i=Od(y,t,this.config.requestTimeout).catch(s)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(o=>({...o,[t]:r}))}httpHandlerConfigs(){return this.config??{}}}});var Dd,kS=a(()=>{Dd=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}}});var $S=a(()=>{kS()});var US=a(()=>{W();qi();Pd();$S();Nd()});var LS,Bi,FS=a(()=>{LS=require("stream"),Bi=class extends LS.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,o){this.bufferedBytes.push(t),o()}}});async function x0(e){let t=[],r=e.getReader(),o=!1,n=0;for(;!o;){let{done:c,value:d}=await r.read();d&&(t.push(d),n+=d.length),o=c}let s=new Uint8Array(n),i=0;for(let c of t)s.set(c,i),i+=c.length;return s}var Et,E0,MS=a(()=>{FS();Et=e=>E0(e)?x0(e):new Promise((t,r)=>{let o=new Bi;e.pipe(o),e.on("error",n=>{o.end(),r(n)}),o.on("error",r),o.on("finish",function(){let n=new Uint8Array(Buffer.concat(this.bufferedBytes));t(n)})}),E0=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream});var ho=a(()=>{DS();US();MS()});var HS=a(()=>{});var C2,VS=a(()=>{W();qi();HS();C2={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")}});async function C0(e){let t=await _0(e),r=Ge(t);return new Uint8Array(r)}async function w0(e){let t=[],r=e.getReader(),o=!1,n=0;for(;!o;){let{done:c,value:d}=await r.read();d&&(t.push(d),n+=d.length),o=c}let s=new Uint8Array(n),i=0;for(let c of t)s.set(c,i),i+=c.length;return s}function _0(e){return new Promise((t,r)=>{let o=new FileReader;o.onloadend=()=>{if(o.readyState!==2)return r(new Error("Reader aborted too early"));let n=o.result??"",s=n.indexOf(","),i=s>-1?s+1:n.length;t(n.substring(i))},o.onabort=()=>r(new Error("Read aborted")),o.onerror=()=>r(o.error),o.readAsDataURL(e)})}var qS,BS=a(()=>{Ar();qS=e=>typeof Blob=="function"&&e instanceof Blob?C0(e):w0(e)});var GS=a(()=>{VS();BS()});function WS(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let o=e.slice(r,r+2).toLowerCase();if(o in kd)t[r/2]=kd[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t}function Ie(e){let t="";for(let r=0;r<e.byteLength;r++)t+=zS[e[r]];return t}var zS,kd,zo=a(()=>{zS={},kd={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),zS[e]=t,kd[t]=e}});var jS,YS,KS,JS,XS=a(()=>{GS();Ar();zo();Te();jS="The stream has already been transformed.",YS=e=>{var n,s;if(!KS(e)&&!JS(e)){let i=((s=(n=e==null?void 0:e.__proto__)==null?void 0:n.constructor)==null?void 0:s.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${i}`)}let t=!1,r=async()=>{if(t)throw new Error(jS);return t=!0,await qS(e)},o=i=>{if(typeof i.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return i.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async i=>{let c=await r();if(i==="base64")return We(c);if(i==="hex")return Ie(c);if(i===void 0||i==="utf8"||i==="utf-8")return ze(c);if(typeof TextDecoder=="function")return new TextDecoder(i).decode(c);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(jS);if(t=!0,KS(e))return o(e);if(JS(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},KS=e=>typeof Blob=="function"&&e instanceof Blob,JS=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream});var Gi,ZS,QS,eE,tE=a(()=>{ho();fo();Gi=require("stream"),ZS=require("util");XS();QS="The stream has already been transformed.",eE=e=>{var o,n;if(!(e instanceof Gi.Readable))try{return YS(e)}catch{let i=((n=(o=e==null?void 0:e.__proto__)==null?void 0:o.constructor)==null?void 0:n.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${i}`)}let t=!1,r=async()=>{if(t)throw new Error(QS);return t=!0,await Et(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let i=await r();return s===void 0||Buffer.isEncoding(s)?Vt(i.buffer,i.byteOffset,i.byteLength).toString(s):new ZS.TextDecoder(s).decode(i)},transformToWebStream:()=>{if(t)throw new Error(QS);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Gi.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,Gi.Readable.toWeb(e)}})}});var $d=a(()=>{Td();CS();tE()});var go,rE=a(()=>{$d();go=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return qt.mutate(e);if(!e)return qt.mutate(new Uint8Array);let r=t.streamCollector(e);return qt.mutate(await r)}});var w,Ud,oE=a(()=>{Ad();Ae();w=class{constructor(){this.middlewareStack=Bo()}static classBuilder(){return new Ud}resolveMiddlewareWithContext(t,r,o,{middlewareFn:n,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:d,smithyContext:l,additionalContext:u,CommandCtor:p}){for(let y of n.bind(this)(p,t,r,o))this.middlewareStack.use(y);let m=t.concat(this.middlewareStack),{logger:f}=r,g={logger:f,clientName:s,commandName:i,inputFilterSensitiveLog:c,outputFilterSensitiveLog:d,[ko]:{...l},...u},{requestHandler:S}=r;return m.resolve(y=>S.handle(y.request,o||{}),g)}},Ud=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,o={}){return this._smithyContext={service:t,operation:r,...o},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=o=>o,r=o=>o){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends w{static getEndpointParameterInstructions(){return t._ep}constructor(...[o]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=o??{},t._init(this)}resolveMiddleware(o,n,s){return this.resolveMiddlewareWithContext(o,n,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}});var N,nE=a(()=>{N="***SensitiveInformation***"});var Wo,sE=a(()=>{Wo=(e,t)=>{for(let r of Object.keys(e)){let o=e[r],n=async function(i,c,d){let l=new o(i);if(typeof c=="function")this.send(l,c);else if(typeof d=="function"){if(typeof c!="object")throw new Error(`Expected http options but got ${typeof c}`);this.send(l,c||{},d)}else return this.send(l,c)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=n}}});var Ld,be,A0,iE,ji,Bt,aE,cE,Fd,R0,B,Gt,h,dE,lE,v0,Bn,Gn,Md,uE,zi,Wi,Hd=a(()=>{Ld=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Wi.warn(zi(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Wi.warn(zi(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},be=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Wi.warn(zi(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},A0=Math.ceil(34028234663852886e22),iE=e=>{let t=be(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>A0)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ji=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Bt=e=>Fd(e,32),aE=e=>Fd(e,16),cE=e=>Fd(e,8),Fd=(e,t)=>{let r=ji(e);if(r!==void 0&&R0(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},R0=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},B=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Gt=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},h=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Wi.warn(zi(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},dE=e=>be(typeof e=="string"?Bn(e):e),lE=e=>iE(typeof e=="string"?Bn(e):e),v0=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Bn=e=>{let t=e.match(v0);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Gn=e=>Bt(typeof e=="string"?Bn(e):e),Md=e=>aE(typeof e=="string"?Bn(e):e),uE=e=>cE(typeof e=="string"?Bn(e):e),zi=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Wi={warn:console.warn}});var T0,I0,pE,b0,mE,Q2,Z2,eG,xt,fE,tG,P0,O0,N0,yo,D0,k0,Vd,hE=a(()=>{Hd();T0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],I0=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),pE=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=I0.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,o,n,s,i,c,d,l]=t,u=Md(Vd(o)),p=yo(n,"month",1,12),m=yo(s,"day",1,31);return fE(u,p,m,{hours:i,minutes:c,seconds:d,fractionalMilliseconds:l})},b0=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),mE=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=b0.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,o,n,s,i,c,d,l,u]=t,p=Md(Vd(o)),m=yo(n,"month",1,12),f=yo(s,"day",1,31),g=fE(p,m,f,{hours:i,minutes:c,seconds:d,fractionalMilliseconds:l});return u.toUpperCase()!="Z"&&g.setTime(g.getTime()-k0(u)),g},Q2=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Z2=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),eG=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),xt=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=dE(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},fE=(e,t,r,o)=>{let n=t-1;return O0(e,n,r),new Date(Date.UTC(e,n,r,yo(o.hours,"hour",0,23),yo(o.minutes,"minute",0,59),yo(o.seconds,"seconds",0,60),D0(o.fractionalMilliseconds)))},tG=50*365*24*60*60*1e3,P0=[31,28,31,30,31,30,31,31,30,31,30,31],O0=(e,t,r)=>{let o=P0[t];if(t===1&&N0(e)&&(o=29),r>o)throw new TypeError(`Invalid day for ${T0[t]} in ${e}: ${r}`)},N0=e=>e%4===0&&(e%100!==0||e%400===0),yo=(e,t,r,o)=>{let n=uE(Vd(e));if(n<r||n>o)throw new TypeError(`${t} must be between ${r} and ${o}, inclusive`);return n},D0=e=>e==null?0:lE("0."+e)*1e3,k0=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let o=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(o*60+n)*60*1e3},Vd=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Ct,b,qd=a(()=>{Ct=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},b=(e,t={})=>{Object.entries(t).filter(([,o])=>o!==void 0).forEach(([o,n])=>{(e[o]==null||e[o]==="")&&(e[o]=n)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e}});var $0,Rr,U0,gE=a(()=>{qd();$0=({output:e,parsedBody:t,exceptionCtor:r,errorCode:o})=>{let n=U0(e),s=n.httpStatusCode?n.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||o||s||"UnknownError",$fault:"client",$metadata:n});throw b(i,t)},Rr=e=>({output:t,parsedBody:r,errorCode:o})=>{$0({output:t,parsedBody:r,exceptionCtor:e,errorCode:o})},U0=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var vr,yE=a(()=>{vr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}}});var SE,Tr,EE=a(()=>{SE=!1,Tr=e=>{e&&!SE&&parseInt(e.substring(1,e.indexOf(".")))<16&&(SE=!0)}});var xE,CE,wE=a(()=>{Ae();xE=e=>{let t=[];for(let r in Do){let o=Do[r];e[o]!==void 0&&t.push({algorithmId:()=>o,checksumConstructor:()=>e[o]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},CE=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t}});var _E,AE,RE=a(()=>{_E=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},AE=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t}});var Ir,br,vE=a(()=>{wE();RE();Ir=e=>({...xE(e),..._E(e)}),br=e=>({...CE(e),...AE(e)})});var TE=a(()=>{vE()});function jo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Bd=a(()=>{});var IE=a(()=>{});var Gd,bE=a(()=>{Gd=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Gd(e[r]));return e}});var zd,PE=a(()=>{zd=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};zd.prototype=Object.create(String.prototype,{constructor:{value:zd,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(zd,String)});function P(e,t,r){let o,n,s;if(typeof t>"u"&&typeof r>"u")o={},s=e;else{if(o=e,typeof t=="function")return n=t,s=r,L0(o,n,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){o[i]=s[i];continue}OE(o,null,s,i)}return o}var T,L0,OE,F0,M0,NE=a(()=>{T=(e,t)=>{let r={};for(let o in t)OE(r,e,t,o);return r},L0=(e,t,r)=>P(e,Object.entries(r).reduce((o,[n,s])=>(Array.isArray(s)?o[n]=s:typeof s=="function"?o[n]=[t,s()]:o[n]=[t,s],o),{})),OE=(e,t,r,o)=>{if(t!==null){let i=r[o];typeof i=="function"&&(i=[,i]);let[c=F0,d=M0,l=o]=i;(typeof c=="function"&&c(t[l])||typeof c!="function"&&c)&&(e[o]=d(t[l]));return}let[n,s]=r[o];if(typeof s=="function"){let i,c=n===void 0&&(i=s())!=null,d=typeof n=="function"&&!!n(void 0)||typeof n!="function"&&!!n;c?e[o]=i:d&&(e[o]=s())}else{let i=n===void 0&&s!=null,c=typeof n=="function"&&!!n(s)||typeof n!="function"&&!!n;(i||c)&&(e[o]=s)}},F0=e=>e!=null,M0=e=>e});var DE,kE=a(()=>{Bd();DE=(e,t,r,o,n,s)=>{if(t!=null&&t[r]!==void 0){let i=o();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(n,s?i.split("/").map(c=>jo(c)).join("/"):jo(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});var $E=a(()=>{});var D,UE=a(()=>{D=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(D);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=D(e[r]));return t}return e}});var LE=a(()=>{});var E=a(()=>{dS();mS();rE();oE();nE();sE();hE();gE();yE();EE();TE();qd();Bd();IE();bE();PE();NE();Hd();kE();$E();UE();LE()});var FE,ME,HE=a(()=>{FE=require("stream"),ME=e=>(e==null?void 0:e.body)instanceof FE.Readable||typeof ReadableStream<"u"&&(e==null?void 0:e.body)instanceof ReadableStream});var H0,V0,q0,B0,Wd,Pr,G0,VE=a(()=>{W();Mn();E();Ve();rS();HE();wd();H0=e=>(t,r)=>async o=>{var i;let n=await e.retryStrategy(),s=await e.maxAttempts();if(V0(n)){n=n;let c=await n.acquireInitialRetryToken(r.partition_id),d=new Error,l=0,u=0,{request:p}=o,m=H.isInstance(p);for(m&&(p.headers[Oi]=Sd());;)try{m&&(p.headers[Ni]=`attempt=${l+1}; max=${s}`);let{response:f,output:g}=await t(o);return n.recordSuccess(c),g.$metadata.attempts=l+1,g.$metadata.totalRetryDelay=u,{response:f,output:g}}catch(f){let g=q0(f);if(d=Cd(f),m&&ME(p))throw(i=r.logger instanceof qe?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),d;try{c=await n.refreshRetryTokenForRetry(c,g)}catch{throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=l+1,d.$metadata.totalRetryDelay=u,d}l=c.getRetryCount();let S=c.getRetryDelay();u+=S,await new Promise(y=>setTimeout(y,S))}}else return n=n,n!=null&&n.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(t,o)},V0=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",q0=e=>{let t={error:e,errorType:B0(e)},r=G0(e.$response);return r&&(t.retryAfterHint=r),t},B0=e=>Ho(e)?"THROTTLING":Pi(e)?"TRANSIENT":Fy(e)?"SERVER_ERROR":"CLIENT_ERROR",Wd={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Pr=e=>({applyToStack:t=>{t.add(H0(e),Wd)}}),G0=e=>{if(!dt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],o=Number(r);return Number.isNaN(o)?new Date(r):new Date(o*1e3)}});var wt=a(()=>{nS();_d();aS();Ed();cS();xd();VE()});var z0,Or,qE=a(()=>{wt();pd();z0={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:Wd.name},Or=e=>({applyToStack:t=>{t.addRelativeTo(Ny(e),z0)}})});var BE=a(()=>{pd();qE()});var _t,GE=a(()=>{_t=class{constructor(t){this.authSchemes=new Map;for(let[r,o]of Object.entries(t))o!==void 0&&this.authSchemes.set(r,o)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var zE=a(()=>{Ae()});var WE=a(()=>{});var At,jE=a(()=>{At=class{async sign(t,r,o){return t}}});var KE=a(()=>{zE();WE();jE()});var W0,JE,jd,YE,XE=a(()=>{W0=e=>t=>jd(t)&&t.expiration.getTime()-Date.now()<e,JE=W0(3e5),jd=e=>e.expiration!==void 0,YE=(e,t,r)=>{if(e===void 0)return;let o=typeof e!="function"?async()=>Promise.resolve(e):e,n,s,i,c=!1,d=async l=>{s||(s=o(l));try{n=await s,i=!0,c=!1}finally{s=void 0}return n};return t===void 0?async l=>((!i||l!=null&&l.forceRefresh)&&(n=await d(l)),n):async l=>((!i||l!=null&&l.forceRefresh)&&(n=await d(l)),c?n:r(n)?(t(n)&&await d(l),n):(c=!0,n))}});var QE=a(()=>{GE();KE();XE()});var ZE=a(()=>{Ae()});var zn,ex=a(()=>{zn=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Rt(e,t){return new Kd(e,t)}var Kd,tx=a(()=>{W();E();Kd=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:o,path:n}=await this.context.endpoint();this.path=n;for(let s of this.resolvePathStack)s(this.path);return new H({protocol:r,hostname:this.hostname||t,port:o,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,o,n){return this.resolvePathStack.push(s=>{this.path=DE(s,this.input,t,r,o,n)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function Wn(e,t,r,o,n){return async function*(i,c,...d){let l=i.startingToken||void 0,u=!0,p;for(;u;){if(c[r]=l,n&&(c[n]=c[n]??i.pageSize),i.client instanceof e)p=await j0(t,i.client,c,...d);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield p;let m=l;l=K0(p,o),u=!!(l&&(!i.stopOnSameToken||l!==m))}return void 0}}var j0,K0,rx=a(()=>{j0=async(e,t,r,...o)=>await t.send(new e(r),...o);K0=(e,t)=>{let r=e,o=t.split(".");for(let n of o){if(!r||typeof r!="object")return;r=r[n]}return r}});var we=a(()=>{Oy();BE();QE();ZE();ex();tx();rx()});function J0(e){return t=>async r=>{let o=r.request;if(H.isInstance(o)){let{body:n,headers:s}=o;if(n&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(ox)===-1)try{let i=e(n);o.headers={...o.headers,[ox]:String(i)}}catch{}}return t({...r,request:o})}}var ox,Y0,Nr,jn=a(()=>{W();ox="content-length";Y0={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Nr=e=>({applyToStack:t=>{t.add(J0(e.bodyLengthChecker),Y0)}})});var nx,Dr,sx=a(()=>{nx=!1,Dr=e=>{e&&!nx&&parseInt(e.substring(1,e.indexOf(".")))<16&&(nx=!0)}});var ix=a(()=>{sx()});var Jd,ax=a(()=>{W();Jd=e=>{var t,r;return dt.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0}});var Ki,Yd=a(()=>{Ki=e=>new Date(Date.now()+e)});var cx,dx=a(()=>{Yd();cx=(e,t)=>Math.abs(Ki(t).getTime()-e)>=3e5});var Xd,lx=a(()=>{dx();Xd=(e,t)=>{let r=Date.parse(e);return cx(r,t)?r-Date.now():t}});var ux=a(()=>{ax();Yd();lx()});var Kn,X0,Je,px=a(()=>{W();ux();Kn=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},X0=async e=>{var d,l,u;let t=Kn("context",e.context),r=Kn("config",e.config),o=(u=(l=(d=t.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],s=await Kn("signer",r.signer)(o),i=e==null?void 0:e.signingRegion,c=e==null?void 0:e.signingName;return{config:r,signer:s,signingRegion:i,signingName:c}},Je=class{async sign(t,r,o){if(!H.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:n,signer:s,signingRegion:i,signingName:c}=await X0(o);return await s.sign(t,{signingDate:Ki(n.systemClockOffset),signingRegion:i,signingService:c})}errorHandler(t){return r=>{let o=r.ServerTime??Jd(r.$response);if(o){let n=Kn("config",t.config),s=n.systemClockOffset;n.systemClockOffset=Xd(o,n.systemClockOffset),n.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let o=Jd(t);if(o){let n=Kn("config",r.config);n.systemClockOffset=Xd(o,n.systemClockOffset)}}}});var mx,fx,Qd,hx,gx,Zd,el,tl,rl,Q0,yx,Sx,Jn,Ex,xx,Cx,wx,Ji,_x,Ax,Rx,ol,vx,So=a(()=>{mx="X-Amz-Algorithm",fx="X-Amz-Credential",Qd="X-Amz-Date",hx="X-Amz-SignedHeaders",gx="X-Amz-Expires",Zd="X-Amz-Signature",el="X-Amz-Security-Token",tl="authorization",rl=Qd.toLowerCase(),Q0="date",yx=[tl,rl,Q0],Sx=Zd.toLowerCase(),Jn="x-amz-content-sha256",Ex=el.toLowerCase(),xx={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Cx=/^proxy-/,wx=/^sec-/,Ji="AWS4-HMAC-SHA256",_x="AWS4-HMAC-SHA256-PAYLOAD",Ax="UNSIGNED-PAYLOAD",Rx=50,ol="aws4_request",vx=60*60*24*7});var Yi,nl,Xi,Ix,Tx,sl=a(()=>{zo();Te();So();Yi={},nl=[],Xi=(e,t,r)=>`${e}/${t}/${r}/${ol}`,Ix=async(e,t,r,o,n)=>{let s=await Tx(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${o}:${n}:${Ie(s)}:${t.sessionToken}`;if(i in Yi)return Yi[i];for(nl.push(i);nl.length>Rx;)delete Yi[nl.shift()];let c=`AWS4${t.secretAccessKey}`;for(let d of[r,o,n,ol])c=await Tx(e,c,d);return Yi[i]=c},Tx=(e,t,r)=>{let o=new e(t);return o.update(St(r)),o.digest()}});var Qi,il=a(()=>{So();Qi=({headers:e},t,r)=>{let o={};for(let n of Object.keys(e).sort()){if(e[n]==null)continue;let s=n.toLowerCase();(s in xx||t!=null&&t.has(s)||Cx.test(s)||wx.test(s))&&(!r||r&&!r.has(s))||(o[s]=e[n].trim().replace(/\s+/g," "))}return o}});var al,cl=a(()=>{Hi();So();al=({query:e={}})=>{let t=[],r={};for(let o of Object.keys(e).sort()){if(o.toLowerCase()===Sx)continue;t.push(o);let n=e[o];typeof n=="string"?r[o]=`${je(o)}=${je(n)}`:Array.isArray(n)&&(r[o]=n.slice(0).reduce((s,i)=>s.concat([`${je(o)}=${je(i)}`]),[]).sort().join("&"))}return t.map(o=>r[o]).filter(o=>o).join("&")}});var Yn,dl=a(()=>{Rd();zo();Te();So();Yn=async({headers:e,body:t},r)=>{for(let o of Object.keys(e))if(o.toLowerCase()===Jn)return e[o];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Fi(t)){let o=new r;return o.update(St(t)),Ie(await o.digest())}return Ax}});function Px(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Zi,bx,Z0,ll,Ox=a(()=>{zo();Te();Zi=class{format(t){let r=[];for(let s of Object.keys(t)){let i=ne(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let o=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),n=0;for(let s of r)o.set(s,n),n+=s.byteLength;return o}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let o=new DataView(new ArrayBuffer(5));return o.setUint8(0,4),o.setInt32(1,t.value,!1),new Uint8Array(o.buffer);case"long":let n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let c=ne(t.value),d=new DataView(new ArrayBuffer(3+c.byteLength));d.setUint8(0,7),d.setUint16(1,c.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(c,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(ll.fromNumber(t.value.valueOf()).bytes,1),u;case"uuid":if(!Z0.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set(WS(t.value.replace(/\-/g,"")),1),p}}};(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(bx||(bx={}));Z0=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ll=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let o=7,n=Math.abs(Math.round(t));o>-1&&n>0;o--,n/=256)r[o]=n;return t<0&&Px(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Px(t),parseInt(Ie(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}});var Nx,Dx=a(()=>{Nx=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1}});var ea,eP,ul=a(()=>{ea=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?eP(t):void 0}),eP=e=>Object.keys(e).reduce((t,r)=>{let o=e[r];return{...t,[r]:Array.isArray(o)?[...o]:o}},{})});var pl,ml=a(()=>{ul();pl=(e,t={})=>{var n;let{headers:r,query:o={}}=typeof e.clone=="function"?e.clone():ea(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((n=t.unhoistableHeaders)!=null&&n.has(i))&&(o[s]=r[s],delete r[s])}return{...e,headers:r,query:o}}});var ta,fl=a(()=>{ul();So();ta=e=>{e=typeof e.clone=="function"?e.clone():ea(e);for(let t of Object.keys(e.headers))yx.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e}});var kx,tP,$x=a(()=>{kx=e=>tP(e).toISOString().replace(/\.\d{3}Z$/,"Z"),tP=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e});var Xn,ra,Ux,Lx=a(()=>{zo();ve();Hi();Te();So();sl();il();cl();dl();Ox();Dx();ml();fl();$x();Xn=class{constructor({applyChecksum:t,credentials:r,region:o,service:n,sha256:s,uriEscapePath:i=!0}){this.headerFormatter=new Zi,this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=J(o),this.credentialProvider=J(r)}async presign(t,r={}){let{signingDate:o=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:c,signingRegion:d,signingService:l}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let p=d??await this.regionProvider(),{longDate:m,shortDate:f}=ra(o);if(n>vx)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let g=Xi(f,p,l??this.service),S=pl(ta(t),{unhoistableHeaders:i});u.sessionToken&&(S.query[el]=u.sessionToken),S.query[mx]=Ji,S.query[fx]=`${u.accessKeyId}/${g}`,S.query[Qd]=m,S.query[gx]=n.toString(10);let y=Qi(S,s,c);return S.query[hx]=Ux(y),S.query[Zd]=await this.getSignature(m,g,this.getSigningKey(u,p,f,l),this.createCanonicalRequest(S,y,await Yn(t,this.sha256))),S}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:o=new Date,priorSignature:n,signingRegion:s,signingService:i}){let c=s??await this.regionProvider(),{shortDate:d,longDate:l}=ra(o),u=Xi(d,c,i??this.service),p=await Yn({headers:{},body:r},this.sha256),m=new this.sha256;m.update(t);let f=Ie(await m.digest()),g=[_x,l,u,n,f,p].join(`
`);return this.signString(g,{signingDate:o,signingRegion:c,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:o,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:o,signingService:n,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:o,signingService:n}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=o??await this.regionProvider(),{shortDate:c}=ra(r),d=new this.sha256(await this.getSigningKey(s,i,c,n));return d.update(St(t)),Ie(await d.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:o,unsignableHeaders:n,signingRegion:s,signingService:i}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let d=s??await this.regionProvider(),l=ta(t),{longDate:u,shortDate:p}=ra(r),m=Xi(p,d,i??this.service);l.headers[rl]=u,c.sessionToken&&(l.headers[Ex]=c.sessionToken);let f=await Yn(l,this.sha256);!Nx(Jn,l.headers)&&this.applyChecksum&&(l.headers[Jn]=f);let g=Qi(l,n,o),S=await this.getSignature(u,m,this.getSigningKey(c,d,p,i),this.createCanonicalRequest(l,g,f));return l.headers[tl]=`${Ji} Credential=${c.accessKeyId}/${m}, SignedHeaders=${Ux(g)}, Signature=${S}`,l}createCanonicalRequest(t,r,o){let n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${al(t)}
${n.map(s=>`${s}:${r[s]}`).join(`
`)}

${n.join(";")}
${o}`}async createStringToSign(t,r,o){let n=new this.sha256;n.update(St(o));let s=await n.digest();return`${Ji}
${t}
${r}
${Ie(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let o=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return je(o).replace(/%2F/g,"/")}return t}async getSignature(t,r,o,n){let s=await this.createStringToSign(t,r,n),i=new this.sha256(await o);return i.update(St(s)),Ie(await i.digest())}getSigningKey(t,r,o,n){return Ix(this.sha256,t,o,r,n||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},ra=e=>{let t=kx(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Ux=e=>Object.keys(e).sort().join(";")});var Fx=a(()=>{Lx();il();cl();dl();ml();fl();sl()});var kr,Mx=a(()=>{we();Fx();kr=e=>{let t;e.credentials&&(t=YE(e.credentials,JE,jd)),t||(e.credentialDefaultProvider?t=zn(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):t=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:r=!0,systemClockOffset:o=e.systemClockOffset||0,sha256:n}=e,s;return e.signer?s=zn(e.signer):e.regionInfoProvider?s=()=>zn(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,c])=>{let{signingRegion:d,signingService:l}=i;e.signingRegion=e.signingRegion||d||c,e.signingName=e.signingName||l||e.serviceId;let u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:n,uriEscapePath:r},p=e.signerConstructor||Xn;return new p(u)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await zn(e.region)(),properties:{}},i);let c=i.signingRegion,d=i.signingName;e.signingRegion=e.signingRegion||c,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:n,uriEscapePath:r},u=e.signerConstructor||Xn;return new u(l)},{...e,systemClockOffset:o,signingEscapePath:r,credentials:t,signer:s}}});var Hx=a(()=>{px();Mx()});var Vx=a(()=>{Hx()});var qx=a(()=>{});var Bx=a(()=>{E()});var oa,hl=a(()=>{E();oa=(e,t)=>go(e,t).then(r=>t.utf8Encoder(r))});var Z,Ko,Jo,Gx=a(()=>{hl();Z=(e,t)=>oa(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(o){throw(o==null?void 0:o.name)==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:r}),o}return{}}),Ko=async(e,t)=>{let r=await Z(e,t);return r.message=r.message??r.Message,r},Jo=(e,t)=>{let r=(s,i)=>Object.keys(s).find(c=>c.toLowerCase()===i.toLowerCase()),o=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},n=r(e.headers,"x-amzn-errortype");if(n!==void 0)return o(e.headers[n]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)}});var na=q(zt=>{"use strict";var zx=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",rP=zx+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Wx="["+zx+"]["+rP+"]*",oP=new RegExp("^"+Wx+"$"),nP=function(e,t){let r=[],o=t.exec(e);for(;o;){let n=[];n.startIndex=t.lastIndex-o[0].length;let s=o.length;for(let i=0;i<s;i++)n.push(o[i]);r.push(n),o=t.exec(e)}return r},sP=function(e){let t=oP.exec(e);return!(t===null||typeof t>"u")};zt.isExist=function(e){return typeof e<"u"};zt.isEmptyObject=function(e){return Object.keys(e).length===0};zt.merge=function(e,t,r){if(t){let o=Object.keys(t),n=o.length;for(let s=0;s<n;s++)r==="strict"?e[o[s]]=[t[o[s]]]:e[o[s]]=t[o[s]]}};zt.getValue=function(e){return zt.isExist(e)?e:""};zt.isName=sP;zt.getAllMatches=nP;zt.nameRegexp=Wx});var yl=q(Xx=>{"use strict";var gl=na(),iP={allowBooleanAttributes:!1,unpairedTags:[]};Xx.validate=function(e,t){t=Object.assign({},iP,t);let r=[],o=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Kx(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Jx(e,s);continue}else{let c=!1;e[s]==="/"&&(c=!0,s++);let d="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)d+=e[s];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),s--),!fP(d)){let p;return d.trim().length===0?p="Invalid space after '<'.":p="Tag '"+d+"' is an invalid name.",Y("InvalidTag",p,_e(e,s))}let l=dP(e,s);if(l===!1)return Y("InvalidAttr","Attributes for '"+d+"' have open quote.",_e(e,s));let u=l.value;if(s=l.index,u[u.length-1]==="/"){let p=s-u.length;u=u.substring(0,u.length-1);let m=Yx(u,t);if(m===!0)o=!0;else return Y(m.err.code,m.err.msg,_e(e,p+m.err.line))}else if(c)if(l.tagClosed){if(u.trim().length>0)return Y("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",_e(e,i));{let p=r.pop();if(d!==p.tagName){let m=_e(e,p.tagStartPos);return Y("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+d+"'.",_e(e,i))}r.length==0&&(n=!0)}}else return Y("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",_e(e,s));else{let p=Yx(u,t);if(p!==!0)return Y(p.err.code,p.err.msg,_e(e,s-u.length+p.err.line));if(n===!0)return Y("InvalidXml","Multiple possible root nodes found.",_e(e,s));t.unpairedTags.indexOf(d)!==-1||r.push({tagName:d,tagStartPos:i}),o=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Jx(e,s);continue}else if(e[s+1]==="?"){if(s=Kx(e,++s),s.err)return s}else break;else if(e[s]==="&"){let p=pP(e,s);if(p==-1)return Y("InvalidChar","char '&' is not expected.",_e(e,s));s=p}else if(n===!0&&!jx(e[s]))return Y("InvalidXml","Extra text at the end",_e(e,s));e[s]==="<"&&s--}}else{if(jx(e[s]))continue;return Y("InvalidChar","char '"+e[s]+"' is not expected.",_e(e,s))}if(o){if(r.length==1)return Y("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",_e(e,r[0].tagStartPos));if(r.length>0)return Y("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Y("InvalidXml","Start tag expected.",1);return!0};function jx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Kx(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let o=e.substr(r,t-r);if(t>5&&o==="xml")return Y("InvalidXml","XML declaration allowed only at the start of the document.",_e(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Jx(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var aP='"',cP="'";function dP(e,t){let r="",o="",n=!1;for(;t<e.length;t++){if(e[t]===aP||e[t]===cP)o===""?o=e[t]:o!==e[t]||(o="");else if(e[t]===">"&&o===""){n=!0;break}r+=e[t]}return o!==""?!1:{value:r,index:t,tagClosed:n}}var lP=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Yx(e,t){let r=gl.getAllMatches(e,lP),o={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return Y("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",Qn(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return Y("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",Qn(r[n]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return Y("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",Qn(r[n]));let s=r[n][2];if(!mP(s))return Y("InvalidAttr","Attribute '"+s+"' is an invalid name.",Qn(r[n]));if(!o.hasOwnProperty(s))o[s]=1;else return Y("InvalidAttr","Attribute '"+s+"' is repeated.",Qn(r[n]))}return!0}function uP(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function pP(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,uP(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Y(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function mP(e){return gl.isName(e)}function fP(e){return gl.isName(e)}function _e(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Qn(e){return e.startIndex+e[1].length}});var Zx=q(Sl=>{var Qx={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},hP=function(e){return Object.assign({},Qx,e)};Sl.buildOptions=hP;Sl.defaultOptions=Qx});var tC=q((vj,eC)=>{"use strict";var El=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};eC.exports=El});var oC=q((Tj,rC)=>{var gP=na();function yP(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let o=1,n=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(n&&xP(e,t))t+=7,[entityName,val,t]=SP(e,t+1),val.indexOf("&")===-1&&(r[AP(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(n&&CP(e,t))t+=8;else if(n&&wP(e,t))t+=8;else if(n&&_P(e,t))t+=9;else if(EP)s=!0;else throw new Error("Invalid DOCTYPE");o++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,o--):o--,o===0)break}else e[t]==="["?n=!0:i+=e[t];if(o!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function SP(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let o=e[t++],n="";for(;t<e.length&&e[t]!==o;t++)n+=e[t];return[r,n,t]}function EP(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function xP(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function CP(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function wP(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function _P(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function AP(e){if(gP.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}rC.exports=yP});var sC=q((Ij,nC)=>{var RP=/^[-+]?0x[a-fA-F0-9]+$/,vP=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var TP={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function IP(e,t={}){if(t=Object.assign({},TP,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&RP.test(r))return Number.parseInt(r,16);{let o=vP.exec(r);if(o){let n=o[1],s=o[2],i=bP(o[3]),c=o[4]||o[6];if(!t.leadingZeros&&s.length>0&&n&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!n&&r[1]!==".")return e;{let d=Number(r),l=""+d;return l.search(/[eE]/)!==-1||c?t.eNotation?d:e:r.indexOf(".")!==-1?l==="0"&&i===""||l===i||n&&l==="-"+i?d:e:s?i===l||n+i===l?d:e:r===l||r===n+l?d:e}}else return e}}function bP(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}nC.exports=IP});var aC=q((Pj,iC)=>{"use strict";var _l=na(),Zn=tC(),PP=oC(),OP=sC(),bj="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,_l.nameRegexp),xl=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=NP,this.parseXml=LP,this.parseTextData=DP,this.resolveNameSpace=kP,this.buildAttributesMap=UP,this.isItStopNode=VP,this.replaceEntitiesValue=MP,this.readStopNodeData=BP,this.saveTextToParentTag=HP,this.addChild=FP}};function NP(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let o=t[r];this.lastEntities[o]={regex:new RegExp("&"+o+";","g"),val:e[o]}}}function DP(e,t,r,o,n,s,i){if(e!==void 0&&(this.options.trimValues&&!o&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let c=this.options.tagValueProcessor(t,e,r,n,s);return c==null?e:typeof c!=typeof e||c!==e?c:this.options.trimValues?wl(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?wl(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function kP(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var $P=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function UP(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let o=_l.getAllMatches(e,$P),n=o.length,s={};for(let i=0;i<n;i++){let c=this.resolveNameSpace(o[i][1]),d=o[i][4],l=this.options.attributeNamePrefix+c;if(c.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);let u=this.options.attributeValueProcessor(c,d,t);u==null?s[l]=d:typeof u!=typeof d||u!==d?s[l]=u:s[l]=wl(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var LP=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Zn("!xml"),r=t,o="",n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let c=Eo(e,">",s,"Closing Tag is not closed."),d=e.substring(s+2,c).trim();if(this.options.removeNSPrefix){let p=d.indexOf(":");p!==-1&&(d=d.substr(p+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&(o=this.saveTextToParentTag(o,r,n));let l=n.substring(n.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=n.lastIndexOf("."),n=n.substring(0,u),r=this.tagsNodeStack.pop(),o="",s=c}else if(e[s+1]==="?"){let c=Cl(e,s,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,n),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let d=new Zn(c.tagName);d.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(d[":@"]=this.buildAttributesMap(c.tagExp,n,c.tagName)),this.addChild(r,d,n)}s=c.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let c=Eo(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let d=e.substring(s+4,c-2);o=this.saveTextToParentTag(o,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}s=c}else if(e.substr(s+1,2)==="!D"){let c=PP(e,s);this.docTypeEntities=c.entities,s=c.i}else if(e.substr(s+1,2)==="!["){let c=Eo(e,"]]>",s,"CDATA is not closed.")-2,d=e.substring(s+9,c);if(o=this.saveTextToParentTag(o,r,n),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]);else{let l=this.parseTextData(d,r.tagname,n,!0,!1,!0);l==null&&(l=""),r.add(this.options.textNodeName,l)}s=c+2}else{let c=Cl(e,s,this.options.removeNSPrefix),d=c.tagName,l=c.tagExp,u=c.attrExpPresent,p=c.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&o&&r.tagname!=="!xml"&&(o=this.saveTextToParentTag(o,r,n,!1));let m=r;if(m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),d!==t.tagname&&(n+=n?"."+d:d),this.isItStopNode(this.options.stopNodes,n,d)){let f="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)s=c.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)s=c.closeIndex;else{let S=this.readStopNodeData(e,d,p+1);if(!S)throw new Error(`Unexpected end of ${d}`);s=S.i,f=S.tagContent}let g=new Zn(d);d!==l&&u&&(g[":@"]=this.buildAttributesMap(l,n,d)),f&&(f=this.parseTextData(f,d,n,!0,u,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),g.add(this.options.textNodeName,f),this.addChild(r,g,n)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=d):l=l.substr(0,l.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));let f=new Zn(d);d!==l&&u&&(f[":@"]=this.buildAttributesMap(l,n,d)),this.addChild(r,f,n),n=n.substr(0,n.lastIndexOf("."))}else{let f=new Zn(d);this.tagsNodeStack.push(r),d!==l&&u&&(f[":@"]=this.buildAttributesMap(l,n,d)),this.addChild(r,f,n),r=f}o="",s=p}}else o+=e[s];return t.child};function FP(e,t,r){let o=this.options.updateTag(t.tagname,r,t[":@"]);o===!1||(typeof o=="string"&&(t.tagname=o),e.addChild(t))}var MP=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function HP(e,t,r,o){return e&&(o===void 0&&(o=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,o),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function VP(e,t,r){let o="*."+r;for(let n in e){let s=e[n];if(o===s||t===s)return!0}return!1}function qP(e,t,r=">"){let o,n="";for(let s=t;s<e.length;s++){let i=e[s];if(o)i===o&&(o="");else if(i==='"'||i==="'")o=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:n,index:s}}else return{data:n,index:s};else i==="	"&&(i=" ");n+=i}}function Eo(e,t,r,o){let n=e.indexOf(t,r);if(n===-1)throw new Error(o);return n+t.length-1}function Cl(e,t,r,o=">"){let n=qP(e,t+1,o);if(!n)return;let s=n.data,i=n.index,c=s.search(/\s/),d=s,l=!0;if(c!==-1&&(d=s.substr(0,c).replace(/\s\s*$/,""),s=s.substr(c+1)),r){let u=d.indexOf(":");u!==-1&&(d=d.substr(u+1),l=d!==n.data.substr(u+1))}return{tagName:d,tagExp:s,closeIndex:i,attrExpPresent:l}}function BP(e,t,r){let o=r,n=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Eo(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(n--,n===0))return{tagContent:e.substring(o,r),i:s};r=s}else if(e[r+1]==="?")r=Eo(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Eo(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Eo(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Cl(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&n++,r=s.closeIndex)}}function wl(e,t,r){if(t&&typeof e=="string"){let o=e.trim();return o==="true"?!0:o==="false"?!1:OP(e,r)}else return _l.isExist(e)?e:""}iC.exports=xl});var lC=q(dC=>{"use strict";function GP(e,t){return cC(e,t)}function cC(e,t,r){let o,n={};for(let s=0;s<e.length;s++){let i=e[s],c=zP(i),d="";if(r===void 0?d=c:d=r+"."+c,c===t.textNodeName)o===void 0?o=i[c]:o+=""+i[c];else{if(c===void 0)continue;if(i[c]){let l=cC(i[c],t,d),u=jP(l,t);i[":@"]?WP(l,i[":@"],d,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),n[c]!==void 0&&n.hasOwnProperty(c)?(Array.isArray(n[c])||(n[c]=[n[c]]),n[c].push(l)):t.isArray(c,d,u)?n[c]=[l]:n[c]=l}}}return typeof o=="string"?o.length>0&&(n[t.textNodeName]=o):o!==void 0&&(n[t.textNodeName]=o),n}function zP(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let o=t[r];if(o!==":@")return o}}function WP(e,t,r,o){if(t){let n=Object.keys(t),s=n.length;for(let i=0;i<s;i++){let c=n[i];o.isArray(c,r+"."+c,!0,!0)?e[c]=[t[c]]:e[c]=t[c]}}}function jP(e,t){let{textNodeName:r}=t,o=Object.keys(e).length;return!!(o===0||o===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}dC.prettify=GP});var pC=q((Nj,uC)=>{var{buildOptions:KP}=Zx(),JP=aC(),{prettify:YP}=lC(),XP=yl(),Al=class{constructor(t){this.externalEntities={},this.options=KP(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=XP.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let o=new JP(this.options);o.addExternalEntities(this.externalEntities);let n=o.parseXml(t);return this.options.preserveOrder||n===void 0?n:YP(n,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};uC.exports=Al});var yC=q((Dj,gC)=>{var QP=`
`;function ZP(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=QP),fC(e,t,"",r)}function fC(e,t,r,o){let n="",s=!1;for(let i=0;i<e.length;i++){let c=e[i],d=eO(c),l="";if(r.length===0?l=d:l=`${r}.${d}`,d===t.textNodeName){let g=c[d];tO(l,t)||(g=t.tagValueProcessor(d,g),g=hC(g,t)),s&&(n+=o),n+=g,s=!1;continue}else if(d===t.cdataPropName){s&&(n+=o),n+=`<![CDATA[${c[d][0][t.textNodeName]}]]>`,s=!1;continue}else if(d===t.commentPropName){n+=o+`<!--${c[d][0][t.textNodeName]}-->`,s=!0;continue}else if(d[0]==="?"){let g=mC(c[":@"],t),S=d==="?xml"?"":o,y=c[d][0][t.textNodeName];y=y.length!==0?" "+y:"",n+=S+`<${d}${y}${g}?>`,s=!0;continue}let u=o;u!==""&&(u+=t.indentBy);let p=mC(c[":@"],t),m=o+`<${d}${p}`,f=fC(c[d],t,l,u);t.unpairedTags.indexOf(d)!==-1?t.suppressUnpairedNode?n+=m+">":n+=m+"/>":(!f||f.length===0)&&t.suppressEmptyNode?n+=m+"/>":f&&f.endsWith(">")?n+=m+`>${f}${o}</${d}>`:(n+=m+">",f&&o!==""&&(f.includes("/>")||f.includes("</"))?n+=o+t.indentBy+f+o:n+=f,n+=`</${d}>`),s=!0}return n}function eO(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let o=t[r];if(o!==":@")return o}}function mC(e,t){let r="";if(e&&!t.ignoreAttributes)for(let o in e){let n=t.attributeValueProcessor(o,e[o]);n=hC(n,t),n===!0&&t.suppressBooleanAttributes?r+=` ${o.substr(t.attributeNamePrefix.length)}`:r+=` ${o.substr(t.attributeNamePrefix.length)}="${n}"`}return r}function tO(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let o in t.stopNodes)if(t.stopNodes[o]===e||t.stopNodes[o]==="*."+r)return!0;return!1}function hC(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let o=t.entities[r];e=e.replace(o.regex,o.val)}return e}gC.exports=ZP});var EC=q((kj,SC)=>{"use strict";var rO=yC(),oO={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function $r(e){this.options=Object.assign({},oO,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=iO),this.processTextOrObjNode=nO,this.options.format?(this.indentate=sO,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}$r.prototype.build=function(e){return this.options.preserveOrder?rO(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};$r.prototype.j2x=function(e,t){let r="",o="";for(let n in e)if(!(typeof e[n]>"u"))if(e[n]===null)n[0]==="?"?o+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if(e[n]instanceof Date)o+=this.buildTextValNode(e[n],n,"",t);else if(typeof e[n]!="object"){let s=this.isAttribute(n);if(s)r+=this.buildAttrPairStr(s,""+e[n]);else if(n===this.options.textNodeName){let i=this.options.tagValueProcessor(n,""+e[n]);o+=this.replaceEntitiesValue(i)}else o+=this.buildTextValNode(e[n],n,"",t)}else if(Array.isArray(e[n])){let s=e[n].length,i="";for(let c=0;c<s;c++){let d=e[n][c];typeof d>"u"||(d===null?n[0]==="?"?o+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+n+"/"+this.tagEndChar:typeof d=="object"?this.options.oneListGroup?i+=this.j2x(d,t+1).val:i+=this.processTextOrObjNode(d,n,t):i+=this.buildTextValNode(d,n,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,n,"",t)),o+=i}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){let s=Object.keys(e[n]),i=s.length;for(let c=0;c<i;c++)r+=this.buildAttrPairStr(s[c],""+e[n][s[c]])}else o+=this.processTextOrObjNode(e[n],n,t);return{attrStr:r,val:o}};$r.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function nO(e,t,r){let o=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,r):this.buildObjectNode(o.val,t,o.attrStr,r)}$r.prototype.buildObjectNode=function(e,t,r,o){if(e==="")return t[0]==="?"?this.indentate(o)+"<"+t+r+"?"+this.tagEndChar:this.indentate(o)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",n=""),r&&e.indexOf("<")===-1?this.indentate(o)+"<"+t+r+s+">"+e+n:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(o)+`<!--${e}-->`+this.newLine:this.indentate(o)+"<"+t+r+s+this.tagEndChar+e+this.indentate(o)+n}};$r.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};$r.prototype.buildTextValNode=function(e,t,r,o){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(o)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(o)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(o)+"<"+t+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),n===""?this.indentate(o)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(o)+"<"+t+r+">"+n+"</"+t+this.tagEndChar}};$r.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function sO(e){return this.options.indentBy.repeat(e)}function iO(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}SC.exports=$r});var CC=q(($j,xC)=>{"use strict";var aO=yl(),cO=pC(),dO=EC();xC.exports={XMLParser:cO,XMLValidator:aO,XMLBuilder:dO}});var wC,vt,_C,AC=a(()=>{E();wC=at(CC());hl();vt=(e,t)=>oa(e,t).then(r=>{if(r.length){let o=new wC.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});o.addEntity("#xD","\r"),o.addEntity("#10",`
`);let n;try{n=o.parse(r,!0)}catch(d){throw d&&typeof d=="object"&&Object.defineProperty(d,"$responseBodyText",{value:r}),d}let s="#text",i=Object.keys(n)[0],c=n[i];return c[s]&&(c[i]=c[s],delete c[s]),Gd(c)}return{}}),_C=async(e,t)=>{let r=await vt(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r}});var RC=a(()=>{qx();Bx();Gx();AC()});var se=a(()=>{ix();Vx();RC()});var OC,NC,DC,kC,$C,Rl,UC=a(()=>{F();OC="AWS_ACCESS_KEY_ID",NC="AWS_SECRET_ACCESS_KEY",DC="AWS_SESSION_TOKEN",kC="AWS_CREDENTIAL_EXPIRATION",$C="AWS_CREDENTIAL_SCOPE",Rl=e=>async()=>{var i;(i=e==null?void 0:e.logger)==null||i.debug("@aws-sdk/credential-provider-env","fromEnv");let t=process.env[OC],r=process.env[NC],o=process.env[DC],n=process.env[kC],s=process.env[$C];if(t&&r)return{accessKeyId:t,secretAccessKey:r,...o&&{sessionToken:o},...n&&{expiration:new Date(n)},...s&&{credentialScope:s}};throw new C("Unable to find environment variable credentials.")}});var LC={};Ne(LC,{ENV_CREDENTIAL_SCOPE:()=>$C,ENV_EXPIRATION:()=>kC,ENV_KEY:()=>OC,ENV_SECRET:()=>NC,ENV_SESSION:()=>DC,fromEnv:()=>Rl});var vl=a(()=>{UC()});function Ur(e){return new Promise((t,r)=>{var n;let o=(0,MC.request)({method:"GET",...e,hostname:(n=e.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});o.on("error",s=>{r(Object.assign(new Fe("Unable to connect to instance metadata service"),s)),o.destroy()}),o.on("timeout",()=>{r(new Fe("TimeoutError from instance metadata service")),o.destroy()}),o.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Fe("Error response received from instance metadata service"),{statusCode:i})),o.destroy());let c=[];s.on("data",d=>{c.push(d)}),s.on("end",()=>{t(FC.Buffer.concat(c)),o.destroy()})}),o.end()})}var FC,MC,sa=a(()=>{F();FC=require("buffer"),MC=require("http")});var ia,aa,Tl=a(()=>{ia=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",aa=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)})});var s6,i6,es,ca=a(()=>{s6=1e3,i6=0,es=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t})});var ts,Il=a(()=>{ts=(e,t)=>{let r=e();for(let o=0;o<t;o++)r=r.catch(e);return r}});var HC,da,la,bl,pO,mO,fO,hO,gO,yO,VC=a(()=>{F();HC=require("url");sa();Tl();ca();Il();da="AWS_CONTAINER_CREDENTIALS_FULL_URI",la="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",bl="AWS_CONTAINER_AUTHORIZATION_TOKEN",pO=(e={})=>{let{timeout:t,maxRetries:r}=es(e);return()=>ts(async()=>{let o=await yO(),n=JSON.parse(await mO(t,o));if(!ia(n))throw new C("Invalid response received from instance metadata service.");return aa(n)},r)},mO=async(e,t)=>(process.env[bl]&&(t.headers={...t.headers,Authorization:process.env[bl]}),(await Ur({...t,timeout:e})).toString()),fO="169.254.170.2",hO={localhost:!0,"127.0.0.1":!0},gO={"http:":!0,"https:":!0},yO=async()=>{if(process.env[la])return{hostname:fO,path:process.env[la]};if(process.env[da]){let e=(0,HC.parse)(process.env[da]);if(!e.hostname||!(e.hostname in hO))throw new C(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in gO))throw new C(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new C(`The container metadata credential provider cannot be used unless the ${la} or ${da} environment variable is set`,!1)}});var ua,qC=a(()=>{F();ua=class e extends C{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,e.prototype)}}});var xo,Pl=a(()=>{(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(xo||(xo={}))});var SO,EO,BC,GC=a(()=>{SO="AWS_EC2_METADATA_SERVICE_ENDPOINT",EO="ec2_metadata_service_endpoint",BC={environmentVariableSelector:e=>e[SO],configFileSelector:e=>e[EO],default:void 0}});var Lr,Ol=a(()=>{(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Lr||(Lr={}))});var xO,CO,zC,WC=a(()=>{Ol();xO="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",CO="ec2_metadata_service_endpoint_mode",zC={environmentVariableSelector:e=>e[xO],configFileSelector:e=>e[CO],default:Lr.IPv4}});var pa,wO,_O,Nl=a(()=>{gt();lo();Pl();GC();Ol();WC();pa=async()=>Ce(await wO()||await _O()),wO=async()=>O(BC)(),_O=async()=>{let e=await O(zC)();switch(e){case Lr.IPv4:return xo.IPv4;case Lr.IPv6:return xo.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Lr)}`)}}});var AO,Dl,jC=a(()=>{AO="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Dl=(e,t)=>{let r=300+Math.floor(Math.random()*300),o=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(o)}.
For more information, please visit: `+AO);let n=e.originalExpiration??e.expiration;return{...e,...n?{originalExpiration:n}:{},expiration:o}}});var KC,JC=a(()=>{jC();KC=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,o;return async()=>{let n;try{n=await e(),n.expiration&&n.expiration.getTime()<Date.now()&&(n=Dl(n,r))}catch(s){if(o)r.warn("Credential renew failed: ",s),n=Dl(o,r);else throw s}return o=n,n}}});var QC,RO,kl,YC,XC,vO,TO,IO,bO,PO,ZC=a(()=>{gt();F();qC();sa();Tl();ca();Il();Nl();JC();QC="/latest/meta-data/iam/security-credentials/",RO="/latest/api/token",kl="AWS_EC2_METADATA_V1_DISABLED",YC="ec2_metadata_v1_disabled",XC="x-aws-ec2-metadata-token",vO=(e={})=>KC(TO(e),{logger:e.logger}),TO=e=>{let t=!1,{logger:r,profile:o}=e,{timeout:n,maxRetries:s}=es(e),i=async(c,d)=>{var p;if(t||((p=d.headers)==null?void 0:p[XC])==null){let m=!1,f=!1,g=await O({environmentVariableSelector:S=>{let y=S[kl];if(f=!!y&&y!=="false",y===void 0)throw new C(`${kl} not set in env, checking config file next.`);return f},configFileSelector:S=>{let y=S[YC];return m=!!y&&y!=="false",m},default:!1},{profile:o})();if(e.ec2MetadataV1Disabled||g){let S=[];throw e.ec2MetadataV1Disabled&&S.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),m&&S.push(`config file profile (${YC})`),f&&S.push(`process environment variable (${kl})`),new ua(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${S.join(", ")}].`)}}let u=(await ts(async()=>{let m;try{m=await bO(d)}catch(f){throw f.statusCode===401&&(t=!1),f}return m},c)).trim();return ts(async()=>{let m;try{m=await PO(u,d)}catch(f){throw f.statusCode===401&&(t=!1),f}return m},c)};return async()=>{let c=await pa();if(t)return r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...c,timeout:n});{let d;try{d=(await IO({...c,timeout:n})).toString()}catch(l){if((l==null?void 0:l.statusCode)===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...c,timeout:n})}return i(s,{...c,headers:{[XC]:d},timeout:n})}}},IO=async e=>Ur({...e,path:RO,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),bO=async e=>(await Ur({...e,path:QC})).toString(),PO=async(e,t)=>{let r=JSON.parse((await Ur({...t,path:QC+e})).toString());if(!ia(r))throw new C("Invalid response received from instance metadata service.");return aa(r)}});var ew=a(()=>{});var rs={};Ne(rs,{DEFAULT_MAX_RETRIES:()=>i6,DEFAULT_TIMEOUT:()=>s6,ENV_CMDS_AUTH_TOKEN:()=>bl,ENV_CMDS_FULL_URI:()=>da,ENV_CMDS_RELATIVE_URI:()=>la,Endpoint:()=>xo,fromContainerMetadata:()=>pO,fromInstanceMetadata:()=>vO,getInstanceMetadataEndpoint:()=>pa,httpRequest:()=>Ur,providerConfigFromInit:()=>es});var os=a(()=>{VC();ZC();ca();ew();sa();Nl();Pl()});var OO,NO,DO,tw,rw=a(()=>{F();OO="169.254.170.2",NO="169.254.170.23",DO="[fd00:ec2::23]",tw=e=>{if(e.protocol!=="https:"&&!(e.hostname===OO||e.hostname===NO||e.hostname===DO)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let t=e.hostname.split("."),r=o=>{let n=parseInt(o,10);return 0<=n&&n<=255};if(t[0]==="127"&&r(t[1])&&r(t[2])&&r(t[3])&&t.length===4)return}throw new C(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`)}}});function ow(e){return new H({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,o])=>(t[r]=o,t),{}),fragment:e.hash})}async function nw(e){let t=(e==null?void 0:e.headers["content-type"])??(e==null?void 0:e.headers["Content-Type"])??"";t.includes("json")||console.warn("HTTP credential provider response header content-type was not application/json. Observed: "+t+".");let o=await eE(e.body).transformToString();if(e.statusCode===200){let n=JSON.parse(o);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new C("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }");return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:pE(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(o)}catch{}throw Object.assign(new C(`Server responded with status: ${e.statusCode}`),{Code:n.Code,Message:n.Message})}throw new C(`Server responded with status: ${e.statusCode}`)}var sw=a(()=>{F();W();E();$d()});var iw,aw=a(()=>{iw=(e,t,r)=>async()=>{for(let o=0;o<t;++o)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()}});var cw,kO,$O,UO,LO,FO,dw,lw=a(()=>{ho();F();cw=at(require("fs/promises"));rw();sw();aw();kO="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",$O="http://169.254.170.2",UO="AWS_CONTAINER_CREDENTIALS_FULL_URI",LO="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",FO="AWS_CONTAINER_AUTHORIZATION_TOKEN",dw=e=>{var d;(d=e.logger)==null||d.debug("@aws-sdk/credential-provider-http","fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[kO],o=e.awsContainerCredentialsFullUri??process.env[UO],n=e.awsContainerAuthorizationToken??process.env[FO],s=e.awsContainerAuthorizationTokenFile??process.env[LO];if(r&&o&&(console.warn("AWS SDK HTTP credentials provider:","you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),console.warn("awsContainerCredentialsFullUri will take precedence.")),n&&s&&(console.warn("AWS SDK HTTP credentials provider:","you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),console.warn("awsContainerAuthorizationToken will take precedence.")),o)t=o;else if(r)t=`${$O}${r}`;else throw new C(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`);let i=new URL(t);tw(i);let c=new Ke({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return iw(async()=>{let l=ow(i);n?l.headers.Authorization=n:s&&(l.headers.Authorization=(await cw.default.readFile(s)).toString());try{let u=await c.handle(l);return nw(u.response)}catch(u){throw new C(String(u))}},e.maxRetries??3,e.timeout??1e3)}});var uw={};Ne(uw,{fromHttp:()=>dw});var pw=a(()=>{lw()});var MO,mw,fw=a(()=>{F();MO="AWS_EC2_METADATA_DISABLED",mw=async e=>{var s,i;let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:o,fromInstanceMetadata:n}=await Promise.resolve().then(()=>(os(),rs));if(process.env[r]||process.env[t]){(s=e.logger)==null||s.debug("@aws-sdk/credential-provider-node","remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:c}=await Promise.resolve().then(()=>(pw(),uw));return ao(c(e),o(e))}return process.env[MO]?async()=>{throw new C("EC2 Instance Metadata Service access disabled")}:((i=e.logger)==null||i.debug("@aws-sdk/credential-provider-node","remoteProvider::fromInstanceMetadata"),n(e))}});var $l,Ul=a(()=>{$l=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var Yo,ma=a(()=>{Yo="To refresh this SSO session run 'aws sso login' with the corresponding profile."});function HO(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Ll(e){return{schemeId:"smithy.api#noAuth"}}var hw,gw,yw,Fl=a(()=>{se();ve();hw=async(e,t,r)=>({operation:Ee(t).operation,region:await J(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});gw=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(Ll(e));break}case"RegisterClient":{t.push(Ll(e));break}case"StartDeviceAuthorization":{t.push(Ll(e));break}default:t.push(HO(e))}return t},yw=e=>({...kr(e)})});var Sw,Fr,Xo=a(()=>{Sw=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Fr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var xw,Ew=a(()=>{xw={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.575.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso-oidc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.575.0","@aws-sdk/core":"3.575.0","@aws-sdk/credential-provider-node":"3.575.0","@aws-sdk/middleware-host-header":"3.575.0","@aws-sdk/middleware-logger":"3.575.0","@aws-sdk/middleware-recursion-detection":"3.575.0","@aws-sdk/middleware-user-agent":"3.575.0","@aws-sdk/region-config-resolver":"3.575.0","@aws-sdk/types":"3.575.0","@aws-sdk/util-endpoints":"3.575.0","@aws-sdk/util-user-agent-browser":"3.575.0","@aws-sdk/util-user-agent-node":"3.575.0","@smithy/config-resolver":"^3.0.0","@smithy/core":"^2.0.0","@smithy/fetch-http-handler":"^3.0.0","@smithy/hash-node":"^3.0.0","@smithy/invalid-dependency":"^3.0.0","@smithy/middleware-content-length":"^3.0.0","@smithy/middleware-endpoint":"^3.0.0","@smithy/middleware-retry":"^3.0.0","@smithy/middleware-serde":"^3.0.0","@smithy/middleware-stack":"^3.0.0","@smithy/node-config-provider":"^3.0.0","@smithy/node-http-handler":"^3.0.0","@smithy/protocol-http":"^4.0.0","@smithy/smithy-client":"^3.0.0","@smithy/types":"^3.0.0","@smithy/url-parser":"^3.0.0","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.0","@smithy/util-defaults-mode-node":"^3.0.0","@smithy/util-endpoints":"^2.0.0","@smithy/util-middleware":"^3.0.0","@smithy/util-retry":"^3.0.0","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var Ml,Hl=a(()=>{Ml={isCrtAvailable:!1}});var Cw,ww=a(()=>{Hl();Cw=()=>Ml.isCrtAvailable?["md/crt-avail"]:null});var fa,ns,qO,BO,Mr,ss=a(()=>{gt();fa=require("os"),ns=require("process");ww();Hl();qO="AWS_SDK_UA_APP_ID",BO="sdk-ua-app-id",Mr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,fa.platform)()}`,(0,fa.release)()],["lang/js"],["md/nodejs",`${ns.versions.node}`]],o=Cw();o&&r.push(o),e&&r.push([`api/${e}`,t]),ns.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${ns.env.AWS_EXECUTION_ENV}`]);let n=O({environmentVariableSelector:i=>i[qO],configFileSelector:i=>i[BO],default:void 0})(),s;return async()=>{if(!s){let i=await n;s=i?[...r,[`app/${i}`]]:[...r]}return s}}});function _w(e,t){return Aw.Buffer.isBuffer(e)?e:typeof e=="string"?Go(e,t):ArrayBuffer.isView(e)?Vt(e.buffer,e.byteOffset,e.byteLength):Vt(e)}var Aw,ha,Tt,is=a(()=>{fo();Te();Aw=require("buffer"),ha=require("crypto"),Tt=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(St(_w(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,ha.createHmac)(this.algorithmIdentifier,_w(this.secret)):(0,ha.createHash)(this.algorithmIdentifier)}}});var ga,Hr,Rw=a(()=>{ga=require("fs"),Hr=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,ga.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,ga.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)}});var as=a(()=>{Rw()});var $w,Xe,Qe,en,vw,cs,Qo,Zo,Wt,Vl,ql,Tw,Iw,bw,Uw,Lw,Ye,Pw,Fw,Ow,Nw,Dw,kw,GO,Mw,Hw=a(()=>{$w="required",Xe="fn",Qe="argv",en="ref",vw="isSet",cs="booleanEquals",Qo="error",Zo="endpoint",Wt="tree",Vl="PartitionResult",ql="getAttr",Tw={[$w]:!1,type:"String"},Iw={[$w]:!0,default:!1,type:"Boolean"},bw={[en]:"Endpoint"},Uw={[Xe]:cs,[Qe]:[{[en]:"UseFIPS"},!0]},Lw={[Xe]:cs,[Qe]:[{[en]:"UseDualStack"},!0]},Ye={},Pw={[Xe]:ql,[Qe]:[{[en]:Vl},"supportsFIPS"]},Fw={[en]:Vl},Ow={[Xe]:cs,[Qe]:[!0,{[Xe]:ql,[Qe]:[Fw,"supportsDualStack"]}]},Nw=[Uw],Dw=[Lw],kw=[{[en]:"Region"}],GO={version:"1.0",parameters:{Region:Tw,UseDualStack:Iw,UseFIPS:Iw,Endpoint:Tw},rules:[{conditions:[{[Xe]:vw,[Qe]:[bw]}],rules:[{conditions:Nw,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Qo},{conditions:Dw,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Qo},{endpoint:{url:bw,properties:Ye,headers:Ye},type:Zo}],type:Wt},{conditions:[{[Xe]:vw,[Qe]:kw}],rules:[{conditions:[{[Xe]:"aws.partition",[Qe]:kw,assign:Vl}],rules:[{conditions:[Uw,Lw],rules:[{conditions:[{[Xe]:cs,[Qe]:[!0,Pw]},Ow],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ye,headers:Ye},type:Zo}],type:Wt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Qo}],type:Wt},{conditions:Nw,rules:[{conditions:[{[Xe]:cs,[Qe]:[Pw,!0]}],rules:[{conditions:[{[Xe]:"stringEquals",[Qe]:[{[Xe]:ql,[Qe]:[Fw,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Ye,headers:Ye},type:Zo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ye,headers:Ye},type:Zo}],type:Wt},{error:"FIPS is enabled but this partition does not support FIPS",type:Qo}],type:Wt},{conditions:Dw,rules:[{conditions:[Ow],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ye,headers:Ye},type:Zo}],type:Wt},{error:"DualStack is enabled but this partition does not support DualStack",type:Qo}],type:Wt},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ye,headers:Ye},type:Zo}],type:Wt}],type:Wt},{error:"Invalid Configuration: Missing Region",type:Qo}]},Mw=GO});var Vw,qw=a(()=>{Uo();mt();Hw();Vw=(e,t={})=>Mt(Mw,{endpointParams:e,logger:t.logger});Re.aws=Ht});var Bw,Gw=a(()=>{se();we();E();lo();Ar();Te();Fl();qw();Bw=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ge,base64Encoder:(e==null?void 0:e.base64Encoder)??We,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Vw,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??gw,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:(e==null?void 0:e.logger)??new qe,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??Ce,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ne,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ze})});var zw,Bl,Gl,Ww,jw,Kw,Jw=a(()=>{zw="AWS_EXECUTION_ENV",Bl="AWS_REGION",Gl="AWS_DEFAULT_REGION",Ww="AWS_EC2_METADATA_DISABLED",jw=["in-region","cross-region","mobile","standard","legacy"],Kw="/latest/meta-data/placement/region"});var zO,WO,Yw,Xw=a(()=>{zO="AWS_DEFAULTS_MODE",WO="defaults_mode",Yw={environmentVariableSelector:e=>e[zO],configFileSelector:e=>e[WO],default:"legacy"}});var Vr,jO,KO,Qw=a(()=>{ht();gt();F();Jw();Xw();Vr=({region:e=O(ft),defaultsMode:t=O(Yw)}={})=>co(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return jO(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${jw.join(", ")}, got ${r}`)}}),jO=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await KO();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},KO=async()=>{if(process.env[zw]&&(process.env[Bl]||process.env[Gl]))return process.env[Bl]??process.env[Gl];if(!process.env[Ww])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>(os(),rs)),r=await e();return(await t({...r,path:Kw})).toString()}catch{}}});var ds=a(()=>{Qw()});var Zw,e_=a(()=>{Ew();se();ya();ss();ht();is();wt();gt();ho();as();Ve();Gw();E();ds();E();Zw=e=>{Tr(process.version);let t=Vr(e),r=()=>t().then(vr),o=Bw(e);return Dr(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Hr,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Co,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Mr({serviceId:o.serviceId,clientVersion:xw.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??O(xr),region:(e==null?void 0:e.region)??O(ft,hr),requestHandler:Ke.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??O({...wr,default:async()=>(await r()).retryMode||yt}),sha256:(e==null?void 0:e.sha256)??Tt.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Et,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??O(mr),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??O(fr)}}});var qr,Br,t_=a(()=>{qr=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},Br=e=>({region:e.region()})});var r_=a(()=>{});var zl=a(()=>{});var o_=a(()=>{zl()});var n_=a(()=>{o_();zl()});var s_=a(()=>{r_();n_()});var ls=a(()=>{t_();s_()});var i_,a_,c_=a(()=>{i_=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},a_=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Sa,d_,l_=a(()=>{ls();W();E();c_();Sa=e=>e,d_=(e,t)=>{let r={...Sa(qr(e)),...Sa(Ir(e)),...Sa(nr(e)),...Sa(i_(e))};return t.forEach(o=>o.configure(r)),{...e,...Br(r),...br(r),...sr(r),...a_(r)}}});var us,jl=a(()=>{vn();Tn();In();Dn();ht();we();jn();U();wt();E();Fl();Xo();e_();l_();us=class extends Be{constructor(...[t]){let r=Zw(t||{}),o=Sw(r),n=gr(o),s=Sr(n),i=Cr(s),c=i,d=dr(c),l=yw(d),u=d_(l,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Pr(this.config)),this.middlewareStack.use(Nr(this.config)),this.middlewareStack.use(ir(this.config)),this.middlewareStack.use(ar(this.config)),this.middlewareStack.use(cr(this.config)),this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Er(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(Or(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return hw}getIdentityProviderConfigProvider(){return async t=>new _t({"aws.auth#sigv4":t.credentials})}}});var K,Ea=a(()=>{E();K=class e extends Ct{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var ps,ms,fs,hs,gs,ys,Ss,Es,xs,Cs,ws,_s,As,Rs,Kl,Jl,Yl,Xl,Ql,Zl,wo=a(()=>{E();Ea();ps=class e extends K{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ms=class e extends K{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},fs=class e extends K{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},hs=class e extends K{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},gs=class e extends K{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ys=class e extends K{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ss=class e extends K{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Es=class e extends K{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},xs=class e extends K{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Cs=class e extends K{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},ws=class e extends K{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},_s=class e extends K{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}},As=class e extends K{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Rs=class e extends K{constructor(t){super({name:"InvalidRedirectUriException",$fault:"client",...t}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Kl=e=>({...e,...e.clientSecret&&{clientSecret:N},...e.refreshToken&&{refreshToken:N},...e.codeVerifier&&{codeVerifier:N}}),Jl=e=>({...e,...e.accessToken&&{accessToken:N},...e.refreshToken&&{refreshToken:N},...e.idToken&&{idToken:N}}),Yl=e=>({...e,...e.refreshToken&&{refreshToken:N},...e.assertion&&{assertion:N},...e.subjectToken&&{subjectToken:N},...e.codeVerifier&&{codeVerifier:N}}),Xl=e=>({...e,...e.accessToken&&{accessToken:N},...e.refreshToken&&{refreshToken:N},...e.idToken&&{idToken:N}}),Ql=e=>({...e,...e.clientSecret&&{clientSecret:N}}),Zl=e=>({...e,...e.clientSecret&&{clientSecret:N}})});var u_,p_,m_,f_,h_,g_,y_,S_,xa,YO,XO,QO,ZO,eN,tN,rN,oN,nN,sN,iN,aN,cN,dN,lN,ee,uN,vs=a(()=>{se();we();E();wo();Ea();u_=async(e,t)=>{let r=Rt(e,t),o={"content-type":"application/json"};r.bp("/token");let n;return n=JSON.stringify(T(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>D(s)})),r.m("POST").h(o).b(n),r.build()},p_=async(e,t)=>{let r=Rt(e,t),o={"content-type":"application/json"};r.bp("/token");let n=P({[uN]:[,"t"]}),s;return s=JSON.stringify(T(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:i=>D(i),subjectToken:[],subjectTokenType:[]})),r.m("POST").h(o).q(n).b(s),r.build()},m_=async(e,t)=>{let r=Rt(e,t),o={"content-type":"application/json"};r.bp("/client/register");let n;return n=JSON.stringify(T(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:s=>D(s),issuerUrl:[],redirectUris:s=>D(s),scopes:s=>D(s)})),r.m("POST").h(o).b(n),r.build()},f_=async(e,t)=>{let r=Rt(e,t),o={"content-type":"application/json"};r.bp("/device_authorization");let n;return n=JSON.stringify(T(e,{clientId:[],clientSecret:[],startUrl:[]})),r.m("POST").h(o).b(n),r.build()},h_=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xa(e,t);let r=P({$metadata:ee(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{accessToken:h,expiresIn:Bt,idToken:h,refreshToken:h,tokenType:h});return Object.assign(r,n),r},g_=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xa(e,t);let r=P({$metadata:ee(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{accessToken:h,expiresIn:Bt,idToken:h,issuedTokenType:h,refreshToken:h,scope:D,tokenType:h});return Object.assign(r,n),r},y_=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xa(e,t);let r=P({$metadata:ee(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{authorizationEndpoint:h,clientId:h,clientIdIssuedAt:ji,clientSecret:h,clientSecretExpiresAt:ji,tokenEndpoint:h});return Object.assign(r,n),r},S_=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xa(e,t);let r=P({$metadata:ee(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{deviceCode:h,expiresIn:Bt,interval:Bt,userCode:h,verificationUri:h,verificationUriComplete:h});return Object.assign(r,n),r},xa=async(e,t)=>{let r={...e,body:await Ko(e.body,t)},o=Jo(e,r.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await XO(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await QO(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await ZO(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await eN(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await tN(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await oN(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await sN(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await aN(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await cN(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await dN(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await lN(r,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await iN(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await rN(r,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await nN(r,t);default:let n=r.body;return YO({output:e,parsedBody:n,errorCode:o})}},YO=Rr(K),XO=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new ps({$metadata:ee(e),...r});return b(s,e.body)},QO=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new ms({$metadata:ee(e),...r});return b(s,e.body)},ZO=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new fs({$metadata:ee(e),...r});return b(s,e.body)},eN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new hs({$metadata:ee(e),...r});return b(s,e.body)},tN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new gs({$metadata:ee(e),...r});return b(s,e.body)},rN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new As({$metadata:ee(e),...r});return b(s,e.body)},oN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new ys({$metadata:ee(e),...r});return b(s,e.body)},nN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new Rs({$metadata:ee(e),...r});return b(s,e.body)},sN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new Ss({$metadata:ee(e),...r});return b(s,e.body)},iN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{endpoint:h,error:h,error_description:h,region:h});Object.assign(r,n);let s=new _s({$metadata:ee(e),...r});return b(s,e.body)},aN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new Es({$metadata:ee(e),...r});return b(s,e.body)},cN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new xs({$metadata:ee(e),...r});return b(s,e.body)},dN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new Cs({$metadata:ee(e),...r});return b(s,e.body)},lN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{error:h,error_description:h});Object.assign(r,n);let s=new ws({$metadata:ee(e),...r});return b(s,e.body)},ee=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),uN="aws_iam"});var Ts,eu=a(()=>{U();M();E();Xo();wo();vs();Ts=class extends w.classBuilder().ep({...Fr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Kl,Jl).ser(u_).de(h_).build(){}});var Is,tu=a(()=>{U();M();E();Xo();wo();vs();Is=class extends w.classBuilder().ep({...Fr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateTokenWithIAM",{}).n("SSOOIDCClient","CreateTokenWithIAMCommand").f(Yl,Xl).ser(p_).de(g_).build(){}});var bs,ru=a(()=>{U();M();E();Xo();wo();vs();bs=class extends w.classBuilder().ep({...Fr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","RegisterClient",{}).n("SSOOIDCClient","RegisterClientCommand").f(void 0,Ql).ser(m_).de(y_).build(){}});var Ps,ou=a(()=>{U();M();E();Xo();wo();vs();Ps=class extends w.classBuilder().ep({...Fr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","StartDeviceAuthorization",{}).n("SSOOIDCClient","StartDeviceAuthorizationCommand").f(Zl,void 0).ser(f_).de(S_).build(){}});var pN,Ca,E_=a(()=>{E();eu();tu();ru();ou();jl();pN={CreateTokenCommand:Ts,CreateTokenWithIAMCommand:Is,RegisterClientCommand:bs,StartDeviceAuthorizationCommand:Ps},Ca=class extends us{};Wo(pN,Ca)});var x_=a(()=>{eu();tu();ru();ou()});var C_=a(()=>{wo()});var nu={};Ne(nu,{$Command:()=>w,AccessDeniedException:()=>ps,AuthorizationPendingException:()=>ms,CreateTokenCommand:()=>Ts,CreateTokenRequestFilterSensitiveLog:()=>Kl,CreateTokenResponseFilterSensitiveLog:()=>Jl,CreateTokenWithIAMCommand:()=>Is,CreateTokenWithIAMRequestFilterSensitiveLog:()=>Yl,CreateTokenWithIAMResponseFilterSensitiveLog:()=>Xl,ExpiredTokenException:()=>fs,InternalServerException:()=>hs,InvalidClientException:()=>gs,InvalidClientMetadataException:()=>As,InvalidGrantException:()=>ys,InvalidRedirectUriException:()=>Rs,InvalidRequestException:()=>Ss,InvalidRequestRegionException:()=>_s,InvalidScopeException:()=>Es,RegisterClientCommand:()=>bs,RegisterClientResponseFilterSensitiveLog:()=>Ql,SSOOIDC:()=>Ca,SSOOIDCClient:()=>us,SSOOIDCServiceException:()=>K,SlowDownException:()=>xs,StartDeviceAuthorizationCommand:()=>Ps,StartDeviceAuthorizationRequestFilterSensitiveLog:()=>Zl,UnauthorizedClientException:()=>Cs,UnsupportedGrantTypeException:()=>ws,__Client:()=>Be});var su=a(()=>{jl();E_();x_();C_();Ea()});var iu,w_,__=a(()=>{iu={},w_=async e=>{let{SSOOIDCClient:t}=await Promise.resolve().then(()=>(su(),nu));if(iu[e])return iu[e];let r=new t({region:e});return iu[e]=r,r}});var A_,R_=a(()=>{__();A_=async(e,t)=>{let{CreateTokenCommand:r}=await Promise.resolve().then(()=>(su(),nu));return(await w_(t)).send(new r({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))}});var au,v_=a(()=>{F();ma();au=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new xe(`Token is expired. ${Yo}`,!1)}});var Gr,T_=a(()=>{F();ma();Gr=(e,t,r=!1)=>{if(typeof t>"u")throw new xe(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Yo}`,!1)}});var I_,mN,b_,P_=a(()=>{lt();I_=require("fs"),{writeFile:mN}=I_.promises,b_=(e,t)=>{let r=wi(e),o=JSON.stringify(t,null,2);return mN(r,o)}});var O_,N_,D_=a(()=>{F();lt();ma();R_();v_();T_();P_();O_=new Date(0),N_=(e={})=>async()=>{var f;(f=e.logger)==null||f.debug("@aws-sdk/token-providers","fromSso");let t=await yr(e),r=Me(e),o=t[r];if(o){if(!o.sso_session)throw new xe(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new xe(`Profile '${r}' could not be found in shared credentials file.`,!1);let n=o.sso_session,i=(await vi(e))[n];if(!i)throw new xe(`Sso session '${n}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!i[g])throw new xe(`Sso session '${n}' is missing required property '${g}'.`,!1);let c=i.sso_start_url,d=i.sso_region,l;try{l=await _i(n)}catch{throw new xe(`The SSO session token associated with profile=${r} was not found or is invalid. ${Yo}`,!1)}Gr("accessToken",l.accessToken),Gr("expiresAt",l.expiresAt);let{accessToken:u,expiresAt:p}=l,m={token:u,expiration:new Date(p)};if(m.expiration.getTime()-Date.now()>3e5)return m;if(Date.now()-O_.getTime()<30*1e3)return au(m),m;Gr("clientId",l.clientId,!0),Gr("clientSecret",l.clientSecret,!0),Gr("refreshToken",l.refreshToken,!0);try{O_.setTime(Date.now());let g=await A_(l,d);Gr("accessToken",g.accessToken),Gr("expiresIn",g.expiresIn);let S=new Date(Date.now()+g.expiresIn*1e3);try{await b_(n,{...l,accessToken:g.accessToken,expiresAt:S.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:S}}catch{return au(m),m}}});var k_=a(()=>{F()});var $_=a(()=>{F()});var U_=a(()=>{D_();k_();$_()});function hN(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function wa(e){return{schemeId:"smithy.api#noAuth"}}var L_,F_,M_,cu=a(()=>{se();ve();L_=async(e,t,r)=>({operation:Ee(t).operation,region:await J(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});F_=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(wa(e));break}case"ListAccountRoles":{t.push(wa(e));break}case"ListAccounts":{t.push(wa(e));break}case"Logout":{t.push(wa(e));break}default:t.push(hN(e))}return t},M_=e=>({...kr(e)})});var H_,zr,tn=a(()=>{H_=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),zr={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var q_,V_=a(()=>{q_={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.575.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/core":"3.575.0","@aws-sdk/middleware-host-header":"3.575.0","@aws-sdk/middleware-logger":"3.575.0","@aws-sdk/middleware-recursion-detection":"3.575.0","@aws-sdk/middleware-user-agent":"3.575.0","@aws-sdk/region-config-resolver":"3.575.0","@aws-sdk/types":"3.575.0","@aws-sdk/util-endpoints":"3.575.0","@aws-sdk/util-user-agent-browser":"3.575.0","@aws-sdk/util-user-agent-node":"3.575.0","@smithy/config-resolver":"^3.0.0","@smithy/core":"^2.0.0","@smithy/fetch-http-handler":"^3.0.0","@smithy/hash-node":"^3.0.0","@smithy/invalid-dependency":"^3.0.0","@smithy/middleware-content-length":"^3.0.0","@smithy/middleware-endpoint":"^3.0.0","@smithy/middleware-retry":"^3.0.0","@smithy/middleware-serde":"^3.0.0","@smithy/middleware-stack":"^3.0.0","@smithy/node-config-provider":"^3.0.0","@smithy/node-http-handler":"^3.0.0","@smithy/protocol-http":"^4.0.0","@smithy/smithy-client":"^3.0.0","@smithy/types":"^3.0.0","@smithy/url-parser":"^3.0.0","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.0","@smithy/util-defaults-mode-node":"^3.0.0","@smithy/util-endpoints":"^2.0.0","@smithy/util-middleware":"^3.0.0","@smithy/util-retry":"^3.0.0","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Q_,et,tt,nn,B_,Os,rn,on,jt,du,lu,G_,z_,W_,Z_,eA,Ze,j_,tA,K_,J_,Y_,X_,yN,rA,oA=a(()=>{Q_="required",et="fn",tt="argv",nn="ref",B_="isSet",Os="booleanEquals",rn="error",on="endpoint",jt="tree",du="PartitionResult",lu="getAttr",G_={[Q_]:!1,type:"String"},z_={[Q_]:!0,default:!1,type:"Boolean"},W_={[nn]:"Endpoint"},Z_={[et]:Os,[tt]:[{[nn]:"UseFIPS"},!0]},eA={[et]:Os,[tt]:[{[nn]:"UseDualStack"},!0]},Ze={},j_={[et]:lu,[tt]:[{[nn]:du},"supportsFIPS"]},tA={[nn]:du},K_={[et]:Os,[tt]:[!0,{[et]:lu,[tt]:[tA,"supportsDualStack"]}]},J_=[Z_],Y_=[eA],X_=[{[nn]:"Region"}],yN={version:"1.0",parameters:{Region:G_,UseDualStack:z_,UseFIPS:z_,Endpoint:G_},rules:[{conditions:[{[et]:B_,[tt]:[W_]}],rules:[{conditions:J_,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:rn},{conditions:Y_,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:rn},{endpoint:{url:W_,properties:Ze,headers:Ze},type:on}],type:jt},{conditions:[{[et]:B_,[tt]:X_}],rules:[{conditions:[{[et]:"aws.partition",[tt]:X_,assign:du}],rules:[{conditions:[Z_,eA],rules:[{conditions:[{[et]:Os,[tt]:[!0,j_]},K_],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ze,headers:Ze},type:on}],type:jt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:rn}],type:jt},{conditions:J_,rules:[{conditions:[{[et]:Os,[tt]:[j_,!0]}],rules:[{conditions:[{[et]:"stringEquals",[tt]:[{[et]:lu,[tt]:[tA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ze,headers:Ze},type:on},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ze,headers:Ze},type:on}],type:jt},{error:"FIPS is enabled but this partition does not support FIPS",type:rn}],type:jt},{conditions:Y_,rules:[{conditions:[K_],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ze,headers:Ze},type:on}],type:jt},{error:"DualStack is enabled but this partition does not support DualStack",type:rn}],type:jt},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ze,headers:Ze},type:on}],type:jt}],type:jt},{error:"Invalid Configuration: Missing Region",type:rn}]},rA=yN});var nA,sA=a(()=>{Uo();mt();oA();nA=(e,t={})=>Mt(rA,{endpointParams:e,logger:t.logger});Re.aws=Ht});var iA,aA=a(()=>{se();we();E();lo();Ar();Te();cu();sA();iA=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ge,base64Encoder:(e==null?void 0:e.base64Encoder)??We,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??nA,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??F_,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:(e==null?void 0:e.logger)??new qe,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??Ce,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ne,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ze})});var cA,dA=a(()=>{V_();se();ss();ht();is();wt();gt();ho();as();Ve();aA();E();ds();E();cA=e=>{Tr(process.version);let t=Vr(e),r=()=>t().then(vr),o=iA(e);return Dr(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Hr,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Mr({serviceId:o.serviceId,clientVersion:q_.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??O(xr),region:(e==null?void 0:e.region)??O(ft,hr),requestHandler:Ke.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??O({...wr,default:async()=>(await r()).retryMode||yt}),sha256:(e==null?void 0:e.sha256)??Tt.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Et,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??O(mr),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??O(fr)}}});var lA,uA,pA=a(()=>{lA=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},uA=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var _a,mA,fA=a(()=>{ls();W();E();pA();_a=e=>e,mA=(e,t)=>{let r={..._a(qr(e)),..._a(Ir(e)),..._a(nr(e)),..._a(lA(e))};return t.forEach(o=>o.configure(r)),{...e,...Br(r),...br(r),...sr(r),...uA(r)}}});var It,Ns=a(()=>{vn();Tn();In();Dn();ht();we();jn();U();wt();E();cu();tn();dA();fA();It=class extends Be{constructor(...[t]){let r=cA(t||{}),o=H_(r),n=gr(o),s=Sr(n),i=Cr(s),c=i,d=dr(c),l=M_(d),u=mA(l,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Pr(this.config)),this.middlewareStack.use(Nr(this.config)),this.middlewareStack.use(ir(this.config)),this.middlewareStack.use(ar(this.config)),this.middlewareStack.use(cr(this.config)),this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Er(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(Or(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return L_}getIdentityProviderConfigProvider(){return async t=>new _t({"aws.auth#sigv4":t.credentials})}}});var Kt,uu=a(()=>{E();Kt=class e extends Ct{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Aa,Ra,va,Ta,hA,SN,gA,yA,SA,EA,_o=a(()=>{E();uu();Aa=class e extends Kt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ra=class e extends Kt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},va=class e extends Kt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ta=class e extends Kt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},hA=e=>({...e,...e.accessToken&&{accessToken:N}}),SN=e=>({...e,...e.secretAccessKey&&{secretAccessKey:N},...e.sessionToken&&{sessionToken:N}}),gA=e=>({...e,...e.roleCredentials&&{roleCredentials:SN(e.roleCredentials)}}),yA=e=>({...e,...e.accessToken&&{accessToken:N}}),SA=e=>({...e,...e.accessToken&&{accessToken:N}}),EA=e=>({...e,...e.accessToken&&{accessToken:N}})});var xA,CA,wA,_A,AA,RA,vA,TA,Ia,EN,xN,CN,wN,_N,Wr,ba,IA,Pa,bA,PA,OA,NA,DA,AN,RN,Oa,Ds=a(()=>{se();we();E();_o();uu();xA=async(e,t)=>{let r=Rt(e,t),o=P({},ba,{[Oa]:e[Pa]});r.bp("/federation/credentials");let n=P({[RN]:[,B(e[AN],"roleName")],[bA]:[,B(e[IA],"accountId")]}),s;return r.m("GET").h(o).q(n).b(s),r.build()},CA=async(e,t)=>{let r=Rt(e,t),o=P({},ba,{[Oa]:e[Pa]});r.bp("/assignment/roles");let n=P({[DA]:[,e[NA]],[OA]:[()=>e.maxResults!==void 0,()=>e[PA].toString()],[bA]:[,B(e[IA],"accountId")]}),s;return r.m("GET").h(o).q(n).b(s),r.build()},wA=async(e,t)=>{let r=Rt(e,t),o=P({},ba,{[Oa]:e[Pa]});r.bp("/assignment/accounts");let n=P({[DA]:[,e[NA]],[OA]:[()=>e.maxResults!==void 0,()=>e[PA].toString()]}),s;return r.m("GET").h(o).q(n).b(s),r.build()},_A=async(e,t)=>{let r=Rt(e,t),o=P({},ba,{[Oa]:e[Pa]});r.bp("/logout");let n;return r.m("POST").h(o).b(n),r.build()},AA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ia(e,t);let r=P({$metadata:Wr(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{roleCredentials:D});return Object.assign(r,n),r},RA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ia(e,t);let r=P({$metadata:Wr(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{nextToken:h,roleList:D});return Object.assign(r,n),r},vA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ia(e,t);let r=P({$metadata:Wr(e)}),o=B(Gt(await Z(e.body,t)),"body"),n=T(o,{accountList:D,nextToken:h});return Object.assign(r,n),r},TA=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ia(e,t);let r=P({$metadata:Wr(e)});return await go(e.body,t),r},Ia=async(e,t)=>{let r={...e,body:await Ko(e.body,t)},o=Jo(e,r.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await xN(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await CN(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await wN(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await _N(r,t);default:let n=r.body;return EN({output:e,parsedBody:n,errorCode:o})}},EN=Rr(Kt),xN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{message:h});Object.assign(r,n);let s=new Aa({$metadata:Wr(e),...r});return b(s,e.body)},CN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{message:h});Object.assign(r,n);let s=new Ra({$metadata:Wr(e),...r});return b(s,e.body)},wN=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{message:h});Object.assign(r,n);let s=new va({$metadata:Wr(e),...r});return b(s,e.body)},_N=async(e,t)=>{let r=P({}),o=e.body,n=T(o,{message:h});Object.assign(r,n);let s=new Ta({$metadata:Wr(e),...r});return b(s,e.body)},Wr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ba=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),IA="accountId",Pa="accessToken",bA="account_id",PA="maxResults",OA="max_result",NA="nextToken",DA="next_token",AN="roleName",RN="role_name",Oa="x-amz-sso_bearer_token"});var sn,pu=a(()=>{U();M();E();tn();_o();Ds();sn=class extends w.classBuilder().ep({...zr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(hA,gA).ser(xA).de(AA).build(){}});var an,Na=a(()=>{U();M();E();tn();_o();Ds();an=class extends w.classBuilder().ep({...zr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(yA,void 0).ser(CA).de(RA).build(){}});var cn,Da=a(()=>{U();M();E();tn();_o();Ds();cn=class extends w.classBuilder().ep({...zr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(SA,void 0).ser(wA).de(vA).build(){}});var ka,mu=a(()=>{U();M();E();tn();_o();Ds();ka=class extends w.classBuilder().ep({...zr}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(EA,void 0).ser(_A).de(TA).build(){}});var vN,fu,kA=a(()=>{E();pu();Na();Da();mu();Ns();vN={GetRoleCredentialsCommand:sn,ListAccountRolesCommand:an,ListAccountsCommand:cn,LogoutCommand:ka},fu=class extends It{};Wo(vN,fu)});var $A=a(()=>{pu();Na();Da();mu()});var UA=a(()=>{});var NY,LA=a(()=>{we();Na();Ns();NY=Wn(It,an,"nextToken","nextToken","maxResults")});var LY,FA=a(()=>{we();Da();Ns();LY=Wn(It,cn,"nextToken","nextToken","maxResults")});var MA=a(()=>{UA();LA();FA()});var HA=a(()=>{_o()});var VA=a(()=>{Ns();kA();$A();MA();HA()});var qA={};Ne(qA,{GetRoleCredentialsCommand:()=>sn,SSOClient:()=>It});var BA=a(()=>{VA()});var ks,hu,GA=a(()=>{U_();F();lt();ks=!1,hu=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:s,clientConfig:i,profile:c})=>{let d,l="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let j=await N_({profile:c})();d={accessToken:j.token,expiresAt:new Date(j.expiration).toISOString()}}catch(j){throw new C(j.message,ks)}else try{d=await _i(e)}catch{throw new C(`The SSO session associated with this profile is invalid. ${l}`,ks)}if(new Date(d.expiresAt).getTime()-Date.now()<=0)throw new C(`The SSO session associated with this profile has expired. ${l}`,ks);let{accessToken:u}=d,{SSOClient:p,GetRoleCredentialsCommand:m}=await Promise.resolve().then(()=>(BA(),qA)),f=s||new p(Object.assign({},i??{},{region:(i==null?void 0:i.region)??o})),g;try{g=await f.send(new m({accountId:r,roleName:n,accessToken:u}))}catch(j){throw C.from(j,ks)}let{roleCredentials:{accessKeyId:S,secretAccessKey:y,sessionToken:v,expiration:_,credentialScope:te}={}}=g;if(!S||!y||!v||!_)throw new C("SSO returns an invalid temporary credential.",ks);return{accessKeyId:S,secretAccessKey:y,sessionToken:v,expiration:new Date(_),credentialScope:te}}});var gu,yu=a(()=>{F();gu=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:o,sso_role_name:n}=e;if(!t||!r||!o||!n)throw new C(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e}});var TN,zA=a(()=>{F();lt();Ul();GA();yu();TN=(e={})=>async()=>{var d;(d=e.logger)==null||d.debug("@aws-sdk/credential-provider-sso","fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoSession:s}=e,{ssoClient:i}=e,c=Me(e);if(!t&&!r&&!o&&!n&&!s){let u=(await yr(e))[c];if(!u)throw new C(`Profile ${c} was not found.`);if(!$l(u))throw new C(`Profile ${c} is not configured with SSO credentials.`);if(u!=null&&u.sso_session){let v=(await vi(e))[u.sso_session],_=` configurations in profile ${c} and sso-session ${u.sso_session}`;if(o&&o!==v.sso_region)throw new C("Conflicting SSO region"+_,!1);if(t&&t!==v.sso_start_url)throw new C("Conflicting SSO start_url"+_,!1);u.sso_region=v.sso_region,u.sso_start_url=v.sso_start_url}let{sso_start_url:p,sso_account_id:m,sso_region:f,sso_role_name:g,sso_session:S}=gu(u);return hu({ssoStartUrl:p,ssoSession:S,ssoAccountId:m,ssoRegion:f,ssoRoleName:g,ssoClient:i,clientConfig:e.clientConfig,profile:c})}else{if(!t||!r||!o||!n)throw new C('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return hu({ssoStartUrl:t,ssoSession:s,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoClient:i,clientConfig:e.clientConfig,profile:c})}}});var WA=a(()=>{});var Su={};Ne(Su,{fromSSO:()=>TN,isSsoProfile:()=>$l,validateSsoProfile:()=>gu});var Eu=a(()=>{zA();Ul();WA();yu()});var jA,KA=a(()=>{F();jA=(e,t)=>{let r={EcsContainer:o=>Promise.resolve().then(()=>(os(),rs)).then(({fromContainerMetadata:n})=>n(o)),Ec2InstanceMetadata:o=>Promise.resolve().then(()=>(os(),rs)).then(({fromInstanceMetadata:n})=>n(o)),Environment:o=>Promise.resolve().then(()=>(vl(),LC)).then(({fromEnv:n})=>n(o))};if(e in r)return r[e];throw new C(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)}});function IN(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function JA(e){return{schemeId:"smithy.api#noAuth"}}var YA,XA,bN,QA,xu=a(()=>{se();ve();$s();YA=async(e,t,r)=>({operation:Ee(t).operation,region:await J(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});XA=e=>{let t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(JA(e));break}case"AssumeRoleWithWebIdentity":{t.push(JA(e));break}default:t.push(IN(e))}return t},bN=e=>({...e,stsClientCtor:bt}),QA=e=>{let t=bN(e);return{...kr(t)}}});var ZA,de,Pt=a(()=>{ZA=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),de={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var tR,eR=a(()=>{tR={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.575.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sso-oidc":"3.575.0","@aws-sdk/core":"3.575.0","@aws-sdk/credential-provider-node":"3.575.0","@aws-sdk/middleware-host-header":"3.575.0","@aws-sdk/middleware-logger":"3.575.0","@aws-sdk/middleware-recursion-detection":"3.575.0","@aws-sdk/middleware-user-agent":"3.575.0","@aws-sdk/region-config-resolver":"3.575.0","@aws-sdk/types":"3.575.0","@aws-sdk/util-endpoints":"3.575.0","@aws-sdk/util-user-agent-browser":"3.575.0","@aws-sdk/util-user-agent-node":"3.575.0","@smithy/config-resolver":"^3.0.0","@smithy/core":"^2.0.0","@smithy/fetch-http-handler":"^3.0.0","@smithy/hash-node":"^3.0.0","@smithy/invalid-dependency":"^3.0.0","@smithy/middleware-content-length":"^3.0.0","@smithy/middleware-endpoint":"^3.0.0","@smithy/middleware-retry":"^3.0.0","@smithy/middleware-serde":"^3.0.0","@smithy/middleware-stack":"^3.0.0","@smithy/node-config-provider":"^3.0.0","@smithy/node-http-handler":"^3.0.0","@smithy/protocol-http":"^4.0.0","@smithy/smithy-client":"^3.0.0","@smithy/types":"^3.0.0","@smithy/url-parser":"^3.0.0","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.0","@smithy/util-defaults-mode-node":"^3.0.0","@smithy/util-endpoints":"^2.0.0","@smithy/util-middleware":"^3.0.0","@smithy/util-retry":"^3.0.0","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var pR,I,k,$,Kr,jr,ie,mR,fR,hR,G,rR,Ot,dn,wu,oR,Cu,gR,nR,ae,sR,yR,SR,le,Pe,iR,ER,xR,aR,CR,cR,dR,lR,uR,ON,wR,_R=a(()=>{pR="required",I="type",k="fn",$="argv",Kr="ref",jr="booleanEquals",ie="stringEquals",mR="sigv4",fR="sts",hR="us-east-1",G="endpoint",rR="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ot="tree",dn="error",wu="getAttr",oR={[pR]:!1,[I]:"String"},Cu={[pR]:!0,default:!1,[I]:"Boolean"},gR={[Kr]:"Endpoint"},nR={[k]:"isSet",[$]:[{[Kr]:"Region"}]},ae={[Kr]:"Region"},sR={[k]:"aws.partition",[$]:[ae],assign:"PartitionResult"},yR={[Kr]:"UseFIPS"},SR={[Kr]:"UseDualStack"},le={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:mR,signingName:fR,signingRegion:hR}]},headers:{}},Pe={},iR={conditions:[{[k]:ie,[$]:[ae,"aws-global"]}],[G]:le,[I]:G},ER={[k]:jr,[$]:[yR,!0]},xR={[k]:jr,[$]:[SR,!0]},aR={[k]:wu,[$]:[{[Kr]:"PartitionResult"},"supportsFIPS"]},CR={[Kr]:"PartitionResult"},cR={[k]:jr,[$]:[!0,{[k]:wu,[$]:[CR,"supportsDualStack"]}]},dR=[{[k]:"isSet",[$]:[gR]}],lR=[ER],uR=[xR],ON={version:"1.0",parameters:{Region:oR,UseDualStack:Cu,UseFIPS:Cu,Endpoint:oR,UseGlobalEndpoint:Cu},rules:[{conditions:[{[k]:jr,[$]:[{[Kr]:"UseGlobalEndpoint"},!0]},{[k]:"not",[$]:dR},nR,sR,{[k]:jr,[$]:[yR,!1]},{[k]:jr,[$]:[SR,!1]}],rules:[{conditions:[{[k]:ie,[$]:[ae,"ap-northeast-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"ap-south-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"ap-southeast-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"ap-southeast-2"]}],endpoint:le,[I]:G},iR,{conditions:[{[k]:ie,[$]:[ae,"ca-central-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"eu-central-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"eu-north-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"eu-west-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"eu-west-2"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"eu-west-3"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"sa-east-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,hR]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"us-east-2"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"us-west-1"]}],endpoint:le,[I]:G},{conditions:[{[k]:ie,[$]:[ae,"us-west-2"]}],endpoint:le,[I]:G},{endpoint:{url:rR,properties:{authSchemes:[{name:mR,signingName:fR,signingRegion:"{Region}"}]},headers:Pe},[I]:G}],[I]:Ot},{conditions:dR,rules:[{conditions:lR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[I]:dn},{conditions:uR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[I]:dn},{endpoint:{url:gR,properties:Pe,headers:Pe},[I]:G}],[I]:Ot},{conditions:[nR],rules:[{conditions:[sR],rules:[{conditions:[ER,xR],rules:[{conditions:[{[k]:jr,[$]:[!0,aR]},cR],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},[I]:G}],[I]:Ot},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[I]:dn}],[I]:Ot},{conditions:lR,rules:[{conditions:[{[k]:jr,[$]:[aR,!0]}],rules:[{conditions:[{[k]:ie,[$]:[{[k]:wu,[$]:[CR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Pe,headers:Pe},[I]:G},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},[I]:G}],[I]:Ot},{error:"FIPS is enabled but this partition does not support FIPS",[I]:dn}],[I]:Ot},{conditions:uR,rules:[{conditions:[cR],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},[I]:G}],[I]:Ot},{error:"DualStack is enabled but this partition does not support DualStack",[I]:dn}],[I]:Ot},iR,{endpoint:{url:rR,properties:Pe,headers:Pe},[I]:G}],[I]:Ot}],[I]:Ot},{error:"Invalid Configuration: Missing Region",[I]:dn}]},wR=ON});var AR,RR=a(()=>{Uo();mt();_R();AR=(e,t={})=>Mt(wR,{endpointParams:e,logger:t.logger});Re.aws=Ht});var vR,TR=a(()=>{se();we();E();lo();Ar();Te();xu();RR();vR=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ge,base64Encoder:(e==null?void 0:e.base64Encoder)??We,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??AR,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??XA,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],logger:(e==null?void 0:e.logger)??new qe,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??Ce,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ne,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ze})});var IR,bR=a(()=>{eR();se();ya();ss();ht();we();is();wt();gt();ho();as();Ve();TR();E();ds();E();IR=e=>{Tr(process.version);let t=Vr(e),r=()=>t().then(vr),o=vR(e);return Dr(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Hr,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Co,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Mr({serviceId:o.serviceId,clientVersion:tR.version}),httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4")||(async s=>await Co((s==null?void 0:s.__config)||{})()),signer:new Je},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new At}],maxAttempts:(e==null?void 0:e.maxAttempts)??O(xr),region:(e==null?void 0:e.region)??O(ft,hr),requestHandler:Ke.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??O({...wr,default:async()=>(await r()).retryMode||yt}),sha256:(e==null?void 0:e.sha256)??Tt.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Et,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??O(mr),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??O(fr)}}});var PR,OR,NR=a(()=>{PR=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},OR=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var $a,DR,kR=a(()=>{ls();W();E();NR();$a=e=>e,DR=(e,t)=>{let r={...$a(qr(e)),...$a(Ir(e)),...$a(nr(e)),...$a(PR(e))};return t.forEach(o=>o.configure(r)),{...e,...Br(r),...br(r),...sr(r),...OR(r)}}});var bt,$s=a(()=>{vn();Tn();In();Dn();ht();we();jn();U();wt();E();xu();Pt();bR();kR();bt=class extends Be{constructor(...[t]){let r=IR(t||{}),o=ZA(r),n=gr(o),s=Sr(n),i=Cr(s),c=i,d=dr(c),l=QA(d),u=DR(l,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Pr(this.config)),this.middlewareStack.use(Nr(this.config)),this.middlewareStack.use(ir(this.config)),this.middlewareStack.use(ar(this.config)),this.middlewareStack.use(cr(this.config)),this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Er(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(Or(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return YA}getIdentityProviderConfigProvider(){return async t=>new _t({"aws.auth#sigv4":t.credentials})}}});var fe,Ua=a(()=>{E();fe=class e extends Ct{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Us,Ls,Fs,Ms,Hs,Vs,qs,Bs,ln,_u,Au,Ru,vu,Tu,Iu,bu,Jr=a(()=>{E();Ua();Us=class e extends fe{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ls=class e extends fe{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Fs=class e extends fe{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ms=class e extends fe{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Hs=class e extends fe{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Vs=class e extends fe{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},qs=class e extends fe{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Bs=class e extends fe{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ln=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:N}}),_u=e=>({...e,...e.Credentials&&{Credentials:ln(e.Credentials)}}),Au=e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:N}}),Ru=e=>({...e,...e.Credentials&&{Credentials:ln(e.Credentials)}}),vu=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:N}}),Tu=e=>({...e,...e.Credentials&&{Credentials:ln(e.Credentials)}}),Iu=e=>({...e,...e.Credentials&&{Credentials:ln(e.Credentials)}}),bu=e=>({...e,...e.Credentials&&{Credentials:ln(e.Credentials)}})});var $R,UR,LR,FR,MR,HR,VR,qR,BR,GR,zR,WR,jR,KR,JR,YR,Yr,NN,DN,kN,$N,UN,LN,FN,MN,HN,VN,qN,BN,GN,zN,WN,jN,La,KN,JN,YN,XN,QN,XR,np,ZN,eD,tD,Gs,rD,oD,nD,sD,iD,aD,cD,dD,lD,uD,pD,mD,fD,hD,ue,gD,Xr,Qr,Zr,eo,un,yD,Pu,Jt,SD,ED,pn,Yt,mn,he,Ou,xD,Nu,ge,Du,ku,$u,Uu,Lu,CD,wD,_D,AD,Fu,Mu,Hu,Vu,rt,ot,qu,Bu,Gu,zu,nt,Wu,Xt,fn,ju,Ku,Ju,Yu,st,hn,Xu,Qu,gn,yn,Zu,ep,to,tp,rp,op,z,ro,RD,Qt=a(()=>{se();W();E();Jr();Ua();$R=async(e,t)=>{let r=Qr,o;return o=ro({...HN(e,t),[eo]:yD,[to]:Zr}),Xr(t,r,"/",void 0,o)},UR=async(e,t)=>{let r=Qr,o;return o=ro({...VN(e,t),[eo]:SD,[to]:Zr}),Xr(t,r,"/",void 0,o)},LR=async(e,t)=>{let r=Qr,o;return o=ro({...qN(e,t),[eo]:ED,[to]:Zr}),Xr(t,r,"/",void 0,o)},FR=async(e,t)=>{let r=Qr,o;return o=ro({...BN(e,t),[eo]:xD,[to]:Zr}),Xr(t,r,"/",void 0,o)},MR=async(e,t)=>{let r=Qr,o;return o=ro({...GN(e,t),[eo]:CD,[to]:Zr}),Xr(t,r,"/",void 0,o)},HR=async(e,t)=>{let r=Qr,o;return o=ro({...zN(e,t),[eo]:wD,[to]:Zr}),Xr(t,r,"/",void 0,o)},VR=async(e,t)=>{let r=Qr,o;return o=ro({...WN(e,t),[eo]:_D,[to]:Zr}),Xr(t,r,"/",void 0,o)},qR=async(e,t)=>{let r=Qr,o;return o=ro({...jN(e,t),[eo]:AD,[to]:Zr}),Xr(t,r,"/",void 0,o)},BR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=ZN(r.AssumeRoleResult,t),{$metadata:ue(e),...o}},GR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=eD(r.AssumeRoleWithSAMLResult,t),{$metadata:ue(e),...o}},zR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=tD(r.AssumeRoleWithWebIdentityResult,t),{$metadata:ue(e),...o}},WR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=rD(r.DecodeAuthorizationMessageResult,t),{$metadata:ue(e),...o}},jR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=sD(r.GetAccessKeyInfoResult,t),{$metadata:ue(e),...o}},KR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=iD(r.GetCallerIdentityResult,t),{$metadata:ue(e),...o}},JR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=aD(r.GetFederationTokenResult,t),{$metadata:ue(e),...o}},YR=async(e,t)=>{if(e.statusCode>=300)return Yr(e,t);let r=await vt(e.body,t),o={};return o=cD(r.GetSessionTokenResult,t),{$metadata:ue(e),...o}},Yr=async(e,t)=>{let r={...e,body:await _C(e.body,t)},o=RD(e,r.body);switch(o){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await NN(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await LN(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await FN(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await MN(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await kN(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await UN(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await DN(r,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await $N(r,t);default:let n=r.body;return gD({output:e,parsedBody:n.Error,errorCode:o})}},NN=async(e,t)=>{let r=e.body,o=oD(r.Error,t),n=new Us({$metadata:ue(e),...o});return b(n,r)},DN=async(e,t)=>{let r=e.body,o=dD(r.Error,t),n=new qs({$metadata:ue(e),...o});return b(n,r)},kN=async(e,t)=>{let r=e.body,o=lD(r.Error,t),n=new Hs({$metadata:ue(e),...o});return b(n,r)},$N=async(e,t)=>{let r=e.body,o=uD(r.Error,t),n=new Bs({$metadata:ue(e),...o});return b(n,r)},UN=async(e,t)=>{let r=e.body,o=pD(r.Error,t),n=new Vs({$metadata:ue(e),...o});return b(n,r)},LN=async(e,t)=>{let r=e.body,o=mD(r.Error,t),n=new Ls({$metadata:ue(e),...o});return b(n,r)},FN=async(e,t)=>{let r=e.body,o=fD(r.Error,t),n=new Fs({$metadata:ue(e),...o});return b(n,r)},MN=async(e,t)=>{let r=e.body,o=hD(r.Error,t),n=new Ms({$metadata:ue(e),...o});return b(n,r)},HN=(e,t)=>{var o,n,s,i;let r={};if(e[Xt]!=null&&(r[Xt]=e[Xt]),e[fn]!=null&&(r[fn]=e[fn]),e[ot]!=null){let c=La(e[ot],t);((o=e[ot])==null?void 0:o.length)===0&&(r.PolicyArns=[]),Object.entries(c).forEach(([d,l])=>{let u=`PolicyArns.${d}`;r[u]=l})}if(e[rt]!=null&&(r[rt]=e[rt]),e[ge]!=null&&(r[ge]=e[ge]),e[gn]!=null){let c=XR(e[gn],t);((n=e[gn])==null?void 0:n.length)===0&&(r.Tags=[]),Object.entries(c).forEach(([d,l])=>{let u=`Tags.${d}`;r[u]=l})}if(e[Zu]!=null){let c=QN(e[Zu],t);((s=e[Zu])==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(c).forEach(([d,l])=>{let u=`TransitiveTagKeys.${d}`;r[u]=l})}if(e[ku]!=null&&(r[ku]=e[ku]),e[hn]!=null&&(r[hn]=e[hn]),e[yn]!=null&&(r[yn]=e[yn]),e[st]!=null&&(r[st]=e[st]),e[Gu]!=null){let c=YN(e[Gu],t);((i=e[Gu])==null?void 0:i.length)===0&&(r.ProvidedContexts=[]),Object.entries(c).forEach(([d,l])=>{let u=`ProvidedContexts.${d}`;r[u]=l})}return r},VN=(e,t)=>{var o;let r={};if(e[Xt]!=null&&(r[Xt]=e[Xt]),e[qu]!=null&&(r[qu]=e[qu]),e[Ju]!=null&&(r[Ju]=e[Ju]),e[ot]!=null){let n=La(e[ot],t);((o=e[ot])==null?void 0:o.length)===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let c=`PolicyArns.${s}`;r[c]=i})}return e[rt]!=null&&(r[rt]=e[rt]),e[ge]!=null&&(r[ge]=e[ge]),r},qN=(e,t)=>{var o;let r={};if(e[Xt]!=null&&(r[Xt]=e[Xt]),e[fn]!=null&&(r[fn]=e[fn]),e[rp]!=null&&(r[rp]=e[rp]),e[zu]!=null&&(r[zu]=e[zu]),e[ot]!=null){let n=La(e[ot],t);((o=e[ot])==null?void 0:o.length)===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let c=`PolicyArns.${s}`;r[c]=i})}return e[rt]!=null&&(r[rt]=e[rt]),e[ge]!=null&&(r[ge]=e[ge]),r},BN=(e,t)=>{let r={};return e[$u]!=null&&(r[$u]=e[$u]),r},GN=(e,t)=>{let r={};return e[un]!=null&&(r[un]=e[un]),r},zN=(e,t)=>({}),WN=(e,t)=>{var o,n;let r={};if(e[Hu]!=null&&(r[Hu]=e[Hu]),e[rt]!=null&&(r[rt]=e[rt]),e[ot]!=null){let s=La(e[ot],t);((o=e[ot])==null?void 0:o.length)===0&&(r.PolicyArns=[]),Object.entries(s).forEach(([i,c])=>{let d=`PolicyArns.${i}`;r[d]=c})}if(e[ge]!=null&&(r[ge]=e[ge]),e[gn]!=null){let s=XR(e[gn],t);((n=e[gn])==null?void 0:n.length)===0&&(r.Tags=[]),Object.entries(s).forEach(([i,c])=>{let d=`Tags.${i}`;r[d]=c})}return r},jN=(e,t)=>{let r={};return e[ge]!=null&&(r[ge]=e[ge]),e[hn]!=null&&(r[hn]=e[hn]),e[yn]!=null&&(r[yn]=e[yn]),r},La=(e,t)=>{let r={},o=1;for(let n of e){if(n===null)continue;let s=KN(n,t);Object.entries(s).forEach(([i,c])=>{r[`member.${o}.${i}`]=c}),o++}return r},KN=(e,t)=>{let r={};return e[op]!=null&&(r[op]=e[op]),r},JN=(e,t)=>{let r={};return e[Bu]!=null&&(r[Bu]=e[Bu]),e[Ou]!=null&&(r[Ou]=e[Ou]),r},YN=(e,t)=>{let r={},o=1;for(let n of e){if(n===null)continue;let s=JN(n,t);Object.entries(s).forEach(([i,c])=>{r[`member.${o}.${i}`]=c}),o++}return r},XN=(e,t)=>{let r={};return e[Mu]!=null&&(r[Mu]=e[Mu]),e[tp]!=null&&(r[tp]=e[tp]),r},QN=(e,t)=>{let r={},o=1;for(let n of e)n!==null&&(r[`member.${o}`]=n,o++);return r},XR=(e,t)=>{let r={},o=1;for(let n of e){if(n===null)continue;let s=XN(n,t);Object.entries(s).forEach(([i,c])=>{r[`member.${o}.${i}`]=c}),o++}return r},np=(e,t)=>{let r={};return e[Pu]!=null&&(r[Pu]=h(e[Pu])),e[Yt]!=null&&(r[Yt]=h(e[Yt])),r},ZN=(e,t)=>{let r={};return e[he]!=null&&(r[he]=Gs(e[he],t)),e[Jt]!=null&&(r[Jt]=np(e[Jt],t)),e[nt]!=null&&(r[nt]=Gn(e[nt])),e[st]!=null&&(r[st]=h(e[st])),r},eD=(e,t)=>{let r={};return e[he]!=null&&(r[he]=Gs(e[he],t)),e[Jt]!=null&&(r[Jt]=np(e[Jt],t)),e[nt]!=null&&(r[nt]=Gn(e[nt])),e[ju]!=null&&(r[ju]=h(e[ju])),e[Xu]!=null&&(r[Xu]=h(e[Xu])),e[Fu]!=null&&(r[Fu]=h(e[Fu])),e[mn]!=null&&(r[mn]=h(e[mn])),e[Vu]!=null&&(r[Vu]=h(e[Vu])),e[st]!=null&&(r[st]=h(e[st])),r},tD=(e,t)=>{let r={};return e[he]!=null&&(r[he]=Gs(e[he],t)),e[Yu]!=null&&(r[Yu]=h(e[Yu])),e[Jt]!=null&&(r[Jt]=np(e[Jt],t)),e[nt]!=null&&(r[nt]=Gn(e[nt])),e[Wu]!=null&&(r[Wu]=h(e[Wu])),e[mn]!=null&&(r[mn]=h(e[mn])),e[st]!=null&&(r[st]=h(e[st])),r},Gs=(e,t)=>{let r={};return e[un]!=null&&(r[un]=h(e[un])),e[Ku]!=null&&(r[Ku]=h(e[Ku])),e[Qu]!=null&&(r[Qu]=h(e[Qu])),e[Du]!=null&&(r[Du]=B(mE(e[Du]))),r},rD=(e,t)=>{let r={};return e[Nu]!=null&&(r[Nu]=h(e[Nu])),r},oD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},nD=(e,t)=>{let r={};return e[Lu]!=null&&(r[Lu]=h(e[Lu])),e[Yt]!=null&&(r[Yt]=h(e[Yt])),r},sD=(e,t)=>{let r={};return e[pn]!=null&&(r[pn]=h(e[pn])),r},iD=(e,t)=>{let r={};return e[ep]!=null&&(r[ep]=h(e[ep])),e[pn]!=null&&(r[pn]=h(e[pn])),e[Yt]!=null&&(r[Yt]=h(e[Yt])),r},aD=(e,t)=>{let r={};return e[he]!=null&&(r[he]=Gs(e[he],t)),e[Uu]!=null&&(r[Uu]=nD(e[Uu],t)),e[nt]!=null&&(r[nt]=Gn(e[nt])),r},cD=(e,t)=>{let r={};return e[he]!=null&&(r[he]=Gs(e[he],t)),r},dD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},lD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},uD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},pD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},mD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},fD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},hD=(e,t)=>{let r={};return e[z]!=null&&(r[z]=h(e[z])),r},ue=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gD=Rr(fe),Xr=async(e,t,r,o,n)=>{let{hostname:s,protocol:i="https",port:c,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:c,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return o!==void 0&&(l.hostname=o),n!==void 0&&(l.body=n),new H(l)},Qr={"content-type":"application/x-www-form-urlencoded"},Zr="2011-06-15",eo="Action",un="AccessKeyId",yD="AssumeRole",Pu="AssumedRoleId",Jt="AssumedRoleUser",SD="AssumeRoleWithSAML",ED="AssumeRoleWithWebIdentity",pn="Account",Yt="Arn",mn="Audience",he="Credentials",Ou="ContextAssertion",xD="DecodeAuthorizationMessage",Nu="DecodedMessage",ge="DurationSeconds",Du="Expiration",ku="ExternalId",$u="EncodedMessage",Uu="FederatedUser",Lu="FederatedUserId",CD="GetAccessKeyInfo",wD="GetCallerIdentity",_D="GetFederationToken",AD="GetSessionToken",Fu="Issuer",Mu="Key",Hu="Name",Vu="NameQualifier",rt="Policy",ot="PolicyArns",qu="PrincipalArn",Bu="ProviderArn",Gu="ProvidedContexts",zu="ProviderId",nt="PackedPolicySize",Wu="Provider",Xt="RoleArn",fn="RoleSessionName",ju="Subject",Ku="SecretAccessKey",Ju="SAMLAssertion",Yu="SubjectFromWebIdentityToken",st="SourceIdentity",hn="SerialNumber",Xu="SubjectType",Qu="SessionToken",gn="Tags",yn="TokenCode",Zu="TransitiveTagKeys",ep="UserId",to="Version",tp="Value",rp="WebIdentityToken",op="arn",z="message",ro=e=>Object.entries(e).map(([t,r])=>jo(t)+"="+jo(r)).join("&"),RD=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var Ao,Fa=a(()=>{U();M();E();Pt();Jr();Qt();Ao=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,_u).ser($R).de(BR).build(){}});var zs,sp=a(()=>{U();M();E();Pt();Jr();Qt();zs=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(Au,Ru).ser(UR).de(GR).build(){}});var Ro,Ma=a(()=>{U();M();E();Pt();Jr();Qt();Ro=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(vu,Tu).ser(LR).de(zR).build(){}});var Ws,ip=a(()=>{U();M();E();Pt();Qt();Ws=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(FR).de(WR).build(){}});var js,ap=a(()=>{U();M();E();Pt();Qt();js=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(MR).de(jR).build(){}});var Ks,cp=a(()=>{U();M();E();Pt();Qt();Ks=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(HR).de(KR).build(){}});var Js,dp=a(()=>{U();M();E();Pt();Jr();Qt();Js=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,Iu).ser(VR).de(JR).build(){}});var Ys,lp=a(()=>{U();M();E();Pt();Jr();Qt();Ys=class extends w.classBuilder().ep({...de}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,bu).ser(qR).de(YR).build(){}});var vD,Ha,QR=a(()=>{E();Fa();sp();Ma();ip();ap();cp();dp();lp();$s();vD={AssumeRoleCommand:Ao,AssumeRoleWithSAMLCommand:zs,AssumeRoleWithWebIdentityCommand:Ro,DecodeAuthorizationMessageCommand:Ws,GetAccessKeyInfoCommand:js,GetCallerIdentityCommand:Ks,GetFederationTokenCommand:Js,GetSessionTokenCommand:Ys},Ha=class extends bt{};Wo(vD,Ha)});var ZR=a(()=>{Fa();sp();Ma();ip();ap();cp();dp();lp()});var ev=a(()=>{Jr()});var tv,rv,ov,nv,sv=a(()=>{Fa();Ma();tv="us-east-1",rv=async(e,t,r)=>{var s;let o=typeof e=="function"?await e():e,n=typeof t=="function"?await t():t;return(s=r==null?void 0:r.debug)==null||s.call(r,"@aws-sdk/client-sts::resolveRegion","accepting first of:",`${o} (provider)`,`${n} (parent client)`,`${tv} (STS default)`),o??n??tv},ov=(e,t)=>{let r,o;return async(n,s)=>{var c,d,l;if(o=n,!r){let{logger:u=(c=e==null?void 0:e.parentClientConfig)==null?void 0:c.logger,region:p,requestHandler:m=(d=e==null?void 0:e.parentClientConfig)==null?void 0:d.requestHandler,credentialProviderLogger:f}=e,g=await rv(p,(l=e==null?void 0:e.parentClientConfig)==null?void 0:l.region,f);r=new t({credentialDefaultProvider:()=>async()=>o,region:g,requestHandler:m,logger:u})}let{Credentials:i}=await r.send(new Ao(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,credentialScope:i.CredentialScope}}},nv=(e,t)=>{let r;return async o=>{var s,i,c;if(!r){let{logger:d=(s=e==null?void 0:e.parentClientConfig)==null?void 0:s.logger,region:l,requestHandler:u=(i=e==null?void 0:e.parentClientConfig)==null?void 0:i.requestHandler,credentialProviderLogger:p}=e,m=await rv(l,(c=e==null?void 0:e.parentClientConfig)==null?void 0:c.region,p);r=new t({region:m,requestHandler:u,logger:d})}let{Credentials:n}=await r.send(new Ro(o));if(!n||!n.AccessKeyId||!n.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${o.RoleArn}`);return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.SessionToken,expiration:n.Expiration,credentialScope:n.CredentialScope}}}});var iv,av,cv,TD,dv=a(()=>{sv();$s();iv=(e,t)=>t?class extends e{constructor(o){super(o);for(let n of t)this.middlewareStack.use(n)}}:e,av=(e={},t)=>ov(e,iv(bt,t)),cv=(e={},t)=>nv(e,iv(bt,t)),TD=e=>t=>e({roleAssumer:av(t),roleAssumerWithWebIdentity:cv(t),...t})});var up={};Ne(up,{$Command:()=>w,AssumeRoleCommand:()=>Ao,AssumeRoleResponseFilterSensitiveLog:()=>_u,AssumeRoleWithSAMLCommand:()=>zs,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>Au,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>Ru,AssumeRoleWithWebIdentityCommand:()=>Ro,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>vu,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Tu,CredentialsFilterSensitiveLog:()=>ln,DecodeAuthorizationMessageCommand:()=>Ws,ExpiredTokenException:()=>Us,GetAccessKeyInfoCommand:()=>js,GetCallerIdentityCommand:()=>Ks,GetFederationTokenCommand:()=>Js,GetFederationTokenResponseFilterSensitiveLog:()=>Iu,GetSessionTokenCommand:()=>Ys,GetSessionTokenResponseFilterSensitiveLog:()=>bu,IDPCommunicationErrorException:()=>qs,IDPRejectedClaimException:()=>Hs,InvalidAuthorizationMessageException:()=>Bs,InvalidIdentityTokenException:()=>Vs,MalformedPolicyDocumentException:()=>Ls,PackedPolicyTooLargeException:()=>Fs,RegionDisabledException:()=>Ms,STS:()=>Ha,STSClient:()=>bt,STSServiceException:()=>fe,__Client:()=>Be,decorateDefaultCredentialProvider:()=>TD,getDefaultRoleAssumer:()=>av,getDefaultRoleAssumerWithWebIdentity:()=>cv});var pp=a(()=>{$s();QR();ZR();ev();dv();Ua()});var lv,ID,bD,uv,pv=a(()=>{F();lt();KA();mp();lv=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(ID(e)||bD(e)),ID=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",bD=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",uv=async(e,t,r,o={})=>{var u;(u=r.logger)==null||u.debug("@aws-sdk/credential-provider-ini","resolveAssumeRoleCredentials (STS)");let n=t[e];if(!r.roleAssumer){let{getDefaultRoleAssumer:p}=await Promise.resolve().then(()=>(pp(),up));r.roleAssumer=p({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:r==null?void 0:r.parentClientConfig},r.clientPlugins)}let{source_profile:s}=n;if(s&&s in o)throw new C(`Detected a cycle attempting to resolve credentials for profile ${Me(r)}. Profiles visited: `+Object.keys(o).join(", "),!1);let i=s?Va(s,t,r,{...o,[s]:!0}):(await jA(n.credential_source,e)(r))(),c={RoleArn:n.role_arn,RoleSessionName:n.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:n.external_id,DurationSeconds:parseInt(n.duration_seconds||"3600",10)},{mfa_serial:d}=n;if(d){if(!r.mfaCodeProvider)throw new C(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);c.SerialNumber=d,c.TokenCode=await r.mfaCodeProvider(d)}let l=await i;return r.roleAssumer(l,c)}});var mv,fv=a(()=>{mv=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope}}}});var hv,gv,yv,Sv=a(()=>{F();hv=require("child_process"),gv=require("util");fv();yv=async(e,t)=>{let r=t[e];if(t[e]){let o=r.credential_process;if(o!==void 0){let n=(0,gv.promisify)(hv.exec);try{let{stdout:s}=await n(o),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return mv(e,i)}catch(s){throw new C(s.message)}}else throw new C(`Profile ${e} did not contain credential_process.`)}else throw new C(`Profile ${e} could not be found in shared credentials file.`)}});var PD,Ev=a(()=>{lt();Sv();PD=(e={})=>async()=>{var r;(r=e.logger)==null||r.debug("@aws-sdk/credential-provider-process","fromProcess");let t=await yr(e);return yv(Me(e),t)}});var fp={};Ne(fp,{fromProcess:()=>PD});var hp=a(()=>{Ev()});var xv,Cv,wv=a(()=>{xv=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Cv=async(e,t)=>Promise.resolve().then(()=>(hp(),fp)).then(({fromProcess:r})=>r({...e,profile:t})())});var _v,Av,Rv=a(()=>{_v=async(e,t={})=>{let{fromSSO:r}=await Promise.resolve().then(()=>(Eu(),Su));return r({profile:e,logger:t.logger})()},Av=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string")});var gp,yp,vv=a(()=>{gp=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,yp=(e,t)=>{var r;return(r=t==null?void 0:t.logger)==null||r.debug("@aws-sdk/credential-provider-ini","resolveStaticCredentials"),Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,credentialScope:e.aws_credential_scope})}});var Sp,Ep=a(()=>{Sp=e=>async()=>{var l;(l=e.logger)==null||l.debug("@aws-sdk/credential-provider-web-identity","fromWebToken");let{roleArn:t,roleSessionName:r,webIdentityToken:o,providerId:n,policyArns:s,policy:i,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:u}=await Promise.resolve().then(()=>(pp(),up));d=u({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return d({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:n,PolicyArns:s,Policy:i,DurationSeconds:c})}});var Tv,OD,ND,DD,kD,Iv=a(()=>{F();Tv=require("fs");Ep();OD="AWS_WEB_IDENTITY_TOKEN_FILE",ND="AWS_ROLE_ARN",DD="AWS_ROLE_SESSION_NAME",kD=(e={})=>async()=>{var n;(n=e.logger)==null||n.debug("@aws-sdk/credential-provider-web-identity","fromTokenFile");let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[OD],r=(e==null?void 0:e.roleArn)??process.env[ND],o=(e==null?void 0:e.roleSessionName)??process.env[DD];if(!t||!r)throw new C("Web identity configuration not specified");return Sp({...e,webIdentityToken:(0,Tv.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:o})()}});var xp={};Ne(xp,{fromTokenFile:()=>kD,fromWebToken:()=>Sp});var Cp=a(()=>{Iv();Ep()});var bv,Pv,Ov=a(()=>{bv=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,Pv=async(e,t)=>Promise.resolve().then(()=>(Cp(),xp)).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})())});var Va,mp=a(()=>{F();pv();wv();Rv();vv();Ov();Va=async(e,t,r,o={})=>{let n=t[e];if(Object.keys(o).length>0&&gp(n))return yp(n,r);if(lv(n))return uv(e,t,r,o);if(gp(n))return yp(n,r);if(bv(n))return Pv(n,r);if(xv(n))return Cv(r,e);if(Av(n))return await _v(e,r);throw new C(`Profile ${e} could not be found or parsed in shared credentials file.`)}});var $D,Nv=a(()=>{lt();mp();$D=(e={})=>async()=>{var r;(r=e.logger)==null||r.debug("@aws-sdk/credential-provider-ini","fromIni");let t=await yr(e);return Va(Me(e),t,e)}});var Dv={};Ne(Dv,{fromIni:()=>$D});var kv=a(()=>{Nv()});var Co,UD,LD,$v=a(()=>{vl();F();lt();fw();Co=(e={})=>co(ao(...e.profile||process.env[td]?[]:[async()=>{var t;return(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node","defaultProvider::fromEnv"),Rl(e)()}],async()=>{var c;(c=e.logger)==null||c.debug("@aws-sdk/credential-provider-node","defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:o,ssoRoleName:n,ssoSession:s}=e;if(!t&&!r&&!o&&!n&&!s)throw new C("Skipping SSO provider in default chain (inputs do not include SSO fields).");let{fromSSO:i}=await Promise.resolve().then(()=>(Eu(),Su));return i(e)()},async()=>{var r;(r=e.logger)==null||r.debug("@aws-sdk/credential-provider-node","defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>(kv(),Dv));return t(e)()},async()=>{var r;(r=e.logger)==null||r.debug("@aws-sdk/credential-provider-node","defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>(hp(),fp));return t(e)()},async()=>{var r;(r=e.logger)==null||r.debug("@aws-sdk/credential-provider-node","defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>(Cp(),xp));return t(e)()},async()=>{var t;return(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node","defaultProvider::remoteProvider"),(await mw(e))()},async()=>{throw new C("Could not load credentials from any providers",!1)}),LD,UD),UD=e=>(e==null?void 0:e.expiration)!==void 0,LD=e=>(e==null?void 0:e.expiration)!==void 0&&e.expiration.getTime()-Date.now()<3e5});var ya=a(()=>{$v()});var Ak={};Ne(Ak,{run:()=>zT});module.exports=Tp(Ak);var it=at(Po());vn();Tn();In();Dn();ht();we();jn();U();wt();E();se();ve();var vC=async(e,t,r)=>({operation:Ee(t).operation,region:await J(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function lO(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"apprunner",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var TC=e=>{let t=[];switch(e.operation){default:t.push(lO(e))}return t},IC=e=>({...kr(e)});var bC=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"apprunner"}),ce={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var PC={name:"@aws-sdk/client-apprunner",description:"AWS SDK for JavaScript Apprunner Client for Node.js, Browser and React Native",version:"3.575.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-apprunner","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo apprunner"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sso-oidc":"3.575.0","@aws-sdk/client-sts":"3.575.0","@aws-sdk/core":"3.575.0","@aws-sdk/credential-provider-node":"3.575.0","@aws-sdk/middleware-host-header":"3.575.0","@aws-sdk/middleware-logger":"3.575.0","@aws-sdk/middleware-recursion-detection":"3.575.0","@aws-sdk/middleware-user-agent":"3.575.0","@aws-sdk/region-config-resolver":"3.575.0","@aws-sdk/types":"3.575.0","@aws-sdk/util-endpoints":"3.575.0","@aws-sdk/util-user-agent-browser":"3.575.0","@aws-sdk/util-user-agent-node":"3.575.0","@smithy/config-resolver":"^3.0.0","@smithy/core":"^2.0.0","@smithy/fetch-http-handler":"^3.0.0","@smithy/hash-node":"^3.0.0","@smithy/invalid-dependency":"^3.0.0","@smithy/middleware-content-length":"^3.0.0","@smithy/middleware-endpoint":"^3.0.0","@smithy/middleware-retry":"^3.0.0","@smithy/middleware-serde":"^3.0.0","@smithy/middleware-stack":"^3.0.0","@smithy/node-config-provider":"^3.0.0","@smithy/node-http-handler":"^3.0.0","@smithy/protocol-http":"^4.0.0","@smithy/smithy-client":"^3.0.0","@smithy/types":"^3.0.0","@smithy/url-parser":"^3.0.0","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.0","@smithy/util-defaults-mode-node":"^3.0.0","@smithy/util-endpoints":"^2.0.0","@smithy/util-middleware":"^3.0.0","@smithy/util-retry":"^3.0.0","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-apprunner",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-apprunner"}};se();ya();ss();ht();is();wt();gt();ho();as();Ve();se();E();lo();Ar();Te();Uo();mt();var zv="required",Dt="fn",kt="argv",En="ref";var Uv="isSet",Qs="booleanEquals",Sn="error",Xs="endpoint",Zt="tree",wp="PartitionResult",Lv={[zv]:!1,type:"String"},Fv={[zv]:!0,default:!1,type:"Boolean"},Mv={[En]:"Endpoint"},Wv={[Dt]:Qs,[kt]:[{[En]:"UseFIPS"},!0]},jv={[Dt]:Qs,[kt]:[{[En]:"UseDualStack"},!0]},Nt={},Hv={[Dt]:"getAttr",[kt]:[{[En]:wp},"supportsFIPS"]},Vv={[Dt]:Qs,[kt]:[!0,{[Dt]:"getAttr",[kt]:[{[En]:wp},"supportsDualStack"]}]},qv=[Wv],Bv=[jv],Gv=[{[En]:"Region"}],FD={version:"1.0",parameters:{Region:Lv,UseDualStack:Fv,UseFIPS:Fv,Endpoint:Lv},rules:[{conditions:[{[Dt]:Uv,[kt]:[Mv]}],rules:[{conditions:qv,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Sn},{conditions:Bv,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Sn},{endpoint:{url:Mv,properties:Nt,headers:Nt},type:Xs}],type:Zt},{conditions:[{[Dt]:Uv,[kt]:Gv}],rules:[{conditions:[{[Dt]:"aws.partition",[kt]:Gv,assign:wp}],rules:[{conditions:[Wv,jv],rules:[{conditions:[{[Dt]:Qs,[kt]:[!0,Hv]},Vv],rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Nt,headers:Nt},type:Xs}],type:Zt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Sn}],type:Zt},{conditions:qv,rules:[{conditions:[{[Dt]:Qs,[kt]:[Hv,!0]}],rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Nt,headers:Nt},type:Xs}],type:Zt},{error:"FIPS is enabled but this partition does not support FIPS",type:Sn}],type:Zt},{conditions:Bv,rules:[{conditions:[Vv],rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Nt,headers:Nt},type:Xs}],type:Zt},{error:"DualStack is enabled but this partition does not support DualStack",type:Sn}],type:Zt},{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dnsSuffix}",properties:Nt,headers:Nt},type:Xs}],type:Zt}],type:Zt},{error:"Invalid Configuration: Missing Region",type:Sn}]},Kv=FD;var Jv=(e,t={})=>Mt(Kv,{endpointParams:e,logger:t.logger});Re.aws=Ht;var Yv=e=>({apiVersion:"2020-05-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ge,base64Encoder:(e==null?void 0:e.base64Encoder)??We,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Jv,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??TC,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Je}],logger:(e==null?void 0:e.logger)??new qe,serviceId:(e==null?void 0:e.serviceId)??"AppRunner",urlParser:(e==null?void 0:e.urlParser)??Ce,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ne,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ze});E();ds();E();var Xv=e=>{Tr(process.version);let t=Vr(e),r=()=>t().then(vr),o=Yv(e);return Dr(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Hr,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Co,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Mr({serviceId:o.serviceId,clientVersion:PC.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??O(xr),region:(e==null?void 0:e.region)??O(ft,hr),requestHandler:Ke.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??O({...wr,default:async()=>(await r()).retryMode||yt}),sha256:(e==null?void 0:e.sha256)??Tt.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Et,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??O(mr),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??O(fr)}};ls();W();E();var Qv=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(n){let s=t.findIndex(i=>i.schemeId===n.schemeId);s===-1?t.push(n):t.splice(s,1,n)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(n){r=n},httpAuthSchemeProvider(){return r},setCredentials(n){o=n},credentials(){return o}}},Zv=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var qa=e=>e,eT=(e,t)=>{let r={...qa(qr(e)),...qa(Ir(e)),...qa(nr(e)),...qa(Qv(e))};return t.forEach(o=>o.configure(r)),{...e,...Br(r),...br(r),...sr(r),...Zv(r)}};var Ba=class extends Be{constructor(...[t]){let r=Xv(t||{}),o=bC(r),n=gr(o),s=Sr(n),i=Cr(s),c=i,d=dr(c),l=IC(d),u=eT(l,(t==null?void 0:t.extensions)||[]);super(u),this.config=u,this.middlewareStack.use(Pr(this.config)),this.middlewareStack.use(Nr(this.config)),this.middlewareStack.use(ir(this.config)),this.middlewareStack.use(ar(this.config)),this.middlewareStack.use(cr(this.config)),this.middlewareStack.use(ur(this.config)),this.middlewareStack.use(Er(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use(Or(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return vC}getIdentityProviderConfigProvider(){return async t=>new _t({"aws.auth#sigv4":t.credentials})}};se();W();E();E();var $t=class e extends Ct{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};E();var Ga=class e extends $t{constructor(t){super({name:"InternalServiceErrorException",$fault:"server",...t}),this.name="InternalServiceErrorException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},za=class e extends $t{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Wa=class e extends $t{constructor(t){super({name:"InvalidStateException",$fault:"client",...t}),this.name="InvalidStateException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var ja=class e extends $t{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var Ja={CORRETTO_11:"CORRETTO_11",CORRETTO_8:"CORRETTO_8",DOTNET_6:"DOTNET_6",GO_1:"GO_1",NODEJS_12:"NODEJS_12",NODEJS_14:"NODEJS_14",NODEJS_16:"NODEJS_16",NODEJS_18:"NODEJS_18",PHP_81:"PHP_81",PYTHON_3:"PYTHON_3",PYTHON_311:"PYTHON_311",RUBY_31:"RUBY_31"};var _p={ECR:"ECR",ECR_PUBLIC:"ECR_PUBLIC"},xn={CREATE_FAILED:"CREATE_FAILED",DELETED:"DELETED",DELETE_FAILED:"DELETE_FAILED",OPERATION_IN_PROGRESS:"OPERATION_IN_PROGRESS",PAUSED:"PAUSED",RUNNING:"RUNNING"};var Ka=class e extends $t{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},tT={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PENDING:"PENDING",ROLLBACK_FAILED:"ROLLBACK_FAILED",ROLLBACK_IN_PROGRESS:"ROLLBACK_IN_PROGRESS",ROLLBACK_SUCCEEDED:"ROLLBACK_SUCCEEDED",SUCCEEDED:"SUCCEEDED"};var MD=e=>({...e,...e.BuildCommand&&{BuildCommand:N},...e.StartCommand&&{StartCommand:N},...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:N},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:N}}),HD=e=>({...e,...e.CodeConfigurationValues&&{CodeConfigurationValues:MD(e.CodeConfigurationValues)}}),VD=e=>({...e,...e.CodeConfiguration&&{CodeConfiguration:HD(e.CodeConfiguration)}}),qD=e=>({...e,...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:N},...e.StartCommand&&{StartCommand:N},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:N}}),BD=e=>({...e,...e.ImageConfiguration&&{ImageConfiguration:qD(e.ImageConfiguration)}}),Ap=e=>({...e,...e.CodeRepository&&{CodeRepository:VD(e.CodeRepository)},...e.ImageRepository&&{ImageRepository:BD(e.ImageRepository)}}),rT=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Ap(e.SourceConfiguration)}}),Ya=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Ap(e.SourceConfiguration)}}),oT=e=>({...e,...e.Service&&{Service:Ya(e.Service)}}),nT=e=>({...e,...e.Service&&{Service:Ya(e.Service)}}),sT=e=>({...e,...e.Service&&{Service:Ya(e.Service)}});var iT=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Ap(e.SourceConfiguration)}}),aT=e=>({...e,...e.Service&&{Service:Ya(e.Service)}});var cT=async(e,t)=>{let r=so("CreateService"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var dT=async(e,t)=>{let r=so("DeleteService"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var lT=async(e,t)=>{let r=so("DescribeService"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var uT=async(e,t)=>{let r=so("ListOperations"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)},pT=async(e,t)=>{let r=so("ListServices"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var mT=async(e,t)=>{let r=so("StartDeployment"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)},fT=async(e,t)=>{let r=so("TagResource"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var hT=async(e,t)=>{let r=so("UpdateService"),o;return o=JSON.stringify(D(e)),no(t,r,"/",void 0,o)};var gT=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=YD(r,t),{$metadata:Oe(e),...o}};var yT=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=XD(r,t),{$metadata:Oe(e),...o}};var ST=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=QD(r,t),{$metadata:Oe(e),...o}};var ET=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=ZD(r,t),{$metadata:Oe(e),...o}},xT=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=ek(r,t),{$metadata:Oe(e),...o}};var CT=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=D(r),{$metadata:Oe(e),...o}},wT=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=D(r),{$metadata:Oe(e),...o}};var _T=async(e,t)=>{if(e.statusCode>=300)return oo(e,t);let r=await Z(e.body,t),o={};return o=sk(r,t),{$metadata:Oe(e),...o}};var oo=async(e,t)=>{let r={...e,body:await Ko(e.body,t)},o=Jo(e,r.body);switch(o){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await GD(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await zD(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await WD(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.apprunner#ServiceQuotaExceededException":throw await KD(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await jD(r,t);default:let n=r.body;return ik({output:e,parsedBody:n,errorCode:o})}},GD=async(e,t)=>{let r=e.body,o=D(r),n=new Ga({$metadata:Oe(e),...o});return b(n,r)},zD=async(e,t)=>{let r=e.body,o=D(r),n=new za({$metadata:Oe(e),...o});return b(n,r)},WD=async(e,t)=>{let r=e.body,o=D(r),n=new Wa({$metadata:Oe(e),...o});return b(n,r)},jD=async(e,t)=>{let r=e.body,o=D(r),n=new Ka({$metadata:Oe(e),...o});return b(n,r)},KD=async(e,t)=>{let r=e.body,o=D(r),n=new ja({$metadata:Oe(e),...o});return b(n,r)};var JD=(e,t)=>T(e,{AutoScalingConfigurationArn:h,AutoScalingConfigurationName:h,AutoScalingConfigurationRevision:Bt,CreatedAt:r=>B(xt(be(r))),HasAssociatedService:Ld,IsDefault:Ld,Status:h});var YD=(e,t)=>T(e,{OperationId:h,Service:r=>Xa(r,t)});var XD=(e,t)=>T(e,{OperationId:h,Service:r=>Xa(r,t)});var QD=(e,t)=>T(e,{Service:r=>Xa(r,t)});var ZD=(e,t)=>T(e,{NextToken:h,OperationSummaryList:r=>rk(r,t)}),ek=(e,t)=>T(e,{NextToken:h,ServiceSummaryList:r=>nk(r,t)});var tk=(e,t)=>T(e,{EndedAt:r=>B(xt(be(r))),Id:h,StartedAt:r=>B(xt(be(r))),Status:h,TargetArn:h,Type:h,UpdatedAt:r=>B(xt(be(r)))}),rk=(e,t)=>(e||[]).filter(o=>o!=null).map(o=>tk(o,t));var Xa=(e,t)=>T(e,{AutoScalingConfigurationSummary:r=>JD(r,t),CreatedAt:r=>B(xt(be(r))),DeletedAt:r=>B(xt(be(r))),EncryptionConfiguration:D,HealthCheckConfiguration:D,InstanceConfiguration:D,NetworkConfiguration:D,ObservabilityConfiguration:D,ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,SourceConfiguration:D,Status:h,UpdatedAt:r=>B(xt(be(r)))}),ok=(e,t)=>T(e,{CreatedAt:r=>B(xt(be(r))),ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,Status:h,UpdatedAt:r=>B(xt(be(r)))}),nk=(e,t)=>(e||[]).filter(o=>o!=null).map(o=>ok(o,t));var sk=(e,t)=>T(e,{OperationId:h,Service:r=>Xa(r,t)});var Oe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var ik=Rr($t),no=async(e,t,r,o,n)=>{let{hostname:s,protocol:i="https",port:c,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:c,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return o!==void 0&&(l.hostname=o),n!==void 0&&(l.body=n),new H(l)};function so(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AppRunner.${e}`}}U();M();E();var Qa=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","CreateService",{}).n("AppRunnerClient","CreateServiceCommand").f(rT,oT).ser(cT).de(gT).build(){};U();M();E();var Za=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","DeleteService",{}).n("AppRunnerClient","DeleteServiceCommand").f(void 0,nT).ser(dT).de(yT).build(){};U();M();E();var ec=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","DescribeService",{}).n("AppRunnerClient","DescribeServiceCommand").f(void 0,sT).ser(lT).de(ST).build(){};U();M();E();var tc=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","ListOperations",{}).n("AppRunnerClient","ListOperationsCommand").f(void 0,void 0).ser(uT).de(ET).build(){};U();M();E();var rc=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","ListServices",{}).n("AppRunnerClient","ListServicesCommand").f(void 0,void 0).ser(pT).de(xT).build(){};U();M();E();var oc=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","StartDeployment",{}).n("AppRunnerClient","StartDeploymentCommand").f(void 0,void 0).ser(mT).de(CT).build(){};U();M();E();var nc=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","TagResource",{}).n("AppRunnerClient","TagResourceCommand").f(void 0,void 0).ser(fT).de(wT).build(){};U();M();E();var sc=class extends w.classBuilder().ep({...ce}).m(function(t,r,o,n){return[A(o,this.serialize,this.deserialize),R(o,t.getEndpointParameterInstructions())]}).s("AppRunner","UpdateService",{}).n("AppRunnerClient","UpdateServiceCommand").f(iT,aT).ser(hT).de(_T).build(){};var GT=at(Po());var X=at(Po());function vT(e,{validation:t,intOnly:r}={}){let o=(0,X.getInput)(e,{required:!1,trimWhitespace:!0});if(!o)return;let n=r?Number.parseInt(o):Number.parseFloat(o);if(isNaN(n))throw new Error(`${e} value is not a valid number: ${o}`);if(t!=null&&t.min&&t.min>n)throw new Error(`${e} value (${n}) is less then the allowed minimum (${t.min})`);if(t!=null&&t.max&&t.max<n)throw new Error(`${e} value (${n}) is greater then the allowed maximum (${t.max})`);return n}function Rp(e,t,{validation:r,intOnly:o}={}){return vT(e,{validation:r,intOnly:o})??t}function ak(e,t){return(0,X.getInput)(e,{required:!1,trimWhitespace:!0})||t}function AT(e,t){let r=(0,X.getInput)(e,{required:!1,...t});return r.length>0?r:void 0}function TT(e,t){let r=(0,X.getInput)(e,{required:!1,trimWhitespace:!0});return r?["1","true"].includes(r.toLowerCase()):t}function IT(){let e=(0,X.getInput)("action",{required:!1,trimWhitespace:!0});switch(e.toLowerCase()||"create_or_update"){case"create_or_update":return ck();default:throw new Error(`Unsupported action: ${e}`)}}function ck(){let e="create_or_update",t=(0,X.getInput)("service",{required:!0,trimWhitespace:!0}),r=Rp("port",80,{intOnly:!0}),o=ak("region","us-east-1"),n=TT("wait-for-service-stability",!1),s=vT("wait-for-service-stability-seconds",{validation:{min:10,max:3600},intOnly:!0}),i=Rp("cpu",1),c=Rp("memory",2),d=(0,X.getInput)("image",{required:!1,trimWhitespace:!0}),l=(0,X.getMultilineInput)("copy-env-vars",{required:!1}),u=(0,X.getMultilineInput)("copy-secret-env-vars",{required:!1}),p=(0,X.getInput)("tags",{required:!1}),m=AT("auto-scaling-config-arn",{trimWhitespace:!0}),f=AT("instance-role-arn",{trimWhitespace:!0});return{action:e,serviceName:t,region:o,port:r,waitForService:n||!!s,waitTimeout:s??600,cpu:i,memory:c,sourceConfig:d?lk(d):uk(),environment:RT(l),environmentSecret:RT(u),tags:mk(p),autoScalingConfigArn:m,instanceRoleArn:f}}function dk(){let e=(0,X.getInput)("branch",{required:!1})||"main";return e.startsWith("refs/")?e.split("/")[2]:e}function lk(e){if((0,X.getInput)("repo",{required:!1}))throw new Error("Either docker image registry or code repository expected, not both");return{sourceType:"image",imageUri:e,accessRoleArn:(0,X.getInput)("access-role-arn",{required:!0})}}function uk(){return{sourceType:"code",sourceConnectionArn:(0,X.getInput)("source-connection-arn",{required:!0}),repoUrl:(0,X.getInput)("repo",{required:!0}),branch:dk(),runtime:pk(),buildCommand:(0,X.getInput)("build-command",{required:!0}),startCommand:(0,X.getInput)("start-command",{required:!0}),autoDeploymentsEnabled:TT("auto-deployments-enabled",!0)}}function pk(){let e=(0,X.getInput)("runtime",{required:!0}),t=e.toUpperCase();if(!Object.keys(Ja).includes(t))throw new Error(`Specified runtime (${e}) does not belong to the supported range: ${JSON.stringify(Object.keys(Ja))}`);return Ja[t]}function RT(e){if(e.length>0){let t=e.reduce((r,o)=>{let n=process.env[o];return n!==void 0&&(r[o]=n),r},{});if(Object.keys(t).length>0)return t}}function mk(e){if(!e.length)return[];let t=JSON.parse(e);return Object.keys(t).reduce((r,o)=>[...r,{Key:o,Value:t[o]}],[])}var pe=at(Po());function bT(e){return new Qa({ServiceName:e.serviceName,InstanceConfiguration:{Cpu:`${e.cpu} vCPU`,Memory:`${e.memory} GB`,InstanceRoleArn:e.instanceRoleArn},AutoScalingConfigurationArn:e.autoScalingConfigArn,SourceConfiguration:e.sourceConfig.sourceType=="image"?FT(e.port,e.sourceConfig,e.environment,e.environmentSecret):LT(e.port,e.sourceConfig,e.environment,e.environmentSecret),Tags:e.tags})}function PT(e,t){return new sc({ServiceArn:e,InstanceConfiguration:{Cpu:`${t.cpu} vCPU`,Memory:`${t.memory} GB`,InstanceRoleArn:t.instanceRoleArn},AutoScalingConfigurationArn:t.autoScalingConfigArn,SourceConfiguration:t.sourceConfig.sourceType=="image"?FT(t.port,t.sourceConfig,t.environment,t.environmentSecret):LT(t.port,t.sourceConfig,t.environment,t.environmentSecret)})}function OT(e){return new oc({ServiceArn:e})}function NT(e,t){return new nc({ResourceArn:e,Tags:t.tags})}function DT(e){return new Za({ServiceArn:e})}function kT(e){return new ec({ServiceArn:e})}function $T(e){return new rc({NextToken:e})}function UT(e){return new tc({ServiceArn:e})}function fk(e){return e.startsWith("public.ecr")?_p.ECR_PUBLIC:_p.ECR}function LT(e,t,r,o){return{AuthenticationConfiguration:{ConnectionArn:t.sourceConnectionArn},AutoDeploymentsEnabled:t.autoDeploymentsEnabled,CodeRepository:{RepositoryUrl:t.repoUrl,SourceCodeVersion:{Type:"BRANCH",Value:t.branch},CodeConfiguration:{ConfigurationSource:"API",CodeConfigurationValues:{Runtime:t.runtime,BuildCommand:t.buildCommand,StartCommand:t.startCommand,Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:o}}}}}function FT(e,t,r,o){return{AuthenticationConfiguration:{AccessRoleArn:t.accessRoleArn},ImageRepository:{ImageIdentifier:t.imageUri,ImageRepositoryType:fk(t.imageUri),ImageConfiguration:{Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:o}}}}function hk(e){return new Promise(t=>setTimeout(t,e))}async function HT(e,t){let r;do{let o=await e.send($T(r));if(r=o.NextToken,o.ServiceSummaryList){for(let n of o.ServiceSummaryList)if(n.ServiceName===t&&n.ServiceArn)return(0,pe.info)(`Discovered ${t} (${n.ServiceArn}) with the following status: ${n.Status}`),{ServiceArn:n.ServiceArn,Status:n.Status}}}while(r)}async function MT(e,t){(0,pe.info)(`Creating service ${t.serviceName}`);let r=bT(t);return(await e.send(r)).Service}async function gk(e,t,r){return(0,pe.info)(`Updating existing service ${t.serviceName} (${r})`),await e.send(PT(r,t))}async function yk(e,t){(0,pe.info)(`Starting deployment for service ${t}`);let r=OT(t);await e.send(r)}async function Sk(e,t,r){if((0,pe.info)(`Updating tags service ${t.serviceName} (${r})`),t.tags.length){let o=NT(r,t);await e.send(o)}}async function Ek(e,t,r){(0,pe.info)(`Deleting existing service ${t.serviceName} (${r})`);let o=DT(r),n=await e.send(o);(0,pe.info)(`Delete service response: ${JSON.stringify(n.Service)}`)}async function xk(e,t){let r=UT(t);return(await e.send(r)).OperationSummaryList}async function Ck(e,t,r){if(!t)throw new Error(`Failed to create or update service ${e.serviceName} - App Runner Client returned an empty response`);let o=t.ServiceId;if(o)(0,pe.info)(`Service ID: ${o}`);else throw new Error(`App Runner Client returned an empty ServiceId for ${e.serviceName}`);let n=t.ServiceArn;if(n)(0,pe.info)(`Service ARN: ${n}`);else throw new Error(`App Runner Client returned an empty ServiceArn for ${e.serviceName}`);let s=t.ServiceUrl??"";return s===""?(0,pe.info)(`App Runner Client returned an empty ServiceUrl for ${e.serviceName}, this could happen if the deployment is of an AWS App Runner Private Service`):(0,pe.info)(`Service URL: ${s}`),{ServiceId:o,ServiceArn:n,ServiceUrl:s,OperationId:r}}async function VT(e,t,r){let o,n;if(r)if((0,pe.info)(`Existing service info: ${JSON.stringify(r)}`),r.Status===xn.CREATE_FAILED){await Ek(e,t,r.ServiceArn);let s=await ic(e,r.ServiceArn,900);if(s===xn.DELETED)o=await MT(e,t);else throw new Error(`Failed to delete service ${t.serviceName} (${r.ServiceArn}). Its current status is ${s}`)}else{await Sk(e,t,r.ServiceArn);let s=await gk(e,t,r.ServiceArn);if(t.sourceConfig.sourceType==="code"&&!t.sourceConfig.autoDeploymentsEnabled){let i=await ic(e,r.ServiceArn,900);(0,pe.info)(`Service ${r.ServiceArn} has reached the stable state ${i}`),await yk(e,r.ServiceArn)}o=s.Service,n=s.OperationId}else o=await MT(e,t);return Ck(t,o,n)}async function wk(e,t){let o=(await e.send(kT(t))).Service;if(!o)throw new Error(`App Runner Client returned an empty Service for ${t}`);return{ServiceArn:t,Status:o.Status}}async function qT(e,t,r){let o=await xk(e,t);if(o){for(let n of o)if(r===n.Id&&n.Status!==tT.SUCCEEDED)throw new Error(`Operation ${r} is not successful. Its current status is ${n.Status}`)}}async function ic(e,t,r){let o=new Date(new Date().getTime()+r*1e3).getTime(),n=xn.OPERATION_IN_PROGRESS;for((0,pe.info)(`Waiting for ${t} to reach stable state`);n===xn.OPERATION_IN_PROGRESS&&o>=new Date().getTime();){let s=new Date().getTime();if(n=(await wk(e,t)).Status,n!==xn.OPERATION_IN_PROGRESS)return(0,pe.info)(`Service ${t} has reached the stable state ${n}`),n;let d=1e3-(new Date().getTime()-s);d>0&&await hk(d)}throw new Error(`Service ${t} did not reach stable state within ${r} seconds`)}var BT="2.5.2";async function zT(){try{let e=IT(),t=new Ba({region:e.region}),r=await HT(t,e.serviceName),o=await VT(t,e,r);(0,it.setOutput)("service-id",o.ServiceId),(0,it.setOutput)("service-arn",o.ServiceArn),(0,it.setOutput)("service-url",o.ServiceUrl),e.waitForService?(await ic(t,o.ServiceArn,e.waitTimeout),r&&o.OperationId&&await qT(t,o.ServiceArn,o.OperationId)):(0,it.info)(`Service ${o.ServiceId} has started an update. Watch for its progress in the AppRunner console`)}catch(e){e instanceof Error?((0,it.setFailed)(e.message),(0,GT.debug)(e.stack??"no stack info")):(0,it.setFailed)(JSON.stringify(e))}}require.main===module&&((0,it.info)(`Version: ${BT??"undefined"}`),zT().then(()=>{(0,it.info)("App Runner step - DONE!")}).catch(e=>{(0,it.setFailed)(`App Runner unhandled exception: ${e.message}`)}));0&&(module.exports={run});
